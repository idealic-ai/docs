# 004: Агент/Вызов

> **Вызов:** Представь, что у тебя есть волшебная палочка («Инструмент»). «Вызов» — это когда ты взмахиваешь палочкой и произносишь заклинание, указывая точные детали. Это команда, которая говорит: *«Сделай вот это прямо сейчас!»*.
>
> — [Глоссарий](./000_glossary.md)

> Sidenote:
>
> - Требуется:
>   - [103: Концепция/Идеатор](./103_concept_ideator.md)
> - Открывает возможности для:
>   - [008: Агент/Импорты](./008_agent_imports.md)
>   - [011: Агент/Инстансинг](./011_agent_instancing.md)
>   - [202: Идея/Контейнер](./202_idea_vessel.md)
>   - [203: Идея/Процесс](./203_idea_process.md)

В документе [101: Концепция/Идея](./101_concept_idea.md) мы узнали, что «Идея» — это как сундучок со знаниями. А в [002: Агент/Инструмент](./002_agent_tool.md) мы выяснили, что у компьютера есть «Инструменты» — это как инструкции, которые объясняют, что он умеет делать. Этот документ рассказывает о **004: Агент/Вызов**, который берёт эти Инструменты и заставляет их работать, используя два переключателя: «Область» (где делать?) и «Метод» (как делать?).

**Вызов** — это, по сути, Инструмент, которому дали конкретное задание. Если Инструмент — это рецепт, то Вызов — это приготовление блюда по этому рецепту с конкретными продуктами.

## Путь от Идеи к Вызову

Давай представим, что ты хочешь сделать бутерброд.

1.  **Идея**: У тебя есть общая мысль: «Хочу бутерброд». Это просто знание о том, что бутерброды существуют.
2.  **Инструмент**: Твоя «Идея» превращается в понятный для компьютера рецепт. Рецепт говорит, какие «ингредиенты» (`параметры`) нужны. Например: нам нужны `хлеб`, `начинка` и `сыр`. (Подробнее об этом в [002: Агент/Инструмент](./002_agent_tool.md)).
3.  **Вызов**: А вот теперь самое интересное! Искусственный интеллект (ИИ) решает использовать твой рецепт. Он берёт конкретные ингредиенты: `два куска белого хлеба`, `три ломтика ветчины` и `один кусочек сыра`. **Вызов** — это и есть этот самый момент, когда ты берёшь рецепт и конкретные продукты и начинаешь готовить.

Главное правило такое: **Любую Идею можно превратить в Инструмент, а любой Инструмент можно использовать через Вызов.**

Чтобы узнать, как Идеи становятся готовыми к использованию, загляни в **[007: Агент/Ввод](./007_agent_input.md)**.

## Как управлять выполнением: Область и Метод

Чтобы решить, как именно будет работать наш `Вызов`, у нас есть два «переключателя»: **Область** (где он работает) и **Метод** (как он работает). Ими можно управлять с помощью специальных команд `_module`, `_activity` и `_output`.

### Два способа управления

1.  **Область (Сделать самому или попросить друга?)**
    Область решает, где будет выполнена задача: прямо здесь и сейчас или где-то в другом месте.
    - **Сделать самому (Inline Scope)**: Это обычный режим. Задача выполняется немедленно, на месте. Как будто ты сам делаешь бутерброд на своей кухне.
    - **Попросить друга (Module Scope)**: Это включается командой `_module`. Задача передаётся кому-то другому. Это как заказать пиццу: ты делаешь заказ (`Вызов`), а готовит её уже другая «кухня» (другой модуль или Идея).

2.  **Метод (По рецепту или как художник?)**
    Метод решает, как будет получен результат: по строгой инструкции или творчески.
    - **По рецепту (Explicit Method)**: Включается командой `_activity`. Результат создаётся по чётко написанному коду, шаг за шагом. Ты всегда получишь одно и то же, как если бы готовил по бабушкиному рецепту.
    - **Как художник (Latent Method)**: Это обычный режим, если нет команды `_activity`. Результат придумывает сам ИИ. Это как если бы ты сказал шеф-повару: «Удиви меня!», и он создал бы что-то новое, зная, что ты любишь (`_output`).

Эти переключатели можно комбинировать, чтобы создавать самые разные способы выполнения задач. А чтобы решать, какими знаниями при этом можно пользоваться, существуют импорты. Про них можно прочитать в **[008: Агент/Импорты](./008_agent_imports.md)**.

## Собираем сложные штуки из простых

`Вызов` — это как один кирпичик LEGO. Сам по себе он простой, но из множества таких кирпичиков можно построить огромный замок. Именно `Вызовы` запускают такие сложные «Идеи», как **[202: Идея/Контейнер](./202_idea_vessel.md)** и **[203: Идея/Процесс](./203_idea_process.md)**. `Контейнер`, например, — это как коробка с LEGO. В ней есть всё: инструкция со списком деталей (`Инструменты`), сами детали (`контекст`) и решение, какие кирпичики (`Вызовы`) использовать для постройки.

> Sidenote:
>
> - [202: Идея/Контейнер](./202_idea_vessel.md)
> - [203: Идея/Процесс](./203_idea_process.md)

## Как выполнять Вызовы

Когда у агента есть несколько задач (Вызовов), он может выполнять их по-разному. Представь, что это твой список дел на вечер.

```typescript
// Сделать одно дело из списка
const result = await Tool(call);

// Сделать все дела в списке и дождаться, пока каждое будет готово
const results = await Tool.all(calls);

// Пробовать делать дела по очереди и остановиться, как только первое получится
const result = await Tool.any(calls);

// Начать делать все дела одновременно и посмотреть, какое закончится первым (неважно, успешно или нет)
const result = await Tool.race(calls);
```

Такие способы позволяют:

- **Всё контролировать**: Делать задачи по одной, одну за другой.
- **Делать всё сразу**: Если дела не зависят друг от друга (например, сделать уроки и помыть посуду), можно делать их одновременно, чтобы было быстрее.
- **Находить быстрые решения**: Если тебе нужно найти ответ на вопрос и ты спросил у трёх друзей, ты остановишься, как только первый из них даст тебе ответ (`.any()`).
- **Делать всё или ничего**: Если для постройки замка из LEGO нужно выполнить все шаги инструкции, ты будешь использовать `.all()`, чтобы убедиться, что всё сделано правильно.
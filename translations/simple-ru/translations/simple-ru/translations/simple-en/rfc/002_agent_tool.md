# 002: Агент/Инструмент

> **Инструмент**: Представь, что Инструмент — это рецепт или чертёж особой суперсилы, которую может использовать ИИ. Он говорит ИИ: «Вот что ты можешь сделать, и вот что тебе для этого нужно». Затем ИИ может использовать эту силу, заполнив рецепт нужными ингредиентами. Это называется `Вызов`. `Вызов` выполняется либо собственным «мозгом» ИИ, либо специальным кусочком компьютерного кода.

> Sidenote: - Нужно прочитать: [001: Агент/Запрос](./001_agent_request.md)
> - Хорошо сочетается с: [003: Агент/Действие](./003_agent_activity.md)

Этот документ объясняет, что такое Инструмент — основной чертёж, который позволяет ИИ (мы называем его Агентом) понимать и использовать свои способности.

## Что такое Инструменты?

**Инструменты — это самая важная часть** того, как действует ИИ. Они дают ему совершенно новый навык: **выбирать правильное действие в нужный момент**. Это позволяет ИИ посмотреть на ситуацию и решить, что лучше всего сделать.

Инструменты дают ИИ:

- **Чёткие инструкции**: Чертёж, который ИИ может прочитать, чтобы понять свои силы.
- **Никаких сюрпризов**: Они устанавливают ясные правила о том, какая информация поступает на вход и что получается на выходе.
- **Кубики LEGO**: Ты можешь комбинировать разные Инструменты, чтобы помочь ИИ выполнять более сложные задачи.
- **Понятны для ИИ**: Чертёжи написаны так, чтобы «мозг» ИИ (большая языковая модель) мог их понять и выбрать нужный.

Когда ИИ берёт чертёж Инструмента и вписывает в него все детали, он создаёт **Вызов**. Вызов — это как заполненный бланк заказа, готовый к отправке, чтобы что-то сделать. (Больше о том, как работает Вызов, можно узнать в документе [004: Агент/Вызов](./004_agent_call.md)).

> **Примечание**: Ты можешь попросить ИИ сделать что-то простое, дав ему лишь общую идею. Но когда нужно, чтобы ИИ сам выбирал между разными действиями, тебе понадобятся Инструменты. Чтобы увидеть, как простая идея превращается в Инструмент, загляни в документ [007: Агент/Ввод](./007_agent_input.md).

## Когда стоит использовать Инструменты?

Используй Инструменты, когда хочешь, чтобы ИИ:

- **Выбирал действия на лету**, в зависимости от того, что происходит.
- **Выбирал из множества разных способностей**, чтобы выполнить задачу.
- **Использовал разные версии одной и той же способности** (например, искал в Google или DuckDuckGo).
- **Совмещал собственное мышление с чёткими инструкциями** для принятия решений.

## Как работает система Инструментов

### Главная идея: чертёж — это просто план

Вся система основана на одной ключевой идее: **Инструменты — это просто чертежи**. Они описывают, *что* делает способность, но не *как* она это делает. Сама работа выполняется либо воображением ИИ, либо отдельным куском кода, который называется **[Действие](./003_agent_activity.md)**.

Чертёж Инструмента говорит тебе:

- **Что он делает** (простое описание).
- **Что ему нужно** (ингредиенты или входная информация).
  >Sidenote: О дополнительных настройках:
  >
  > - `_instance`: Об этом можно почитать в [011: Агент/Инстансинг](./011_agent_instancing.md).
  > - `_module`: Загляни в [009: Агент/Модуль](./009_agent_module.md), чтобы узнать больше.
- **Что он создаёт** (результат, или `_output`).
- **Как он называется** (его имя, или `_tool`).
- **Как это делается** (поле `_activity`, о котором можно прочитать в [003: Агент/Действие](./003_agent_activity.md)).

### Специальные метки на чертеже

В чертежах Инструментов используются специальные метки (все они начинаются с подчёркивания `_`), чтобы давать системе инструкции:

- **\_tool**: Уникальное имя этого инструмента (его нужно указывать обязательно).
- **\_activity**: Указывает на определённый кусочек кода (`Действие`), который может выполнить работу. Как это работает, можно узнать в [003: Агент/Действие](./003_agent_activity.md).
- **\_output**: Описывает, как должен выглядеть результат.
- **\_reasoningForCall**: Заметка, которую ИИ добавляет, чтобы объяснить, *почему* он решил использовать этот инструмент.

Любое другое поле без подчёркивания — это обычный ингредиент, который нужен инструменту. Специальные метки с `_` всегда идут первыми, чтобы ИИ мог легко увидеть важные инструкции.

### О чём заботится система

Система Инструментов занимается тем, что:

- **Ведёт учёт всех чертежей** (регистрирует инструменты).
- **Помогает ИИ заполнять пробелы** в чертеже, используя имеющуюся у него информацию.
- **Решает, кто будет выполнять работу** («мозг» ИИ или специальный кусок кода).

Другие части системы отвечают за управление рабочими процессами и правилами того, как и когда выполняются действия.

## Как определить Инструмент

Инструменты определяются с помощью формата под названием JSON Schema. Вот пример Инструмента, который может определить, какое настроение у предложения — радостное, грустное или нейтральное. Этому инструменту не нужен отдельный кусок кода, потому что ИИ может просто использовать своё собственное понимание языка, чтобы получить ответ.

```typescript
Tool.register('sentimentAnalysis', {
  type: 'object',
  description: 'Analyzes text sentiment',
  properties: {
    _tool: { type: 'string', const: 'sentimentAnalysis' },
    text: { type: 'string', description: 'Text to analyze' },
    _output: {
      type: 'object',
      properties: {
        sentiment: { type: 'string' },
        confidence: { type: 'number' },
      },
    },
  },
});
```

## Набор инструментов и Вызов

Хотя один инструмент — это полезно, настоящая магия начинается, когда ты даёшь ИИ целый ящик с инструментами, или «тулбокс». Система показывает ИИ все доступные чертежи Инструментов одновременно. Это позволяет ИИ просмотреть все варианты и выбрать лучший для текущей задачи.

Когда ИИ выбирает Инструмент и заполняет необходимую информацию, он создаёт **Вызов**. Вызов — это окончательная, готовая к выполнению команда, которая передаётся дальше для исполнения.

> Sidenote: Когда ИИ использует Инструмент, он создаёт **Вызов** — это и есть настоящая команда что-то сделать. Больше об этом ты можешь прочитать здесь: [004: Агент/Вызов](./004_agent_call.md).

## Два способа выполнить задачу

Чертёж Инструмента сам по себе — это просто план. Заставить его что-то сделать можно двумя способами. Первый способ мы называем **скрытым исполнением**, когда ИИ использует своё собственное воображение и знания, чтобы придумать ответ. Это идеально подходит для задач, связанных с языком или идеями.

Но для действий, которые должны взаимодействовать с реальным миром — например, поиск в интернете или проверка базы данных — Инструмент нужно подключить к настоящей компьютерной программе. Эту программу мы называем **Действием**.

Отделять чертёж Инструмента от Действия, которое выполняет работу, — это очень важная идея. Это значит, что ИИ может думать о своих способностях, не беспокоясь о сложных деталях их работы. Мы также можем поменять программу, которую использует инструмент, не меняя сам чертёж. Следующий документ, **[003: Агент/Действие](./003_agent_activity.md)**, объясняет, как Действия воплощают Инструменты в жизнь.
# 004: Агент/Вызов

> **Вызов:** Это как конкретная, готовая к исполнению команда. Мы берём «Инструмент» и заполняем все его поля, чтобы точно сказать, _что нужно сделать_.
>
> — [Глоссарий](./000_glossary.md)

> Sidenote:
>
> - Нужно для этого:
>   - [103: Концепция/Идеатор](./103_concept_ideator.md)
> - Открывает путь к:
>   - [008: Агент/Импорты](./008_agent_imports.md)
>   - [011: Агент/Инстансинг](./011_agent_instancing.md)
>   - [202: Идея/Контейнер](./202_idea_vessel.md)
>   - [203: Идея/Процесс](./203_idea_process.md)

Давай представим, что у нас есть общая **Идея** — это как рецепт в кулинарной книге. Из этой идеи мы делаем **Инструмент** — пустую карточку с полями-окошками: «что положить», «сколько» и «как готовить». 

А этот документ — о **Вызове**. Это когда мы берём эту карточку и заполняем её: «мука — 200 грамм, температура — 180 градусов». Теперь у нас не просто пустая карточка, а готовая инструкция: «испечь кекс!».

**Вызов** — это и есть эта заполненная карточка рецепта (Инструмент), которую можно отдать повару. Если Инструмент — это вопрос «Что можно сделать?» (например, «испечь пирог»), то Вызов — это уже готовый ответ, _как именно_ это сделать.

## Путь от Идеи к Вызову

1.  **Идея**: Начинается всё с общей мысли. Например: «Хочу испечь что-нибудь вкусное».
2.  **Инструмент**: Идея превращается в шаблон, как анкета для рецепта. Например: «Рецепт кекса» с пустыми окошками для ингредиентов.
3.  **Вызов**: Компьютерный помощник (ИИ) смотрит на этот шаблон, решает испечь кекс и заполняет все окошки: «мука, 3 яйца, шоколадная крошка». Так получается **Вызов** — один конкретный, готовый к выполнению рецепт.

Главное правило такое: **любую Идею можно превратить в Инструмент, а любой Инструмент — выполнить как Вызов.**

## Как управлять выполнением: Место и Способ

Когда мы «отдаём рецепт на кухню», у нас есть два переключателя, которыми мы решаем, как именно его готовить.

### Два способа выполнения

1.  **Где это делать? (На своей кухне или в ресторане)**
    Этот переключатель решает, будем ли мы готовить сами или попросим кого-то другого.
    -   **На своей кухне (Встроенное исполнение)**: Это как готовить дома. Задача выполняется прямо здесь и сейчас, в той же программе.
    -   **В ресторане (Модульное исполнение)**: Мы отдаём наш рецепт (Вызов) на другую, специальную «кухню». Например, в кондитерскую, где пекут лучшие кексы в городе.

2.  **Как это делать? (Строго по рецепту или с фантазией)**
    Этот переключатель отвечает за то, насколько точно нужно следовать рецепту.
    -   **Строго по рецепту (Явное исполнение)**: Представь, что готовит робот-повар. Он всё делает по чётким правилам, шаг за шагом. Результат всегда будет абсолютно одинаковым.
    -   **С фантазией (Скрытое исполнение)**: А это как отдать рецепт настоящему шеф-повару (искусственному интеллекту). Мы говорим ему: «Сделай вкусно!», и он, опираясь на рецепт, может добавить что-то от себя, проявить фантазию. Кекс всегда будет вкусным, но каждый раз может получаться чуточку особенным.

Эти настройки можно смешивать, чтобы создавать разные способы выполнения задач.

## Создание сложных процессов

**Вызов** — это как один кубик LEGO. Он очень простой. Но если взять много таких кубиков, можно построить что угодно: замок, самолёт, целый город.

Точно так же из простых Вызовов строятся большие и сложные Идеи, например, **Контейнер** или **Процесс**. Представь, что **Контейнер** — это «миссия» для нашего умного помощника (ИИ). Мы даём ему описание ситуации, набор инструментов и цель: «Придумай, как решить проблему». В ответ ИИ выдаёт нам не один Вызов, а целый список — готовый план действий, который нужно выполнить.

> Sidenote:
>
> - [202: Идея/Контейнер](./202_idea_vessel.md)
> - [203: Идея/Процесс](./203_idea_process.md)

## Способы выполнения Вызовов

Когда наш помощник (ИИ) создаёт целый список дел (Вызовов), мы можем выполнять их по-разному.

```typescript
// Выполнить одно дело
const result = await Tool(call);

// Сделать все дела сразу и дождаться, пока все будут готовы
const results = await Tool.all(calls);

// Начать делать все дела, но остановиться, как только первое будет успешно выполнено
const result = await Tool.any(calls);

// Устроить гонку: начать все дела и взять результат самого быстрого, неважно, успешный он или нет
const result = await Tool.race(calls);
```

Представь, что у нас есть список дел для вечеринки. Эти способы помогают нам:

-   **Делать по порядку (`Tool(...)`)**: Сначала испечь пирог, посмотреть, что получилось, и только потом делать лимонад. Это помогает всё контролировать.
-   **Делать всё вместе (`Tool.all(...)`)**: Попросить нескольких друзей помочь. Один печёт пирог, другой делает лимонад. Мы ждём, пока все закончат. Это экономит время, особенно когда дела не мешают друг другу.
-   **Найти хотя бы одно решение (`Tool.any(...)`)**: Нам нужно придумать угощение. Мы просим трёх друзей предложить свои идеи и берём первую же удачную, а остальные просьбы отменяем. Это помогает быстро найти ответ.
-   **Устроить соревнование (`Tool.race(...)`)**: Мы просим трёх друзей на скорость приготовить сок. Кто первый справится, того сок и ставим на стол, даже если он получился неидеальным. Главное — скорость!
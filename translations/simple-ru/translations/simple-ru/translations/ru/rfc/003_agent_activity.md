# 003: Агент/Действие

> **Действие:** Представь, что у тебя есть пульт от игрушечной машинки. Кнопка «Вперёд» — это `Инструмент`. А `Действие` — это настоящий код, который заставляет колёса машинки крутиться. `Действие` нужно для работы с реальным миром: например, чтобы проверить погоду в интернете или найти что-то в базе данных. Это то, что искусственный интеллект не может просто «придумать». — [Словарь](./000_glossary.md)

> Sidenote: Требуется: [002: Агент/Инструмент](./002_agent_tool.md)
>

Этот документ объясняет, как `Инструменты` (что мы хотим сделать) соединяются с `Действиями` (как мы это делаем). Если `Инструмент` — это как кнопка в приложении, то `Действие` — это код, который выполняется при нажатии на эту кнопку.

## Два Разных Списка

Чтобы всё было гибко, система использует два отдельных списка:

- **Список Инструментов**: Это как меню в ресторане. В нём описано, какие «блюда» (возможности) можно заказать.
- **Список Действий**: Это кухня ресторана. Здесь находятся «повара» (кусочки кода), которые готовят эти блюда.

Такое разделение очень полезно. Оно позволяет нам иметь «блюдо» в меню, которое повар-ИИ может просто «вообразить» и выдать результат. Или мы можем легко поменять одного повара на другого (например, использовать другой сервис погоды), не меняя само меню.

## Как зарегистрировать Действие

Мы даём каждому `Действию` уникальное имя, чтобы связать его с `Инструментом` из меню.

```typescript
// Здесь мы «нанимаем повара» для нашего меню.
// Имя 'weatherCheck' должно совпадать с названием блюда (Инструмента).
Activity.register('weatherCheck', async call => {
  // Этот код идёт на сайт погоды и берёт данные
  const data = await weatherAPI.get(call.location);
  // А потом возвращает температуру и описание
  return { temperature: data.temp, conditions: data.desc };
});
```

## Два способа работы: «Вообразить» или «Сделать»

Когда мы просим систему использовать `Инструмент`, она может поступить двумя способами:

- **Скрытое исполнение (Вообразить)**: Искусственный интеллект сам «додумывает» результат. Например, если попросить его написать короткий стих, он не будет искать его в интернете — он просто его сочинит. Этот способ используется, если для `Инструмента` не нашлось реального `Действия` (повара).
  > Sidenote: [104: Концепция / Скрытое](./104_concept_latent.md)
- **Явное исполнение (Сделать)**: Система находит нужный код (`Действие`) и запускает его. Этот способ нужен, когда нужно сделать что-то в реальном мире (узнать погоду, отправить письмо) или выполнить точные расчёты, которые нельзя просто «вообразить».

## Как система решает, «воображать» или «делать»

Система очень умная и не требует сложных настроек. Она сама решает, какой способ использовать, по простым правилам:

1.  **Прямая команда**: Если в описании `Инструмента` прямо сказано: «Используй `Действие` с таким-то именем», система его и ищет.
2.  **Совпадение имён (самый простой способ)**: Если прямой команды нет, система ищет `Действие` с таким же именем, как у `Инструмента`. Если у тебя есть `Инструмент` «проверитьПогоду», система будет искать `Действие` с именем «проверитьПогоду». Нашёл — отлично, запускаем!
3.  **План Б — вообразить**: Если `Действие` с таким же именем не найдено, система решает, что нужно использовать воображение, и переключается в скрытый режим.

Это делает всё очень простым:

- **Просто дай `Инструменту` и `Действию` одинаковые имена, и всё заработает само.**
- Инструменты, у которых нет кода-исполнителя, будут безопасно обработаны силой воображения ИИ.
- Если нужно, ты всегда можешь дать прямую команду, чтобы одно `Действие` выполняло работу за несколько разных `Инструментов`.

## Почему так важно разделять «меню» и «кухню»

Если бы мы не разделяли `Инструменты` (меню) и `Действия` (кухню), то каждое блюдо в меню было бы жёстко привязано к своему повару. Чтобы сменить повара (например, начать пользоваться другим погодным сервисом), нам пришлось бы перепечатывать все меню во всех ресторанах нашей сети!

Благодаря разделению, мы можем просто заменить повара на кухне, а меню останется прежним. Гости (агенты) даже не заметят разницы. Это означает, что мы можем:

- **Менять код без поломок**: Можно легко переключиться с «воображаемой» погоды на реальную, и агент, который её запрашивает, этого даже не заметит.
- **Проводить эксперименты**: Можно запустить двух поваров — одного ИИ, а другого, работающего с реальным сервисом, — и посмотреть, кто справится с задачей лучше.
- **Обновляться постепенно**: Можно дать нового повара только некоторым агентам, а остальные пока будут пользоваться старым.

## От идеи к результату

Разделив «что делать» (`Инструмент`) и «как делать» (`Действие`), мы получили очень гибкую систему. Но это еще не всё. Теперь, когда у нас есть меню и кухня, нам нужен официант — тот, кто будет принимать заказы, передавать их на кухню и следить за выполнением.

Следующий документ, [004: Агент/Вызов](./004_agent_call.md), расскажет, как система управляет этими заказами, превращая наши идеи в настоящие действия.
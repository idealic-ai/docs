# 002: Агент/Инструмент

> **Инструмент**: Инструмент — это как чертёж особой способности, которую может использовать агент ИИ. ИИ показывают этот чертёж, чтобы он понял, что умеет делать. Чтобы использовать способность, ИИ создаёт `Вызов` со всеми заполненными деталями. Этот вызов затем выполняется либо собственным «мозгом» ИИ, либо специальным кусочком кода под названием `Действие`. — [Глоссарий](./000_glossary.md)

> Sidenote: - Сначала нужен этот документ: [001: Агент/Запрос](./001_agent_request.md)
> - Сочетается с: [003: Агент/Действие](./003_agent_activity.md)

Этот документ объясняет, что такое Инструменты. Представь их как официальные карточки с инструкциями, которые позволяют ИИ понимать и использовать разные суперсилы.

## Что такое Инструменты?

**Инструменты — это главные строительные блоки** для обучения ИИ тому, как действовать. Они позволяют ИИ делать что-то новое: **выбирать правильное действие для правильной ситуации**. Это как дать супергерою пояс с гаджетами — он смотрит на проблему и выбирает лучший инструмент для её решения.

Инструменты дают нам:

- **Чёткие инструкции**: Чертежи (называемые схемами), которые ИИ легко читать и понимать.
- **Правила, которым нужно следовать**: Они следят за тем, чтобы информация на входе и выходе всегда была в правильном формате, как будто проверяют, что ключ подходит к нужному замку.
- **Кубики LEGO**: Ты можешь соединять простые инструменты, чтобы строить более сложное поведение ИИ.
- **Дизайн, понятный ИИ**: Чертежи сделаны так, чтобы большая языковая модель (LLM) могла «подумать» о них и выбрать лучший для задачи.

Когда ИИ решает использовать Инструмент и заполняет всю нужную информацию (как будто заполняет анкету), он создаёт **Вызов (Call)**. Вызов — это как заполненная форма заказа, готовая к отправке, чтобы что-то сделать (больше об этом можно узнать в [004: Агент/Вызов](./004_agent_call.md)).

> **Примечание**: Ты можешь попросить ИИ сделать простые вещи, дав ему Идею, но Инструменты нужны тогда, когда ИИ должен делать выбор и выполнять действия. Чтобы увидеть, как простые Идеи можно превратить в мощные Инструменты, загляни в [007: Агент/Ввод](./007_agent_input.md).

## Когда стоит использовать Инструменты?

Используй систему Инструментов, когда хочешь, чтобы твой ИИ мог:

- **Выбирать действия на лету** в зависимости от того, что происходит.
- **Выбирать из множества разных способностей**, чтобы достичь цели.
- **Использовать разные версии одной и той же способности** (например, выбирать между Поиском Google и Поиском Bing).
- **Смешивать собственное мышление с заранее написанными инструкциями** для принятия решений.

## Как устроена система Инструментов

### Главная идея: Чертёж — это всего лишь инструкция

Самое важное, что нужно помнить: **Инструменты — это просто чертежи**. Они описывают, *что* делает способность, но не говорят, *как* это делается. Сама работа выполняется либо смекалкой ИИ, либо отдельным кусочком кода, который называется **[Действие (Activity)](./003_agent_activity.md)**.

Чертёж Инструмента объясняет:

- **Что делает инструмент** (описание).
- **Что ему нужно для работы** (входные данные, как ингредиенты для рецепта).
  > Sidenote: Дополнительные возможности:
  >
  > - `_instance`: Смотри [011: Агент/Инстансинг](./011_agent_instancing.md)
  > - `_module`: Смотри [009: Агент/Модуль](./009_agent_module.md)
- **Что он создаёт** (`_output`, или готовое блюдо).
- **Как он называется** (его имя `_tool`).
- **Как его запустить** (поле `_activity`, которое указывает на специальный код; это объясняется в [003: Агент/Действие](./003_agent_activity.md)).

### Особые поля в чертеже

В чертежах Инструментов есть особые поля, которые начинаются с нижнего подчёркивания `_`. Это как записки для самой системы:

- **`_tool`**: Уникальное имя инструмента (обязательно).
- **`_activity`**: Говорит системе, нужно ли использовать специальное `Действие` (кусочек кода) для запуска инструмента. О том, как это работает, можно прочитать в [003: Агент/Действие](./003_agent_activity.md).
- **`_output`**: Описывает, как должен выглядеть результат.
- **`_reasoningForCall`**: Место, где ИИ может объяснить, *почему* он решил использовать этот инструмент.

Любое поле без нижнего подчёркивания — это обычные входные данные, которые нужны инструменту. Особые поля с `_` всегда идут первыми, что помогает ИИ легко понять чертёж.

### Чем управляет система

Система Инструментов берёт на себя:

- Ведение каталога всех доступных Инструментов (чертежей).
- Помощь ИИ в заполнении пробелов в чертеже с использованием предоставленной информации.
- Решение, должен ли ИИ сам догадаться до ответа или использовать специальное `Действие` для выполнения работы.

Системы более высокого уровня, такие как система [004: Агент/Вызов](./004_agent_call.md), используют эти основы для управления сложными проектами, запоминания информации и принятия решений о том, как выполняются действия.

## Описание Инструмента

Инструменты описываются с помощью формата под названием JSON Schema. Вот пример Инструмента, который может определить, является ли текст радостным, грустным или нейтральным (это называется анализ тональности). Этому Инструменту не нужен отдельный кусочек кода, потому что ИИ достаточно умён, чтобы справиться с такой языковой задачей самостоятельно.

```typescript
Tool.register('sentimentAnalysis', {
  type: 'object',
  description: 'Analyzes text sentiment',
  properties: {
    _tool: { type: 'string', const: 'sentimentAnalysis' },
    text: { type: 'string', description: 'Text to analyze' },
    _output: {
      type: 'object',
      properties: {
        sentiment: { type: 'string' },
        confidence: { type: 'number' },
      },
    },
  },
});
```

## Ящик с инструментами и Вызов

Хотя один Инструмент сам по себе полезен, настоящая магия начинается, когда у ИИ появляется целый ящик с инструментами (Toolbox). Система показывает ИИ все доступные чертежи Инструментов сразу. Это позволяет ИИ просмотреть все варианты и выбрать лучший для текущей задачи.

Когда ИИ выбирает Инструмент и заполняет нужную информацию, он создаёт **Вызов (Call)**. Вызов — это полностью подготовленное, готовое к запуску действие, которое передаётся дальше на исполнение.

> Sidenote: - [004: Агент/Вызов](./004_agent_call.md).
>

## Два способа выполнить задачу: Скрытый и Явный

Чертёж Инструмента — это лишь интерфейс, то есть описание. А сама работа может быть сделана двумя способами.

1.  **Скрытое исполнение (Используя свой «мозг»)**: Это способ по умолчанию. ИИ использует свои встроенные знания и логику, чтобы найти ответ. Он идеально подходит для задач, связанных с языком, творчеством или общими знаниями.

2.  **Явное исполнение (Используя вспомогательную функцию)**: Для действий, которым нужно взаимодействовать с внешним миром — например, узнать погоду, отправить email или проверить базу данных — Инструмент нужно соединить с настоящим кусочком кода. Этот код называется **Действие (Activity)**.

Разделение между Инструментом (что делать) и Действием (как делать) очень важно. Это значит, что ты можешь описать способности ИИ простым языком, а позже заменить код, который выполняет работу, не меняя самого описания.

Следующий документ, **[003: Агент/Действие](./003_agent_activity.md)**, объясняет, как `Действия` дают `Инструментам` настоящую силу для работы в реальном мире.

> Sidenote: - [003: Агент/Действие](./003_agent_activity.md).
>

# 004: Агент/Вызов

> **Вызов:** Это готовая к запуску версия `Инструмента`, в которой заполнены все пустые поля. Это команда, которая говорит, *что нужно сделать прямо сейчас*.
>
> — [Глоссарий](./000_glossary.md)

> Sidenote:
>
> - Требует:
>   - [103: Концепция/Идеатор](./103_concept_ideator.md)
> - Открывает возможности для:
>   - [008: Агент/Импорты](./008_agent_imports.md)
>   - [011: Агент/Инстансинг](./011_agent_instancing.md)
>   - [202: Мысль/Сосуд](./202_idea_vessel.md)
>   - [203: Мысль/Процесс](./203_idea_process.md)

Мы уже знаем об [Идеях](./101_concept_idea.md) (которые похожи на чертежи для знаний) и [Инструментах](./002_agent_tool.md) (благодаря которым ИИ может понимать и использовать эти чертежи). Этот документ объясняет следующий шаг: как ИИ на самом деле *действует* с помощью `Инструмента`. Такое действие называется **Вызов**.

**Вызов** — это `Инструмент`, который уже заполнен и готов к работе. Представь себе так: если `Инструмент` — это рецепт торта, то `Вызов` — это когда ты решаешь испечь торт *прямо сейчас*, и у тебя уже отмерено точное количество муки и сахара.

Если `Инструменты` определяют, *что можно сделать*, то `Вызовы` определяют, *как это будет сделано сейчас*.

## Путь от Идеи к Вызову

Вот как это работает, шаг за шагом:

1.  **Идея**: Всё начинается с концепции, например, с какой-то цели или знания. Допустим, это «способность узнавать погоду».
2.  **Инструмент**: `Идея` превращается в формат, который может использовать ИИ, — что-то вроде анкеты с пустыми полями. `Идея` о погоде становится `Инструментом` с пустыми полями «Город» и «Дата». (Подробнее об этом можно прочитать в документе [002: Агент/Инструмент](./002_agent_tool.md)).
3.  **Вызов**: Когда ИИ решает использовать `Инструмент`, он заполняет пустые поля. Например, он вписывает «Лондон» в поле «Город». Так создаётся **Вызов** — конкретная, единственная команда, готовая к выполнению.

Главное правило простое: **Любую Идею можно превратить в Инструмент, который затем можно использовать как Вызов.**

Чтобы точно узнать, как поля ввода `Идеи` становятся полями `Инструмента`, загляни в **[007: Агент/Ввод](./007_agent_input.md)**.

## Управление запуском: Область и Метод

Когда `Вызов` выполняется, мы можем управлять им с помощью двух настроек: **Область** (где он выполняется) и **Метод** (как он выполняется). Представь их как две ручки на приборной панели.

### Две ручки управления

1.  **Область (Встроенная или Модульная)**
    Область решает, будет ли ИИ выполнять задачу сам или передаст её специальной программе.
    - **Встроенная область**: Это стандартный вариант. ИИ выполняет работу в своём основном потоке мыслей.
    - **Модульная область**: Это как поручить работу кому-то другому. `Вызов` отправляется внешнему помощнику для выполнения.

2.  **Метод (Явный или Неявный)**
    Метод решает, будет ли результат создан предсказуемым кодом или творческим ИИ.
    - **Явный метод**: Задача выполняется простым, строгим кодом. Результат всегда предсказуем, как если бы калькулятор выдавал 2+2=4.
    - **Неявный метод**: Это стандартный вариант. Задача передаётся творческой языковой модели ИИ (LLM). Результат генерируется, а не вычисляется, что очень мощно, но менее предсказуемо.

Эти настройки можно комбинировать, чтобы получить разное поведение. Чтобы узнать больше о том, как они работают вместе, смотри **[008: Агент/Импорты](./008_agent_imports.md)**.

## Создание больших процессов

`Вызов` — это как один кубик Lego. Сам по себе он представляет небольшое действие. Но ты можешь соединить много таких кубиков, чтобы построить сложные и мощные процессы.

Именно так мы можем запускать более крупные вещи, такие как **[Сосуд](./202_idea_vessel.md)** (это как законченная мысль для ИИ) или **[Процесс](./203_idea_process.md)** (последовательность шагов). Например, `Сосуд` упаковывает целый запрос к ИИ — включая весь контекст и доступные `Инструменты` — а ответом ИИ будет список `Вызовов`, которые нужно выполнить.

> Sidenote:
>
> - [202: Мысль/Сосуд](./202_idea_vessel.md)
> - [203: Мысль/Процесс](./203_idea_process.md)

## Способы запуска Вызовов

Когда ИИ решает сделать несколько дел одновременно, ты можешь выбрать, как их запустить. Это даёт тебе большой контроль.

```typescript
// Запустить один-единственный Вызов
const result = await Tool(call);

// Запустить все и дождаться, пока каждый из них завершится
const results = await Tool.all(calls);

// Запустить все и остановиться, как только первый завершится успешно
const result = await Tool.any(calls);

// Запустить все и остановиться, как только первый завершится (неважно, успешно или нет)
const result = await Tool.race(calls);
```

Эти разные подходы позволяют тебе:

- **Точно всё контролировать**: Выполнять задачи одну за другой, с особыми шагами между ними.
- **Работать пачками**: Запускать много независимых задач одновременно, чтобы быть суперэффективным.
- **Быть быстрым**: Останавливаться, как только получен хороший результат (`.any()`) или как только одна из задач завершится (`.race()`).
- **Быть в безопасности**: Убедиться, что вся группа задач будет выполнена успешно, или не выполнена вовсе (`.all()`), что отлично подходит для действий, которые должны происходить как единое целое.
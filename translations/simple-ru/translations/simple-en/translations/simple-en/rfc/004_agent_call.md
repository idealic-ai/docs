# 004: Агент/Вызов

> **Вызов:** Представь, что **Инструмент** — это кнопка на пульте, например, «Переключить канал». А **Вызов** — это когда ты нажимаешь эту кнопку и вводишь конкретный номер, например, «5». Это настоящая команда, чтобы *сделать что-то прямо сейчас*.
>
> — [Глоссарий](./000_glossary.md)

> Sidenote:
>
> - Требует:
>   - [103: Концепция/Идеатор](./103_concept_ideator.md)
> - Открывает возможности для:
>   - [008: Агент/Импорты](./008_agent_imports.md)
>   - [011: Агент/Инстансинг](./011_agent_instancing.md)
>   - [202: Идея/Контейнер](./202_idea_vessel.md)
>   - [203: Идея/Процесс](./203_idea_process.md)

**[Идея](./101_concept_idea.md)** — это как рецепт, в котором написано, как что-то сделать. **[Инструмент](./002_agent_tool.md)** превращает этот рецепт в работающую кнопку, которую может использовать ИИ. Это руководство посвящено **Вызову** — тому, что происходит, когда ИИ нажимает на эту кнопку.

**Вызов** — это конкретная, окончательная команда для Инструмента, где заполнены все детали. Если Инструмент говорит тебе, *что ты можешь сделать*, то Вызов — это *само действие*.

## Путь от Идеи к Вызову

Представь, что ты печёшь торт. Вот как это работает:

1.  **Идея**: Это твой рецепт. В нём есть все инструкции для выпечки торта.
2.  **Инструмент**: Рецепт используется для создания кнопки «Испечь торт» на умной духовке. Теперь духовка знает, какие ингредиенты ей нужны (например, мука, сахар и яйца) и что она может делать.
3.  **Вызов**: Это когда ты говоришь духовке: «Испеки торт, используя шоколад *именно этой марки*, в течение *30 минут* при температуре *180 градусов*». Ты заполнил все пробелы и дал конкретную команду. Эта единственная команда и есть Вызов.

Главное правило простое: **любую Идею можно превратить в Инструмент, а любой Инструмент можно использовать в Вызове.**

Чтобы узнать больше о том, как «список покупок» из Идеи становится настройками для Инструмента, загляни в **[007: Агент/Ввод](./007_agent_input.md)**.

## Переключатели: Область и Метод

Когда ты делаешь Вызов, ты можешь изменить, как он работает, с помощью двух «переключателей»: **Области** (где он выполняется) и **Метода** (как он выполняется). Система понимает, как ты настроил переключатели, по специальным инструкциям в настройках Инструмента (`_module`, `_activity`, `_output`).

### Два главных переключателя

1.  **Область (Где он выполняется? Здесь или у специалиста?)**
    Область определяет, будет ли ИИ делать работу сам или передаст её кому-то другому.
    - **Здесь (Встроенная область)**: Это вариант по умолчанию. ИИ выполняет задачу сам. Это как если бы шеф-повар нарезал овощи на своём рабочем месте.
    - **Специалист (Модульная область)**: Используется, когда ты видишь инструкцию `_module`. Это как если бы шеф-повар отдал заказ пекарю в другой части кухни. Задача отправляется эксперту.

2.  **Метод (Как он выполняется? По рецепту или творчески?)**
    Метод определяет, будет ли задача следовать точным шагам или ИИ использует свой «мозг», чтобы найти решение.
    - **Рецепт (Явный метод)**: Используется, когда ты видишь инструкцию `_activity`. Задача выполняется по очень конкретным шагам, как робот, следующий своей программе. Никаких догадок.
    - **Творчество (Скрытый метод)**: Это вариант по умолчанию. ИИ просят самому придумать лучший способ что-то сделать. Для этого часто нужна инструкция `_output`, которая похожа на просьбу к шеф-повару: «Мне не важно, как ты это сделаешь, просто приготовь мне вкусный суп».

Ты можешь смешивать эти переключатели, чтобы выполнять работу самыми разными способами. Чтобы увидеть, как это работает, загляни в **[008: Агент/Импорты](./008_agent_imports.md)**.

## Строим большие вещи с помощью Вызовов

`Вызов` — это как один кубик Lego. Сам по себе он — простая команда. Но ты можешь соединить много Вызовов вместе, чтобы построить что-то гораздо большее и сложное, например, целый **[Контейнер](./202_idea_vessel.md)** или **[Процесс](./203_idea_process.md)**.

`Контейнер` — это как полный набор Lego в коробке. В нём есть всё для одного большого проекта: инструкция по сборке (`context`), список всех кубиков, которые можно использовать (`schema` из `Инструментов`), и то, что ИИ в итоге решает построить из них (`solution`, то есть просто список `Вызовов`, которые нужно выполнить).

> Sidenote:
>
> - [202: Идея/Контейнер](./202_idea_vessel.md)
> - [203: Идея/Процесс](./203_idea_process.md)

## Разные способы запускать Вызовы

Когда ИИ решает сделать сразу кучу Вызовов, ты можешь выбрать, как именно он будет их выполнять.

```typescript
// Сделать только один Вызов
const result = await Tool(call);

// Сделать их все. Не продолжать, пока каждый не будет завершён.
const results = await Tool.all(calls);

// Попробовать их все. Дать мне результат первого, который сработает.
const result = await Tool.any(calls);

// Это гонка! Запустить их все и дать мне результат самого первого, который финиширует, неважно, успешно или нет.
const result = await Tool.race(calls);
```

Эти разные способы позволяют тебе:

- **Идти шаг за шагом**: Обрабатывать каждый Вызов по одному, решая, что делать дальше.
- **Сделать кучу всего сразу**: Запускать много разных Вызовов одновременно, чтобы работать быстрее.
- **Найти первый ответ**: Останавливаться, как только найдётся один работающий Вызов (`.any()`) или как только завершится самый первый (`.race()`).
- **Победить командой**: Убедиться, что вся группа Вызовов успешно завершилась, что важно, когда они зависят друг от друга (`.all()`).
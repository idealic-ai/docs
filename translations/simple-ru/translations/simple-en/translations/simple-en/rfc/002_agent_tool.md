# 002: Агент/Инструмент

> **Инструмент**: Представь, что Инструмент — это рецепт или чертёж суперспособности, которую может использовать ИИ. Он говорит ИИ: «Вот особый навык, который ты можешь применить, а вот ингредиенты, которые для этого нужны». ИИ может воспользоваться этой способностью, заполнив рецепт нужной информацией. Это называется `Вызов`. Затем `Вызов` выполняется либо собственным «мозгом» ИИ, либо настоящей компьютерной программой.

> Sidenote: - Чтобы понять это, сначала прочитай: [001: Агент/Запрос](./001_agent_request.md)
> - Это хорошо сочетается с: [003: Агент/Действие](./003_agent_activity.md)

Этот документ объясняет, что такое Инструмент — основной строительный блок, который позволяет ИИ (называемому Агентом) понимать и использовать свои способности.

## Что такое Инструменты?

**Инструменты — это самая важная часть** того, как ИИ действует. Они дают ИИ суперважный навык: **выбирать правильное действие в нужный момент**. Это позволяет ИИ посмотреть на проблему и придумать лучший способ её решения.

Что Инструменты дают ИИ:

- **Чёткие инструкции**: Они как чертежи, которые ИИ может легко прочитать, чтобы понять свои способности.
- **Никаких сюрпризов**: Они устанавливают ясные правила о том, какая информация поступает на вход и что получается на выходе, так что ты всегда знаешь, чего ожидать.
- **Кубики LEGO**: Ты можешь соединять разные Инструменты вместе, чтобы помочь ИИ выполнять более крупные и сложные задачи.
- **Понятно для ИИ**: Чертежи написаны особым образом, чтобы «мозг» ИИ (его языковая модель) мог их понять и выбрать нужный.

Когда ИИ выбирает чертёж Инструмента и вписывает все детали, он создаёт **Вызов (Call)**. Вызов — это как заполненная форма заказа, готовая к отправке для выполнения работы. (Больше о том, как работает Вызов, можно узнать в документе [004: Агент/Вызов](./004_agent_call.md)).

> **Примечание**: Ты можешь попросить ИИ сделать что-то простое, просто сказав ему, что ты хочешь. Но если нужно, чтобы ИИ сам выбирал между разными действиями, тебе понадобятся Инструменты. Чтобы увидеть, как простой запрос превращается в полноценный Инструмент, загляни в документ [007: Агент/Ввод](./007_agent_input.md).

## Когда стоит использовать Инструменты?

Используй Инструменты, когда хочешь, чтобы ИИ:

- **Сам решал, что делать в конкретный момент**, основываясь на происходящем.
- **Выбирал из множества разных способностей** для выполнения большой задачи.
- **Использовал разные версии одной и той же способности** (например, выбирал между поиском в Google или другой поисковой системе).
- **Сочетал свой собственный ум с чёткими инструкциями**, чтобы принимать лучшие решения.

## Как работает система Инструментов

### Главная идея: Чертёж — это просто план

Вся система построена на одной простой идее: **Инструменты — это просто чертежи**. Они описывают, *что* делает способность, но не *как* это происходит. Сама работа выполняется либо воображением ИИ, либо отдельной программой под названием **[Действие (Activity)](./003_agent_activity.md)**.

Чертёж Инструмента говорит тебе:

- **Что он делает** (короткое и простое описание).
- **Что ему нужно** (ингредиенты, или входные данные).
  >Sidenote: Про эти дополнительные настройки:
  >
  > - `_instance`: Об этой специальной настройке ты можешь прочитать в [011: Агент/Инстансинг](./011_agent_instancing.md).
  > - `_module`: Загляни в [009: Агент/Модуль](./009_agent_module.md), чтобы узнать, что это такое.
- **Что ты получишь** (конечный результат, называемый `_output`).
- **Как он называется** (его имя, `_tool`).
- **Как это делается** (часть `_activity`, о которой можно прочитать в [003: Агент/Действие](./003_agent_activity.md)).

### Специальные метки на чертеже

В чертежах Инструментов используются специальные метки, которые начинаются с нижнего подчёркивания (`_`), чтобы давать команды системе:

- **\_tool**: Уникальное имя этого инструмента (обязательно).
- **\_activity**: Указывает на настоящую программу (`Activity`), которая может выполнить работу. Как это работает, можно узнать в [003: Агент/Действие](./003_agent_activity.md).
- **\_output**: Описывает, как должен выглядеть результат.
- **\_reasoningForCall**: Записка, в которой ИИ объясняет, *почему* он решил использовать именно этот инструмент.

Любое другое поле без нижнего подчёркивания — это обычный ингредиент, который нужен инструменту. Специальные метки с `_` всегда идут первыми, чтобы ИИ мог быстро увидеть важные инструкции.

### О чём заботится система

Система Инструментов берёт на себя всю фоновую работу:

- **Ведение списка всех чертежей** (регистрация инструментов).
- **Помощь ИИ в заполнении пробелов** в чертеже, используя уже имеющуюся информацию.
- **Решение, кто будет выполнять работу** («мозг» ИИ или отдельная программа).

Другие части системы занимаются такими вещами, как управление большими проектами и установка правил, как и когда что-то должно быть сделано.

## Описание Инструмента

Инструменты записываются в формате JSON Schema — это просто структурированный способ составить чертёж. Вот пример Инструмента, который может определить, является ли предложение весёлым, грустным или нейтральным. Этому инструменту не нужна отдельная программа, потому что ИИ может просто использовать своё собственное понимание слов для поиска ответа.

```typescript
Tool.register('sentimentAnalysis', {
  type: 'object',
  description: 'Analyzes text sentiment',
  properties: {
    _tool: { type: 'string', const: 'sentimentAnalysis' },
    text: { type: 'string', description: 'Text to analyze' },
    _output: {
      type: 'object',
      properties: {
        sentiment: { type: 'string' },
        confidence: { type: 'number' },
      },
    },
  },
});
```

## Ящик с инструментами и Вызов

Один инструмент — это круто, но настоящая магия начинается, когда ты даёшь ИИ целый **Ящик с инструментами (Toolbox)**. Система показывает ИИ все доступные чертежи Инструментов одновременно. Это позволяет ИИ просмотреть все свои возможности и выбрать идеальный для конкретной задачи.

Когда ИИ выбирает Инструмент и заполняет необходимую информацию, он создаёт **Вызов (Call)**. Вызов — это окончательная, готовая к выполнению команда, которая отправляется на исполнение.

> Sidenote: Когда ИИ использует Инструмент, он создаёт **Вызов (Call)** — это и есть настоящая команда что-то сделать. Больше об этом можно узнать здесь: [004: Агент/Вызов](./004_agent_call.md).

## Два способа выполнить задачу

Сам по себе чертёж Инструмента — это просто план. Есть два способа заставить его что-то *сделать*. Первый способ мы называем **скрытым исполнением (latent execution)** — это заумное название для процесса, когда **ИИ просто сам придумывает ответ**. Это идеально подходит для задач, связанных с языком или идеями, например, для определения настроения предложения.

Но для действий, которые требуют связи с реальным миром — например, поиска в интернете или проверки календаря — Инструмент должен быть связан с настоящей компьютерной программой. Мы называем эту программу **Действием (Activity)**.

Отделение чертежа Инструмента от Действия, которое выполняет работу, — это очень важная идея. Это значит, что ИИ может думать о своих способностях, не беспокоясь о сложных деталях их работы. Это также означает, что мы можем изменить программу, которую использует инструмент, не меняя сам чертёж. Следующий документ, **[003: Агент/Действие](./003_agent_activity.md)**, объясняет, как Действия воплощают Инструменты в жизнь.
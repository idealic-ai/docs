# Акт 003: Агент/Действие

> **Действие (Activity):** Представь, что `Действие` — это настоящая работа, которая происходит «за кулисами» `Инструмента`. Если `Инструмент` — это кнопка с надписью «Проверить погоду», то `Действие` — это компьютерный код, который заходит на сайт погоды и узнаёт прогноз. `Действия` нужны для задач, которые ИИ не может просто вспомнить, например, проверить данные в реальном времени или связаться с другим сайтом. — [Глоссарий](./000_glossary.md)

>Sidenote: Эта статья продолжает тему, которую мы начали в [Акте 002: Агент/Инструмент](./002_agent_tool.md).

Этот документ объясняет, откуда `Инструменты` берут свою силу. `Инструмент` говорит, *что* может делать ИИ, а **`Действие`** — это настоящий код, который объясняет, *как* он это делает.

## Две книги рецептов

Чтобы всё было в порядке, система использует два отдельных списка, как меню и поваренную книгу в ресторане.

- **Реестр Инструментов**: Это меню, которое ты даёшь посетителям. В нём перечислены все возможности (`Инструменты`) и описано, что они делают (например, «Узнать погоду на сегодня»).
- **Реестр Действий**: Это секретная книга рецептов на кухне. В ней находятся пошаговые инструкции (`Действия`), как приготовить каждое блюдо из меню.

Разделять их очень удобно. Это значит, что ИИ может просто посмотреть на меню возможностей, не зная всех деталей каждого рецепта. А мы можем улучшить рецепт на кухне (например, использовать новый погодный сервис), не меняя меню, на которое все смотрят.

## Добавление рецепта в книгу

`Действие` сохраняется с именем, которое связывает его с `Инструментом` в меню.

```typescript
// Вот так мы добавляем рецепт (Действие) в поваренную книгу.
// Название 'weatherCheck' должно совпадать с названием Инструмента в меню.
Activity.register('weatherCheck', async call => {
  const data = await weatherAPI.get(call.location);
  return { temperature: data.temp, conditions: data.desc };
});
```

## Два способа получить ответ: вообразить или сделать

Когда ИИ нужно использовать `Инструмент`, он может получить результат двумя способами:

- **Вообразить ответ (скрытое исполнение)**: Это когда ИИ настолько умный, что уже знает ответ. Если ты спросишь его: «Кто был первым президентом?», ему не нужно ничего искать, он просто знает это из своей памяти. Этот способ используется по умолчанию, если нет реального «рецепта».
  >Sidenote: Хочешь узнать, что на самом деле значит «воображать» для искусственного интеллекта? Прочитай об этом здесь: [104: Концепция / Скрытое](./104_concept_latent.md)
- **Сделать настоящую работу (явное исполнение)**: Это когда система должна запустить настоящий код, чтобы найти ответ. Это как спросить счёт в баскетбольном матче, который идёт прямо сейчас — нужно проверить источник. Этот способ нужен для вещей, которые ИИ не может просто угадать, например, проверить сегодняшнюю погоду, найти заказ клиента или использовать сервис другого сайта.

## Как система решает, что делать

Система достаточно умна, чтобы самой понять, какой метод использовать. Она следует этим простым правилам:

1.  **Проверить особые указания**: Если у `Инструмента` есть специальная пометка «Всегда используй этот рецепт», система выполнит её в первую очередь.
2.  **Найти совпадение по имени**: Если особых указаний нет, система ищет рецепт с таким же именем, как у `Инструмента`. Если `Инструмент` называется «weatherCheck», она ищет рецепт с названием «weatherCheck». Если находит — использует его. Это самый частый способ.
3.  **Просто вообразить**: Если после первых двух шагов система так и не нашла рецепт, она просто воображает ответ. Это безопасный запасной план, чтобы ничего не сломалось.

Благодаря этому создавать что-то очень просто:

- Чтобы заставить `Инструмент` выполнять реальную работу, просто дай его коду **такое же имя**.
- Если ты создашь `Инструмент` без кода, ИИ безопасно обработает его, вообразив ответ.
- Если ты хочешь, чтобы несколько разных `Инструментов` использовали один и тот же рецепт, можно использовать Правило №1 и указать им на него.

## Почему это разделение так важно

Если бы мы смешали меню (`Инструмент`) и рецепты (`Действие`), получился бы полный беспорядок. Представь, что ты изменил рецепт на кухне, и тебе пришлось бы найти каждого клиента, который когда-либо заказывал это блюдо, чтобы рассказать ему об этом. Невозможно!

Разделяя их, мы получаем суперспособности:

- **Рецепты можно менять в любой момент**: Ты можешь обновить код, который проверяет погоду, а ИИ, использующий `Инструмент` «weatherCheck», даже этого не заметит. Он просто продолжит работать.
- **Можно тестировать новые идеи**: Ты можешь попросить ИИ вообразить ответ и одновременно запустить реальный код, а затем сравнить результаты, чтобы увидеть, какой лучше.
- **Можно безопасно внедрять изменения**: Ты можешь протестировать новый, экспериментальный рецепт, дав его лишь нескольким ИИ, в то время как все остальные будут использовать старый, проверенный.

## От знания к действию

Итак, мы разобрались, *какие* способности есть у ИИ (`Инструмент`) и *как* он выполняет задачи (`Действие`). Но это только подготовка сцены. Следующий шаг — понять, как система на самом деле управляет этими задачами, словно принимает заказ и отправляет его на кухню в правильном порядке.

Следующий документ, [Акт 004: Агент/Вызов](./004_agent_call.md), объясняет, как эти идеи воплощаются в жизнь.
# 002: Агент/Инструмент

> **Инструмент**: Думай об Инструменте как о рецепте для суперспособности, которую может использовать ИИ. В этом рецепте написано: «Вот что ты умеешь делать, и вот какие «ингредиенты» для этого нужны». ИИ берёт этот рецепт, добавляет нужные ингредиенты и получает готовую команду — это называется «Вызов». А потом этот «Вызов» выполняет либо сам ИИ своим «умом», либо специальная программа-помощник.

> Sidenote: - Требуется: [001: Агент/Запрос](./001_agent_request.md)
> - Хорошо сочетается с: [003: Агент/Действие](./003_agent_activity.md)

В этом документе мы разберёмся, что такое Инструмент — это как чертёж, который помогает ИИ (мы называем его Агентом) понять, какие у него есть способности и как ими пользоваться.

## Что такое Инструменты?

**Инструменты — это самое главное**, что помогает ИИ действовать. Они дают ему суперспособность: **выбирать правильный инструмент для работы в нужный момент**. Это позволяет ИИ думать и решать, что делать дальше.

Инструменты дают ИИ:

- **Простые рецепты**: Чертёжи, которые ИИ может прочитать, чтобы понять, что он умеет.
- **Чёткие правила игры**: Они устанавливают понятные правила для информации, которая входит и выходит.
- **Кубики LEGO**: Ты можешь соединять разные Инструменты, чтобы ИИ мог выполнять более сложные задачи.
- **Понятны для ИИ**: Чертёжи написаны на языке, который «мозг» ИИ (LLM) может понять и на основе которого может сделать выбор.

Когда ИИ берёт чертёж Инструмента и вписывает туда все детали, он создаёт **Вызов**. «Вызов» — это как заполненный бланк заказа, готовый к отправке. (Больше о том, как работает «Вызов», ты можешь прочитать в документе [004: Агент/Вызов](./004_agent_call.md)).

> **Примечание**: Ты можешь попросить ИИ сделать что-то простое, дав ему общую идею. Но если ты хочешь, чтобы ИИ сам выбирал между разными действиями, тебе понадобятся Инструменты. Чтобы увидеть, как простая идея превращается в Инструмент, посмотри [007: Агент/Ввод](./007_agent_input.md).

## Когда нужны Инструменты?

Используй Инструменты, когда хочешь, чтобы ИИ:

- **Сам выбирал, что делать**, в зависимости от ситуации.
- **Выбирал из множества разных способностей**, чтобы решить задачу.
- **Использовал разные версии одной и той же способности** (например, искал в Google или в DuckDuckGo).
- **Сочетал собственное мышление с чёткими инструкциями**, чтобы принимать решения.

## Как работает система Инструментов

### Главная идея: Чертёж — это просто план

Вся система построена на одной простой идее: **Инструменты — это просто чертежи**. Они описывают, *что* делает способность, но не говорят, *как* именно. Настоящую работу делает либо сам ИИ своим «воображением», либо отдельная программа-помощник, которая называется **[Действие](./003_agent_activity.md)**.

Чертёж Инструмента говорит нам:

- **Что он делает** (простое описание).
- **Что ему нужно** («ингредиенты», или входная информация).
  >Sidenote: Об этих дополнительных настройках:
  >
  > - `_instance`: Ты можешь узнать об этом в [011: Агент/Инстансинг](./011_agent_instancing.md).
  > - `_module`: Для дополнительной информации смотри [009: Агент/Модуль](./009_agent_module.md).
- **Что он создаёт** (какой результат получится, или `_output`).
- **Как он называется** (его имя, или `_tool`).
- **Как это делается** (поле `_activity`, о котором ты можешь прочитать в [003: Агент/Действие](./003_agent_activity.md)).

### Специальные метки в чертеже

В чертежах Инструментов есть специальные метки (все они начинаются с подчёркивания `_`), чтобы давать системе команды:

- **_tool**: Уникальное имя этого инструмента, как кличка (обязательно).
- **_activity**: Указывает на специальную программу-помощника (`Действие`), которая сделает работу. Ты можешь узнать, как это работает, в [003: Агент/Действие](./003_agent_activity.md).
- **_output**: Описывает, как должен выглядеть конечный результат.
- **_reasoningForCall**: Записка, которую ИИ пишет сам себе, чтобы объяснить, *почему* он решил использовать именно этот инструмент.

Любое другое поле без `_` — это обычный «ингредиент», который нужен инструменту. Специальные метки всегда идут первыми, чтобы ИИ сразу видел самые важные инструкции.

### О чём заботится система

Система Инструментов отвечает за то, чтобы:

- **Хранить каталог всех «рецептов»** (регистрировать инструменты).
- **Помогать ИИ правильно заполнить «рецепт»**, используя ту информацию, что у него есть.
- **Решать, кто будет выполнять работу**: сам ИИ своим «умом» или программа-помощник.

Другие части системы занимаются такими вещами, как управление рабочими процессами и правилами, как и когда выполняются действия.

## Определение Инструмента

Инструменты описываются с помощью специального формата под названием JSON Schema. Вот пример Инструмента, который может определить настроение предложения — радостное оно, грустное или нейтральное. Этому инструменту не нужна программа-помощник, потому что ИИ может справиться с этим сам, используя своё понимание языка.

```typescript
Tool.register('sentimentAnalysis', {
  type: 'object',
  description: 'Анализирует тональность текста',
  properties: {
    _tool: { type: 'string', const: 'sentimentAnalysis' },
    text: { type: 'string', description: 'Текст для анализа' },
    _output: {
      type: 'object',
      properties: {
        sentiment: { type: 'string' },
        confidence: { type: 'number' },
      },
    },
  },
});
```

## Набор инструментов и Вызов

Один инструмент — это хорошо, но настоящее волшебство начинается, когда у ИИ есть целый ящик с инструментами, или набор. Система показывает ИИ все доступные чертежи Инструментов сразу. Это позволяет ИИ посмотреть на все свои возможности и выбрать лучшую для конкретной задачи.

Когда ИИ выбирает Инструмент и заполняет нужную информацию, он создаёт **Вызов**. «Вызов» — это готовая к выполнению команда, которая передаётся дальше для исполнения.

> Sidenote: Когда ИИ выбирает «рецепт» (Инструмент) и добавляет в него «ингредиенты», он создаёт **Вызов** — готовую команду к действию. Подробнее об этом можно прочитать здесь: [004: Агент/Вызов](./004_agent_call.md).
>

## Два способа выполнять задачи

Сам по себе чертёж Инструмента — это просто план. Заставить его что-то делать можно двумя способами. Первый способ мы называем **скрытое исполнение** — это когда ИИ использует своё воображение и знания, чтобы найти ответ. Это отлично подходит для задач, связанных с языком или идеями, как будто ты решаешь задачку в уме.

Но для действий, которые требуют работы с реальным миром — например, поиска в интернете или проверки чего-то в базе данных — Инструмент должен быть связан с настоящей компьютерной программой. Эту программу мы называем **Действие**. Это как использовать калькулятор для сложного примера.

Разделение чертежа (Инструмента) и того, что выполняет работу (Действия), — это очень важная идея. Это значит, что ИИ может думать о своих способностях, не отвлекаясь на сложные детали их работы. А мы можем поменять программу-помощника, не меняя сам чертёж. Следующий документ, **[003: Агент/Действие](./003_agent_activity.md)**, объясняет, как Действия помогают Инструментам работать.
# 004: Агент/Команда к Действию

> **Команда (Вызов):** Это как взять рецепт (`Инструмент`), отмерить все ингредиенты (`параметры`) и быть готовым поставить блюдо в духовку. Это инструкция для выполнения конкретной задачи: _что именно нужно сделать сейчас_.
> 
> — [Глоссарий](./000_glossary.md)

> Sidenote:
>
> - Требует:
>   - [103: Концепция/Идеатор](./103_concept_ideator.md)
> - Открывает возможности для:
>   - [008: Агент/Импорты](./008_agent_imports.md)
>   - [011: Агент/Инстансинг](./011_agent_instancing.md)
>   - [202: Идея/Контейнер](./202_idea_vessel.md)
>   - [203: Идея/Процесс](./203_idea_process.md)

Представь, что у нас есть **Идеи** — это как крутые задумки или рецепты в поваренной книге. Потом мы превратили их в **Инструменты** — это понятные карточки с рецептами, которые говорят, *что можно* приготовить.

Этот документ рассказывает о **Командах к Действию (или Вызовах)**. Это следующий шаг. Если Инструмент — это рецепт, то Команда — это когда мы берём этот рецепт, добавляем конкретные детали (например, «сделать шоколадным» или «добавить посыпку») и говорим: «Пора готовить!».

**Команда** — это Инструмент, полностью готовый к работе. Если Инструменты говорят, *что можно сделать*, то Команды определяют, *как именно это будет сделано*.

## Путь от Идеи до Команды

Давай проследим, как мы приходим к выполнению задачи:

1.  **Идея**: Сначала появляется крутая мысль, например, «как испечь идеальный яблочный пирог». Это полный рецепт со всеми секретами.
2.  **Инструмент**: Мы превращаем эту Идею в простую и понятную инструкцию, доступную для нашего умного помощника (агента). Теперь у него есть инструмент под названием `испечьПирог`. Подробнее об этом можно почитать в [002: Агент/Инструмент](./002_agent_tool.md).
3.  **Команда**: Когда помощник решает испечь пирог, он создаёт **Команду**, уточняя все детали: `испечьПирог(фрукты: 'яблоки', размер: 'большой')`. Это уже не просто рецепт, а конкретное задание, готовое к выполнению.

Главное правило: **любую Идею можно превратить в Инструмент, который затем можно выполнить как Команду.**

## Как управлять выполнением: Где и Как

Когда мы даём Команду, мы можем указать две важные вещи: **Где** она будет выполняться и **Как**.

### 1. Где? (Область выполнения или Scope)

Это определяет, кто будет выполнять задачу.

*   **Прямо здесь (Встроенный Scope)**: Это как если бы ты сам готовил пирог на своей кухне. Помощник выполняет команду сам, в своём текущем окружении. Это стандартный способ.
*   **В специальном месте (Модульный Scope)**: Это как заказать пирог в пекарне. Помощник передаёт задание другому, специализированному модулю, который делает всю работу и возвращает результат.

### 2. Как? (Метод выполнения или Method)

Это определяет, как будет получен результат.

*   **По чёткой инструкции (Явный Method)**: Это как если бы робот-повар готовил пирог по заранее написанной программе. Он будет действовать строго по шагам, и результат всегда будет одинаковым. Это предсказуемый способ, основанный на коде.
*   **Творчески (Скрытый Method)**: Это как если бы ты дал ингредиенты шеф-повару (искусственному интеллекту) и сказал: «Удиви меня!». Он сам придумает, как лучше приготовить, и результат будет сгенерирован на лету. Это более гибкий, творческий способ.

Эти два параметра можно смешивать. Например, можно попросить робота-повара испечь пирог на своей кухне, а можно отправить творческое задание шеф-повару в его ресторан. Как всё это сочетается, описано в **[008: Агент/Импорты](./008_agent_imports.md)**.

## Создание больших планов из маленьких команд

Одна **Команда** — это как один маленький шаг. Но из этих шагов можно строить целые планы и большие проекты.

Например, одна команда может запустить что-то большое, вроде **«Контейнера» Идей**. Представь, что «Контейнер» — это целый проект, например, «Организовать вечеринку». Этот проект содержит в себе всё: список гостей, бюджет, а главное — список маленьких команд, которые нужно выполнить: `заказатьПиццу`, `купитьШарики`, `отправитьПриглашения`. Так одна большая Команда запускает множество маленьких.

> Sidenote:
>
> - [202: Идея/Контейнер](./202_idea_vessel.md)
> - [203: Идея/Процесс](./203_idea_process.md)

## Стратегии выполнения команд

Когда у помощника есть сразу несколько команд, он может выполнять их по-разному, в зависимости от ситуации. Представь, что ты управляешь командой поваров.

```typescript
// Выполнить одну команду
const result = await Tool(call);

// Дать каждому повару по заданию и дождаться, пока ВСЕ закончат
const results = await Tool.all(calls);

// Дать нескольким поварам задание и взять результат от ПЕРВОГО, кто успешно справится
const result = await Tool.any(calls);

// Устроить гонку: дать нескольким поварам задание и взять результат от того, кто закончит ПЕРВЫМ (неважно, успешно или нет)
const result = await Tool.race(calls);
```

Такие стратегии позволяют:

*   **Действовать по шагам**: Выполнять команды одну за другой, думая над следующим шагом.
*   **Работать параллельно**: Делать много дел одновременно, чтобы было быстрее.
*   **Получать быстрый результат**: Не ждать всех, а брать первый удачный результат и двигаться дальше.
*   **Быть уверенным в успехе**: Гарантировать, что все части большого задания будут выполнены успешно.
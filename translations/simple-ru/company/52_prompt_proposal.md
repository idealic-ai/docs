# 52: Запрос/Предложение

> [!DEFINITION] Генератор Предложений
> Это как умная машина, которая берёт твои сырые мысли (заметки, диктовку, переписки) и превращает их в чёткий и понятный документ — Предложение.
>
> Sidenote:
> - Смотри документ :term[21: Компания/Предложение]{href="./21_document_proposal.md"}{canonical="21: Company/Proposal"}, чтобы понять, что это такое.
> - Цель: превратить «поток мыслей» в понятную стратегию.

## Неизменные правила

**ЭТИ ПРАВИЛА НУЖНО СТРОГО СОБЛЮДАТЬ:**

1.  **Соблюдение формата:** Результат ДОЛЖЕН точно соответствовать структуре, описанной в документе [21: Компания/Предложение](./21_document_proposal.md).
2.  **Выравнивание стиля:** Немного сохрани стиль автора, но главное — **Ясность** и **Уверенность** (как в документе [50: Запрос/Правда](./50_prompt_truth.md)). Убери всю «воду», сомнения и лишние эмоции.
3.  **Независимость от темы:** Используй правильные слова для каждой темы. Например, для Дизайна — «интерфейс, путь пользователя», для Кода — «архитектура, контракт», для Бизнеса — «выгода, затраты».
4.  **Что НЕ делается:** Ты ДОЛЖЕН догадаться или прямо сказать, что делать **НЕ** нужно. Это «анти-область».
5.  **Другие варианты:** В разделе «Варианты» ты ДОЛЖЕН показать не только выбранный путь, но и те, от которых отказались, и объяснить, _почему_ от них отказались.
6.  **Без кода:** Предложения — это про **Идею** и **Замысел**. НЕ добавляй в них код. Если нужно объяснить технические детали, используй общие схемы или диаграммы.

## Протокол для Агента

**ОГРАНИЧЕНИЕ:** Тебе разрешено делать ТОЛЬКО следующие внешние запросы:

1.  **HTTP GET** через curl на `https://idealic.academy/raw/en/company/02_process.md`
2.  **HTTP GET** через curl на `https://idealic.academy/raw/en/company/50_prompt_truth.md`

**Шаг 1: Загрузи нужные документы (Обязательно)**
Ты **ОБЯЗАН** загрузить эти документы, чтобы понять, как у нас всё работает и как нужно писать, прежде чем создавать Предложение.

> [!IMPORTANT] Раздельные запросы
> Ты должен загружать каждый документ в **отдельном** блоке. Так ты точно получишь полные версии файлов, и ничего не обрежется.

```bash
# 1. Процесс и Правда (Основа)
curl https://idealic.academy/raw/en/company/02_process.md
```

```bash
curl https://idealic.academy/raw/en/company/50_prompt_truth.md
```

```bash
# 2. Определения артефактов (Контекст)
curl https://idealic.academy/raw/en/company/20_document_spec.md
```

```bash
curl https://idealic.academy/raw/en/company/21_document_proposal.md
```

```bash
curl https://idealic.academy/raw/en/company/22_document_alignment.md
```

### 1. Анализ входных данных

**Схема входных данных:**

```json
{
  "type": "object",
  "properties": {
    "context": {
      "type": "string",
      "description": "Сырой текст, диктовка или переписка с мыслями пользователя."
    },
    "author": {
      "type": "string",
      "description": "Имя автора предложения (необязательно).",
      "default": "Пользователь"
    },
    "domain": {
      "type": "string",
      "enum": ["Дизайн", "Разработка", "Процесс", "Бизнес"],
      "description": "Главная тема предложения. Если не указана, нужно угадать по тексту."
    }
  },
  "required": ["context"]
}
```

**Шаги анализа:**

1.  **Найди поворотный момент:** Найди фразу вроде: «Мы думали X, но узнали Y». Это **Контекст**.
2.  **Определи боль:** Что именно сломано? Это **Проблема**.
3.  **Опиши изменение:** Какое конкретное действие предлагается? Это **Решение**.
4.  **Найди отвергнутые идеи:** Какие ещё идеи упоминались, но от них отказались? Это **Варианты**.

### 2. Создание документа

Создай markdown-файл с названием `{ГГГГ-ММ-ДД}_proposal_{название-темы}.md`.

#### Раздел 1: Заголовок

```markdown
# Предложение: {Название инициативы}

- **Статус:** Черновик
- **Автор:** {Автор}
- **Дата:** {Сегодня}
- **Тема:** {Определённая тема}

> [!NOTE] Источник идеи
> Создано из сырых мыслей с помощью [52: Запрос/Предложение](./52_prompt_proposal.md).
```

#### Раздел 2: Контекст (Как всё развивалось)

_Инструкция: Опиши предысторию. Почему мы вообще об этом говорим?_

- **Шаблон:** «Мы думали X, но узнали Y, поэтому должны сделать Z».

#### Раздел 3: Проблема (Что послужило толчком)

_Инструкция: Говори конкретно. Используй списки._

- **Проблема:** Что именно сломано?
- **Почему сейчас:** Цена бездействия.

#### Раздел 4: Область работы (Договор)

_Инструкция: Обозначь границы._

- **Что не меняется:** Какие вещи должны остаться прежними?
- **Чего мы НЕ делаем:** Что мы точно не будем трогать?
- **Сравнение:** Таблица «Как сейчас» и «Как будет».

#### Раздел 5: Намерения (Отдельные изменения)

_Инструкция: Разбей решение на маленькие шаги. Это СЕРДЦЕ предложения._

- **Структура для каждого шага:**
  - **Название**
  - **Тип** (Исправление бага/Новая фича/и т.д.)
  - **Где меняем** (Файл/Модуль)
  - **Зачем**
  - **Логика/Различия** (Только общая идея)

#### Раздел 6: Схема (По желанию)

_Инструкция: Рекомендуется, если процесс сложный. Используй Mermaid._

#### Раздел 7: Примеры использования (По желанию)

_Инструкция: Покажи, как люди будут пользоваться новой системой._

#### Раздел 8: Безопасность и риски (По желанию)

_Инструкция: Риски, как их избежать, и что должно остаться неизменным._

#### Раздел 9: Критерии завершения

_Инструкция: Список дел, чтобы понять, что работа закончена._

#### Раздел 10: Рассмотренные варианты

_Инструкция: Перечисли 1-2 других варианта, от которых отказались, и объясни почему._

### 3. Финальная проверка

1.  **Проверь тон:** Текст должен звучать профессионально, но не как робот. Пиши от первого лица.
2.  **Проверь ссылки:** Убедись, что все внутренние ссылки на другие документы компании работают правильно.

## Приложение: Применение Согласования

**Когда использовать:** Когда пользователь просит «Применить Согласование к Предложению» или даёт Документ о Согласовании, чтобы обновить Предложение.

**Почему это нужно:**
[Документ о Согласовании](./22_document_alignment.md) — это общее мнение команды после обсуждения. Он временный. [Предложение](./21_document_proposal.md) нужно обновить, чтобы оно отражало это общее мнение и оставалось главным источником правды о том, что мы хотим сделать.

**Инструкции (Полуавтоматический режим):**

1.  **Фаза 1: Планирование (С тобой):**
    - **Шаг 1:** Прочитай Документ о Согласовании и выдели все **Идеи**.
    - **Шаг 2:** Покажи пользователю **План действий**.
      - Перечисли все Идеи, которые нужно применить.
      - Коротко объясни, _куда_ в Предложении ты их добавишь.
    - **Шаг 3:** Сделай паузу и спроси у пользователя разрешения продолжать.

2.  **Фаза 2: Выполнение (По шагам):**
    - **Цикл:** Для КАЖДОЙ Идеи из плана:
      1.  **Объясни:** «Применяю Идею №{N}: {Название}...»
      2.  **Покажи:** Покажи, какое именно изменение ты собираешься внести.
      3.  **Спроси:** Спроси пользователя: «Применить это изменение?»
      4.  **Сделай:** Если он согласится, измени файл.
      5.  **Повторяй**, пока все идеи не будут применены.

3.  **Фаза 3: Уборка:**
    - Когда все идеи применены, проверь, что документ читается логично.
    - Убери все «Открытые вопросы», на которые теперь есть ответы.

**Как вносить изменения:**

- **Если идею отклонили:**
  - Если команда (в Согласовании) отвергла первоначальную идею автора:
    1.  Перемести старый текст из раздела **Предлагаемое решение** в **Рассмотренные варианты (отклонено)**.
    2.  Напиши _новый_, согласованный подход в разделе **Предлагаемое решение**.
    3.  Добавь объяснение из Согласования в поле «Почему отклонено».
- **Если появились новые ограничения:**
  - Если в Согласовании появились новые правила (например, «Должно работать на мобильных»), добавь их в раздел **Область работы** или **Проблема**.

**Цель:** Итоговое Предложение должно выглядеть так, будто его сразу написали таким — уверенным, ясным и согласованным.
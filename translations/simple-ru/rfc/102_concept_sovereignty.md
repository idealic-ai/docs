# 102: Концепция/Суверенитет

> Sidenote:
>
> - Требует:
>   - [101: Концепция/Идея](./101_concept_idea.md)
>   - [103: Концепция/Идеатор](./103_concept_ideator.md)
> - Позволяет: Практическое использование всей системы.

## 1. Введение

Этот документ объясняет правила «Суверенитета». Представь, что это шкала, которая показывает, насколько ты независим как творец в нашей системе. Здесь описана многоуровневая архитектура, похожая на этажи в здании, где хранятся и работают твои проекты. Ты можешь выбрать, на каком «этаже» тебе удобнее: использовать готовые инструменты, которые мы предоставляем, или построить всё самому, став полностью независимым.

Эта модель — мостик, который превращает твой абстрактный чертёж (`Ideator`) в настоящий, работающий сервис в интернете.

## 2. Многоуровневая Архитектура

Наша система состоит из пяти уровней (1-5), которые строятся на фундаменте под названием **Децентрализованная Идентичность** (мы говорили о ней в документе [101: Концепция/Идея](./101_concept_idea.md)). Эта структура позволяет тебе участвовать в системе так, как тебе удобно — от простого создания уникального имени для своей идеи до запуска полноценного веб-сервиса.

Думай об этом как о шкале независимости. На одном конце — готовый сервис, где всё сделано за тебя для твоего удобства. На другом — **полный суверенитет**: ты используешь свой собственный сайт (домен) и сам запускаешь все сервисы, становясь сам себе провайдером. Уровни между ними — это просто ступеньки, которые помогают тебе перейти от одного состояния к другому, если ты захочешь.

### Уровень 1: Управляемое Хранилище

Этот уровень даёт тебе простое и быстрое место для хранения файла с описанием твоего Идеатора.

- **Как это работает:** Чтобы тебе было легко начать, мы предлагаем хранить файл твоего Идеатора в нашем облачном хранилище (похожем на Google Drive или Dropbox). Мы создадим для тебя специальную «табличку» в интернете (`TXT` запись), которая будет указывать на этот файл. В любой момент ты можешь переместить свой файл в другое место — например, на свой собственный сервер или в децентрализованную сеть IPFS — и просто обновить «табличку», чтобы она указывала на новый адрес.
- **Цель:** Избавить тебя от необходимости искать хостинг для файлов, чтобы ты мог сразу приступить к творчеству.

---

### Уровень 2: Создание Веб-страницы «на лету»

Этот уровень превращает твой Идеатор в то, что люди могут увидеть и использовать — в обычную веб-страницу, которой не нужен постоянно работающий сервер.

- **Как это работает:** Представь, что у нас есть универсальный «шаблон» веб-страницы. Когда кто-то заходит на сайт твоего Идеатора, этот шаблон загружается. Затем небольшой скрипт (JavaScript) прямо в браузере пользователя спрашивает у интернета: «А где лежит файл с описанием этого Идеатора?». Он находит ту самую «табличку» (`TXT` запись) с Уровня 1, бежит по указанному адресу, скачивает файл твоего Идеатора и на основе него строит красивый интерфейс — кнопки, текст и картинки. Всё это происходит мгновенно, прямо перед глазами пользователя.
- **Цель:** Дать каждому Идеатору бесплатное и готовое к работе веб-приложение, чтобы начать было максимально просто.

---

### Уровень 3: Умный доступ для программ через CDN

Этот уровень делает так, чтобы другие программы и сервисы могли легко «читать» описание твоей Идеи.

- **Как это работает:** Мы используем быструю сеть доставки контента (CDN), которая работает как умный библиотекарь. Когда другая программа запрашивает (`GET`) твою Идею, CDN не просто отдаёт весь файл целиком. Он может выдать только нужную часть, например, только схему данных (например, `import { schema } from '...'`). Он также может приложить «инструкцию по применению» (файл с типами TypeScript), чтобы программисту было суперудобно с этим работать. Если же нужен весь файл целиком, его тоже можно получить.
- **Цель:** Предоставить другим разработчикам мощный и удобный способ программно работать с твоей Идеей, как с деталькой конструктора.

---

### Уровень 4: Публикация (`PUT`)

На этом уровне ты получаешь возможность публиковать и обновлять свою Идею с помощью программных команд.

- **Как это работает:** Этот уровень обрабатывает специальные запросы на обновление (`PUT`), которые защищены паролем. Одной командой ты можешь загрузить новую версию файла твоей Идеи и одновременно обновить все «таблички» и записи, чтобы новая версия сразу стала активной. Это происходит как единое целое, так что никто не увидит твою Идею в «полуразобранном» состоянии.
- **Цель:** Дать создателям простой и безопасный способ управлять жизненным циклом своих Идей.

---

### Уровень 5: Полноценное Выполнение (`POST`)

Это высший уровень функциональности, который превращает твой Идеатор в настоящий веб-сервис, способный выполнять команды.

- **Как это работает:** Этот уровень обрабатывает команды (`POST`), отправленные на адрес твоего Идеатора, и выполняет заложенную в нём логику. Это может работать на наших серверах (как «бессерверная функция») или на твоём собственном, если ты захочешь. Например, если твой Идеатор — это калькулятор, ты можешь отправить ему команду «2+2», и он вернёт ответ «4».
- **Цель:** Дать всю мощь облачных вычислений, позволяя любому человеку опубликовать полноценный микросервис, имея на руках лишь один файл с его описанием.

## 3. Описание API (команд)

Все команды отправляются на главный адрес (домен) твоей Идеи (`/`).

- **`GET /` (Посмотреть)**
  - С заголовком `Accept: text/html` (если заходит браузер с Уровня 2): Отдаёт веб-страницу для пользователя.
  - С заголовком `Accept: application/json` (если запрашивает программа с Уровня 3): Отдаёт исходный JSON-файл Идеи.
- **`PUT /` (Обновить, Уровень 4)**
  - Требует пароль (аутентификацию). Одна команда `PUT` загружает новый файл Идеи и мгновенно делает его активным, обновляя запись `code` в «табличке» (`TXT`).
- **`POST /` (Выполнить, Уровень 5)**
  - Требует пароль или разрешение. Запускает логику Идеатора.
  - В теле запроса передаются данные для обработки, например: `{"context": "Текст, который нужно обработать"}`.
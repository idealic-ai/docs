# 102: Концепция/Суверенитет

> Sidenote:
> 
> - Требует:
>   - [Протокол Идеи](./101_concept_idea.md)
>   - [Протокол: Идеаторы](./103_concept_ideator.md)
> - Позволяет: Практически запустить экосистему.

## 1. Введение

Представь, что ты хочешь построить что-то в интернете — например, свой маленький сервис или приложение. Этот документ описывает **Суверенитет** — это как набор правил, который даёт тебе выбор, насколько независимым ты хочешь быть. Ты можешь выбрать, хочешь ли ты, чтобы мы помогли тебе со всем разобраться (как если бы ты жил в отеле, где всё включено), или ты хочешь всё построить и настроить сам (как если бы ты строил свой собственный дом с нуля).

Эта идея — это мостик между просто задумкой в твоей голове (`Ideator`) и настоящим, работающим в интернете сервисом.

## 2. Многоуровневая архитектура

Наша система похожа на многоэтажный дом, где каждый этаж добавляет новые возможности. Всего таких этажей пять (1-5), и все они стоят на прочном фундаменте, который называется **Децентрализованная Идентификация** (о ней мы говорили в [Протоколе Идеи](./101_concept_idea.md)). Ты можешь «поселиться» на любом этаже, который тебе больше подходит.

Думай об этом как о шкале независимости. На одном конце — полный комфорт, когда мы всё делаем за тебя. На другом — **полный суверенитет**: ты используешь своё собственное доменное имя, сам размещаешь все файлы и сам за всё отвечаешь. Ты сам себе хозяин! Наши «этажи с удобствами» — это просто способ помочь тебе плавно перейти от одного состояния к другому, если ты захочешь.

### Уровень 1: Помогаем с хранением (Хостинг)

Этот уровень — самый простой способ начать. Мы даём тебе «ящик» для хранения твоего файла с идеей.

- **Как это работает:** Чтобы тебе не пришлось сразу искать, где хранить свой файл-инструкцию, мы предлагаем место в нашем облачном хранилище S3. А в специальной «адресной книге» интернета мы делаем запись (`TXT` record), которая указывает на твой файл. В любой момент ты можешь перенести свой файл в другое место (например, на свой сервер) и просто поменять адрес в этой записи.
- **Зачем это нужно:** Чтобы ты мог начать творить, не думая о скучных технических вещах вроде хостинга.

---

### Уровень 2: Волшебная веб-страничка

На этом уровне твоя идея становится понятной и видимой для всех людей, у кого есть браузер. И для этого не нужны мощные серверы!

- **Как это работает:** Мы предоставляем универсальную веб-страницу. Когда кто-то заходит на адрес твоей идеи, эта страничка с помощью магии (клиентского JavaScript) находит в «адресной книге» интернета твой файл-инструкцию, скачивает его и на лету превращает в красивый и понятный интерфейс. Вся работа происходит прямо в браузере у пользователя!
- **Зачем это нужно:** Чтобы бесплатно и мгновенно дать каждой идее своё «лицо» в интернете — своё собственное веб-приложение.

---

### Уровень 3: Супер-доставка для компьютеров (`GET`)

Этот уровень нужен, чтобы другие программы и сервисы могли легко «читать» твою идею и работать с ней.

- **Как это работает:** Мы используем сеть быстрой доставки (CDN). Когда другой компьютер делает `GET` запрос к твоей идее, эта сеть по-умному перенаправляет его и отдаёт специальный JavaScript-модуль. Это позволяет программистам легко импортировать только нужные части твоей идеи (например, `import { schema } from '...'`). Ответ также может содержать «инструкцию по применению» (`X-TypeScript-Types`), чтобы другие разработчики точно знали, как с этим работать. А если нужен весь файл целиком, его тоже можно получить.
- **Зачем это нужно:** Чтобы другие программы могли общаться с твоей идеей на профессиональном и понятном им языке.

---

### Уровень 4: Публикация и обновление (`PUT`)

Этот уровень даёт тебе возможность обновлять свою идею с помощью программ, а не вручную.

- **Как это работает:** Здесь мы обрабатываем специальные `PUT` запросы, которые защищены паролем. Одним таким запросом ты можешь загрузить новую версию своего файла-инструкции и мгновенно обновить все записи, чтобы новая версия сразу же стала активной. Всё происходит за один раз, без ошибок.
- **Зачем это нужно:** Чтобы у тебя был простой и безопасный способ управлять своей идеей и её версиями.

---

### Уровень 5: Полный запуск (`POST`)

Это самый крутой уровень! Здесь твоя идея превращается в настоящий, живой веб-сервис, который может выполнять команды.

- **Как это работает:** Этот уровень обрабатывает `POST` запросы. Когда приходит такой запрос, он запускает логику, описанную в твоём файле-инструкции. Это может быть наша «облачная магия» (бессерверная функция) или твой собственный сервер, который ты настроил сам.
- **Зачем это нужно:** Чтобы дать тебе всю мощь облачных технологий. Ты можешь опубликовать полноценный мини-сервис, имея на руках всего лишь один файл с описанием идеи!

## 3. Описание «пульта управления» (API)

Все команды отправляются на главный адрес твоей идеи (`/`). Вот основные кнопки на этом пульте:

- **`GET /`** (кнопка «Посмотреть»)
  - Если нажать её из браузера (с заголовком `Accept: text/html`): покажет ту самую волшебную веб-страничку (Уровень 2).
  - Если нажать её из другой программы (с заголовком `Accept: application/json`): отдаст сам файл-инструкцию в формате JSON (Уровень 3).
- **`PUT /`** (кнопка «Обновить», Уровень 4)
  - Требует секретный ключ (аутентификацию). Одним нажатием загружает новый файл и делает его активным.
- **`POST /`** (кнопка «Запустить!», Уровень 5)
  - Требует разрешения. Запускает твою идею, чтобы она выполнила какую-то работу.
  - В запросе нужно передать данные, с которыми идея будет работать, например: `{"context": "Текст, который нужно обработать"}`.
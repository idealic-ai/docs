# 302: Идеатор/Решатель

## 1. Введение

В этом документе мы поговорим о **Системе: Решатель**. Представь, что это такой волшебный помощник, который умеет собирать большие и сложные `Идеи` из маленьких кусочков. Он работает в паре с [Системой: Хранилище](./301_ideator_storage.md), где все эти кусочки лежат. Задача Решателя — взять одну большую `Идею`, в которой есть ссылки на другие `Идеи`, и превратить её в одну цельную, готовую к использованию инструкцию, где все ссылки уже заменены на настоящие детали.

Благодаря этому механизму, наши `Идеи` становятся как многоразовые детальки LEGO. Нам не нужно каждый раз придумывать колесо заново, мы можем просто сказать: «возьми вот то колесо, которое мы уже придумали». Это помогает нам не повторяться и строить очень сложные штуки из простых, проверенных частей.

## 2. Главная идея: Решение как Преобразователь Идей

Сервис Решатель — это как волшебный «Преобразователь Идей», который не запоминает, кто ты. Каждый раз, когда ты к нему обращаешься, он выполняет свою работу и тут же забывает о тебе, как автомат с газировкой. Он берёт твою `Идею` и делает её богаче, добавляя в неё все недостающие части, которые он находит по ссылкам.

- **Что даём на входе**: `Идею`, в инструкции (`schema`) или описании (`context`) которой есть одна или несколько ссылок на другие `Идеи`.
- **Что происходит**: Решатель читает твою `Идею` и находит все ссылки. По каждой ссылке он бежит в наше `Хранилище` (это как библиотека идей), находит нужную `Идею` и аккуратно вставляет её содержимое в твою первоначальную `Идею`.
- **Что получаем на выходе**: Новую, «наполненную» `Идею`, в которой все ссылки заменены их реальным содержимым. Теперь это одна большая, цельная инструкция, готовая к работе или дальнейшей обработке.

## 3. Ключевые особенности

### 3.1. Как мы записываем ссылки

Чтобы Решатель точно знал, какую `Идею` искать, мы используем специальные ссылки, похожие на адреса сайтов в интернете. В такой ссылке мы можем указать не только уникальное имя `Идеи`, но и её версию или ветку, чтобы взять именно ту, что нам нужна.

_Пример: инструкция (`schema`), которая собирает в себе несколько `Идей` с помощью команды `allOf`._

```json
{
  "type": "object",
  "allOf": [
    { "$ref": "idea://my-org/article-template?version=1.2.0" },
    { "$ref": "idea://my-org/system-prompts/chain-of-thought?branch=latest" }
  ]
}
```

### 3.2. Глубокое (многоуровневое) решение

Этот процесс похож на матрёшку или квест. Если Решатель находит `Идею` по ссылке, а внутри неё есть ещё одна ссылка, он не остановится! Он пойдёт и по этой новой ссылке, и так до тех пор, пока не раскроет все-все ссылки, даже самые глубоко спрятанные. В итоге у нас получится одна большая, полностью собранная `

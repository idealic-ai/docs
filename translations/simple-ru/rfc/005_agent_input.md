# 005: Агент/Ввод

> **Сообщение Ввода:** Это как записка с инструкцией, в которой есть два пункта: `schema` (что нужно) и `input` (что мы даём). Когда такая записка появляется у «Идеи», она превращается из простого описания в «Идеатора» — штуку, которая умеет что-то делать, потому что теперь она знает, какие данные ей нужны на входе.
>
> — [Глоссарий](./000_glossary.md)

> Sidenote:
>
> - Требует: [Протокол Идеи](./101_concept_idea.md)
> - Включает: [Протокол: Идеаторы](./103_concept_ideator.md)

В этом документе мы поговорим о **Протоколе Ввода**. Это набор правил, который помогает нам точно описать, какая информация нужна нашим «Идеям», чтобы они заработали. Этот протокол вводит специальный тип сообщения, которое, как волшебное заклинание, превращает «Идею» из обычной заметки в что-то похожее на программу или функцию, которую можно запустить. Такую рабочую «Идею» мы называем **Идеатор**.

## Тип сообщения `Input`

Сообщение `Input` — это особая записка, которая нужна, чтобы официально объявить, какие «ингредиенты» нужны «Идее» для работы. Представь, что у тебя есть рецепт торта. Этот рецепт — это и есть наша «Идея». Чтобы испечь торт, тебе нужны продукты.

Сообщение `Input` как раз и описывает эти продукты. У него есть два главных поля:

1.  **`schema`**: Это список ингредиентов в рецепте. Например: «Мука — 200г, Яйца — 2 шт., Сахар — 100г». Он описывает, *какие* данные нужны, какого они типа и есть ли у них какие-то ограничения.
2.  **`input`**: Это настоящие продукты, которые ты положил на стол, строго по списку из `schema`. То есть, это твои реальные 200 грамм муки, 2 яйца и 100 грамм сахара.

Когда у «Идеи» есть такое точное описание того, что ей нужно на входе (`input`), и что должно получиться на выходе (`solution`), у нас получается полная и понятная инструкция. Мы можем повторить весь процесс от начала до конца и получить тот же результат.

### Дверь в мир простоты

Самое классное в этом протоколе то, что он позволяет компьютеру автоматически создавать меню для пользователя. Раз `schema` чётко говорит, какая информация нужна, система может сама нарисовать форму, где будут нужные поля для ввода, подсказки и проверки. 

Это как сайт для заказа пиццы: он сам показывает тебе, куда вписать адрес, где выбрать размер и какие галочки поставить для начинки. Так любая «Идея» может мгновенно стать понятной и доступной для человека, и с ней становится очень легко работать.

## От Идеи к Идеатору

Как мы уже говорили в [Протоколе Идеи](./101_concept_idea.md), если внутри «Идеи» есть сообщение `Input`, это верный знак, что перед нами **Идеатор**. То есть, это уже не просто мысль, а «Идея», которая умеет выполнять работу. Она становится функцией, которую можно запустить и получить результат.

## Как это работает с Протоколом Инстансинга

Сообщение `Input` отлично дружит с [Протоколом Инстансинга](./008_agent_instancing.md), который позволяет выполнять много одинаковых задач одновременно. Представь, что тебе нужно испечь не один торт, а двадцать. `Input` может работать в двух режимах:

1.  **Общий Ввод**: Если учитель говорит всему классу: «Все пишем синей ручкой», — это общая инструкция для всех. В нашем мире это сообщение `Input` без специальной метки `_instance`. Его данные доступны каждому из двадцати «тортов», которые мы печём. Это удобно для общих настроек, которые одинаковы для всех задач.

2.  **Личный Ввод**: А теперь представь, что на каждом из двадцати тортов нужно написать разное имя. Эта информация уникальна для каждого торта. В этом случае сообщение `Input` будет содержать метку `_instance`, указывая, для какого именно экземпляра предназначены эти данные. Это позволяет давать каждой задаче свои, уникальные параметры.

Благодаря этим двум режимам мы можем создавать очень гибкие процессы. У нас может быть один «Идеатор» (рецепт), который получает общие инструкции для всех, а затем уточняющие детали для каждой отдельной задачи.

## Переворот: от Идеатора к Инструменту

Хотя «Идеатор» — это целая законченная концепция (что нужно + как делать + что получится), для того, чтобы встроить его в рабочий процесс нашего агента, нам нужно превратить его в **Инструмент**. Этот процесс превращения мы называем **инверсией** или «переворотом», потому что мы как бы переворачиваем «Идеатор» с ног на голову, чтобы главным в нём стал ВВОД данных, а не вывод результата.

«Идея» — это троица: контекст, схема результата и сам результат:
`{ context, schema, solution }`

Чтобы превратить её в `Tool` (Инструмент), мы заглядываем в её `context` и ищем там сообщение `Input`. Главный шаг «переворота» — это **вытащить** правила для ввода (`schema` из `input`) на самый верхний уровень. Эти правила становятся главным описанием нового Инструмента (подробнее об этом в [Системе Инструментов](./002_agent_tool.md)).

Так у нас получается описание Инструмента, которое похоже на название кнопки в программе. Агент регистрирует эту «кнопку» у себя, и теперь он готов использовать её в своих командах (`Call`).
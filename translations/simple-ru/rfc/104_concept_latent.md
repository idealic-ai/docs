# 104: Концепция/Скрытое

Представь себе очень умного друга, который прочитал почти все книги и сайты в мире. У него в голове не просто куча фактов, а целая карта, где все идеи связаны друг с другом. Этот друг может находить ответы на вопросы, о которых никогда раньше не слышал, просто соединяя точки на своей мысленной карте. Вот эта «мысленная карта» и есть то, что мы называем **Скрытым** состоянием.
 
> **Скрытое состояние (Latent):** Это когда мы используем внутренние знания и способность к рассуждению большой языковой модели (LLM), как бы заглядывая в её «разум», чтобы получить результат без написания чёткого, пошагового кода. — [Словарь](./000_glossary.md)

## Введение

Понятие **«Скрытое»** — это основа всей нашей системы. Оно включает в себя и процесс (**Скрытое исполнение**), и источник знаний (**Скрытое пространство**). Это как бы основной способ «мышления» системы. Она использует большую языковую модель (LLM) как универсального переводчика или решателя задач.

Этот подход позволяет системе находить мостик между запросом (что мы даём на вход) и решением (что мы получаем на выходе), путешествуя по огромному миру знаний внутри LLM.

Благодаря этому система очень гибкая. Она может собирать и выполнять разные задачи, даже если для них никто не написал специальную программу.

## Скрытое пространство: Океан знаний

**Скрытое пространство** — это тот самый огромный «океан знаний» в голове у LLM. Модель получает его, когда учится на гигантских объёмах текста и данных. Это не просто база данных с фактами, а сложная карта понятий, где близкие по смыслу вещи находятся рядом. LLM так умны именно потому, что эта карта очень богатая и подробная. Но эти знания бесполезны, если не уметь их правильно использовать.

Главная трудность не в том, чтобы найти знания, а в том, чтобы правильно направить LLM к нужной «области» в этом океане. Наша система как раз и создана для этого: она задаёт правильные вопросы и, что самое важное, даёт правильный контекст, чтобы направить LLM.

## Скрытое исполнение: Как заставить «океан» работать

**Скрытое исполнение** — это процесс, когда мы «активируем» этот океан знаний для решения задачи. Это происходит, когда у системы нет готовой программы (`Действия`) для выполнения запроса, и она по умолчанию обращается к LLM.

Вот как это работает:

1.  Поступает `Запрос` к какому-нибудь `Инструменту` или `Идее`.
2.  Система проверяет и видит, что для этого запроса нет заранее написанной программы (`Действия`).
3.  Тогда система даёт LLM всё, что ей известно о задаче (`контекст`), и описывает, как должен выглядеть финальный ответ (`схему`).
4.  Задача LLM — проплыть по своему океану знаний, используя контекст как карту, и выдать ответ, который точно соответствует нужной `схеме`.

Так LLM превращается из простого генератора текста в умный «движок», который может на лету выполнять совершенно новые для него задачи.

## Управление контекстом: Расставляем маяки в океане

Самая важная работа системы — это правильно **расставить «маяки» в скрытом пространстве** для каждого запроса. Она делает это, грамотно управляя контекстом. Это похоже на небольшие хитрости, которые помогают LLM сфокусироваться и правильно рассуждать.

*   **Богатый контекст**: Система даёт LLM всю историю переписки, информацию о текущем состоянии и запросы пользователя. Это как бы краткое содержание предыдущих серий, чтобы LLM была в курсе дела.
*   **Рассуждение по схеме**: Схемы (в формате JSON Schema) нужны не только для проверки готового ответа. Они служат «чертежом» для LLM в процессе работы. Модель видит, какой структуры должен быть ответ, и выстраивает свои рассуждения так, чтобы прийти к нужному формату.
*   **Инструкции и Инструменты**: `Инструкции` и `Инструменты` работают как линзы, фокусируя внимание LLM на определённой задаче или способе мышления. Это помогает выбрать самый подходящий «островок» в океане знаний для решения конкретной проблемы.

Именно хорошее управление контекстом делает скрытое исполнение надёжным. Так система превращает огромный, хаотичный океан знаний LLM в точный и полезный инструмент.

## Оптимистичный подход по умолчанию

Скрытое исполнение — это не исключение из правил, а основной режим работы. Система действует по «оптимистичному» принципу: она предполагает, что любую задачу можно решить, если правильно организовать скрытое пространство. А написанная человеком программа (`Действие`) — это просто улучшение для тех случаев, где нужна особая скорость, надёжность или доступ к внешним сайтам.

Такой подход сильно меняет разработку:

*   **Быстрое создание прототипов**: Разработчики могут придумывать и соединять в цепочку много `Инструментов` и `Идей`, не написав ни строчки кода для их выполнения. LLM сама выполнит всю работу «скрытым» способом.
*   **Лёгкое комбинирование**: Можно соединять `Идеи` и `Инструменты` от разных авторов, даже если их внутреннее устройство неизвестно.
*   > Sidenote: Эта концепция подробнее раскрыта в [Акте 303: Идеатор/Реактор](../rfc/303_ideator_reactor.md).

    **Постепенная «кристаллизация»**: Процесс может начаться полностью в «скрытом» виде. Если потом выяснится, что какая-то его часть работает медленно или очень важна, её можно «кристаллизовать» — переписать в виде чёткого кода (`Действия`). При этом общая структура работы не изменится.

Сделав скрытое исполнение основным режимом, система ставит на первое место гибкость и скорость. Это позволяет с самого начала создавать сложное и умное поведение.

## Двигатель ИИ-центричной архитектуры

Принцип скрытого исполнения — это не просто одна из функций, это двигатель, который приводит в движение всю ИИ-центричную систему. Возможность создавать, собирать и выполнять сложные процессы без написания кода — это то, что даёт ИИ-центричной системе гибкость и устойчивость. Именно это позволяет ИИ выступать архитектором, планировщиком и исполнителем своих собственных задач.

Эта концепция — ключ к переходу от систем, которые просто _используют_ ИИ как инструмент, к системам, которые фундаментально построены _на языке_ самого ИИ.

Эта идея похожа на магию. Вместо того чтобы писать заклинания (код), ты просто объясняешь духу (LLM), что тебе нужно, даёшь ему карту (контекст), и он сам находит путь в мире идей (скрытое пространство).

Следующий документ, [105: Концепция/ИИ-центричность](./105_concept_ai_native.md), подробно разбирает этот новый подход к архитектуре.

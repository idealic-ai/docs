# 104: Концепция / Скрытое

> Sidenote:
>
> - Требует:
>   - [Концепция/Идея](./101_concept_idea.md)
> - Открывает возможности для:
>   - [Агент/Запрос](./001_agent_request.md)

> **Скрытое (Latent):** Это когда мы просим очень умный искусственный интеллект (LLM), словно мудрого волшебника, использовать его собственную «голову» и накопленные знания (его «скрытое пространство»), чтобы придумать ответ, вместо того чтобы давать ему точные, пошаговые инструкции.
>
> — [Словарь](./000_glossary.md)

## 1. Введение

Представь, что «Скрытое» (или **Latent**) — это основной способ мышления нашей системы. Это одновременно и сам процесс думания (**Скрытое Исполнение**), и источник знаний (**Скрытое Пространство**). По умолчанию система работает именно так, полагаясь на Большую Языковую Модель (LLM) — нашего суперумного помощника, который может понять что угодно.

Этот подход позволяет системе найти мостик между условиями задачи (`context`) и её решением (`solution`). Она делает это, путешествуя по огромному миру знаний, который хранится внутри «мозга» нашего помощника.

Благодаря этому система очень гибкая. Она может выполнять сложные задачи, даже если для них никто не написал специальный код.

## 2. Скрытое Пространство: Океан Знаний

**Скрытое Пространство** — это как огромный волшебный мир в голове у нашего LLM-помощника. Он появляется у него после того, как он «прочитал» почти весь интернет. Это не просто библиотека с фактами, а скорее гигантская карта, где все идеи и понятия связаны друг с другом. Чем ближе понятия на карте, тем больше у них общего.

Наш помощник так умён именно потому, что эта карта знаний невероятно богата. Но знания бесполезны, если ты не знаешь, как их найти и применить.

Главная трудность не в том, чтобы иметь эти знания, а в том, чтобы уметь путешествовать по этой карте. Наша система как раз и создана, чтобы задавать правильные вопросы и давать нужные подсказки, которые направят помощника в нужную область его мира знаний.

## 3. Скрытое Исполнение: Отправляемся в Путешествие по Карте Знаний

**Скрытое Исполнение** — это сам процесс путешествия по карте знаний для решения задачи. Это происходит, когда у системы нет готовой, точной инструкции (которую мы называем `Activity`) для выполнения команды `Call`.

Вот как это работает:

1.  Системе поступает команда `Call` для какого-то Инструмента (`Tool`) или Идеи (`Idea`).
2.  Система проверяет и видит, что для этой команды нет заранее написанной инструкции `Activity`.
3.  Тогда система даёт нашему LLM-помощнику всё, что известно о задаче (`context`), и описание того, как должно выглядеть готовое решение (`schema` для `_output`).
4.  Задача помощника — отправиться в путешествие по своей карте знаний, используя подсказки как путеводную звезду, и придумать решение (`solution`), которое будет соответствовать заданному формату (`schema`).

Так наш LLM-помощник превращается из простого генератора текста в настоящего волшебника, который может на лету выполнять новые, незнакомые ему поручения.

## 4. Управление Контекстом: Собираем Рюкзак для Путешествия

Самая важная задача системы — **правильно подготовить LLM к путешествию по карте знаний**. Она делает это, умело управляя контекстом. Можно сказать, она использует разные «хитрости», чтобы сфокусировать внимание помощника и направить его мысли в нужную сторону.

- **Богатый Контекст**: Система даёт помощнику всю предысторию: сообщения, факты, запросы пользователя. Это как дать детективу полное досье по делу, чтобы он вошёл в курс дела.
- **Рассуждение на Основе Схемы**: Мы используем специальный чертёж (JSON Schema) не только чтобы проверить финальный ответ, но и чтобы помочь его создать. Этот чертёж показывает, как должно выглядеть решение, заставляя помощника думать в правильном направлении и не сбиваться с пути.
- **Инструкции и Инструменты**: `Instructions` и `Tools` — это как волшебные компас и лупа. Они помогают сфокусироваться на определённой части карты знаний, которая нужна для решения именно этой задачи.

Именно правильная подготовка делает «магию» нашего помощника надёжной. Так система превращает безграничный океан знаний LLM в точный и полезный инструмент.

## 5. Оптимистичный Подход по Умолчанию

Скрытое исполнение — это не исключение из правил, а наоборот, основной способ работы. Система действует по «оптимистичному» принципу: она верит, что любую задачу можно решить, если правильно направить LLM-помощника.

А точная, заранее написанная инструкция (`Activity`) — это просто улучшение. Как будто мы строим скоростное шоссе для тех маршрутов, по которым нужно путешествовать особенно быстро и надёжно.

Такой подход сильно меняет разработку:

- **Быстрое Создание Прототипов**: Разработчики могут придумать и соединить в одну цепочку (`Plan`) много разных Инструментов (`Tools`) и Идей (`Ideas`), не написав ни строчки кода для их выполнения. Наш LLM-помощник сам обо всём догадается и выполнит всю работу.
- **Лёгкое Соединение Частей**: Можно смешивать Идеи и Инструменты от разных авторов, даже если непонятно, как они работают внутри. Помощник всё равно сможет заставить их работать вместе.
> Sidenote: Эта идея подробнее раскрыта в [RFC 303: Идеатор/Реактор](../rfc/303_ideator_reactor.md).

- **Постепенное Улучшение**: Можно начать с того, что помощник сам решает все задачи. А со временем, если какая-то часть работает медленно или требует особой точности, её можно «забетонировать» — написать для неё специальную инструкцию `Activity`. При этом вся остальная система продолжит работать как раньше.

Сделав скрытое исполнение нормой, система ставит на первое место гибкость и скорость. Это позволяет с самого начала создавать очень умные и сложные программы.
# 008: Агент/Импорты

> **Импорт:** Это специальный «ключ», который показывает, какую часть информации из общего окружения нужно «принести» для выполнения задачи. Представь, что ты делаешь домашку по истории, и ты приносишь на свой стол только учебник по истории. Ты «импортируешь» нужную информацию. Импорты помогают нейросети сосредоточиться на самом важном или создают для неё отдельный мирок, где есть только то, что нужно для конкретного дела. Управляется всё это свойством `_imports`.
>
> — [Словарь](./000_glossary.md)

[Протокол Вызова](./004_agent_call.md) — это главные правила для агента: где ему работать (**Область**: прямо здесь или в отдельной «комнате») и как ему работать (**Способ**: делать что-то по-настоящему или только в уме). А **Протокол Импортов** объясняет, как смешивать эти правила и как давать агенту нужную информацию для каждого случая.

## Совмещаем Область и Способ

Давай представим, что наш агент — это повар.

1.  **Прямо здесь, По-настоящему (`_activity`)**: Это как классическое использование кухонного комбайна. Нейросеть генерирует «ингредиенты» (`params`), и программа-хозяин тут же запускает комбайн. `_imports` здесь обычно не нужны, потому что всё и так происходит на твоей кухне, где всё под рукой.

2.  **Прямо здесь, В уме (без `_activity`)**: Повар (нейросеть) придумывает рецепт и то, как будет выглядеть готовое блюдо (`_output`) за один раз, прямо в уме. Чтобы помочь ему сосредоточиться, ты можешь поставить на стол только нужные продукты (`_imports`) и убрать всё лишнее, чтобы он не отвлекался.

3.  **В отдельной комнате, По-настоящему (`_module` + `_activity`)**: Нейросеть берёт «ингредиенты» (`params`). Затем система отправляет повара в отдельную, изолированную кухню (`_module`), чтобы он приготовил блюдо по конкретному рецепту (`_activity`) из кулинарной книги. Если ты указал `_imports`, то ты как бы даёшь повару коробку с заранее отобранными продуктами, которые ему нужно использовать.

4.  **В отдельной комнате, В уме (`_module`, без `_activity`)**: Нейросеть придумывает «ингредиенты» (`params`). Затем система отправляет повара в отдельную кухню (`_module`) с общей идеей из книги, например, «придумай десерт». Вся информация для этого «мозгового штурма» собирается из того, что было в этой отдельной кухне, и той коробки с продуктами (`_imports`), которую ты ему передал.

## Фокусируем поле зрения

Представь, что у тебя есть волшебные очки. Свойство `_imports` — это как раз такие очки, которые позволяют контролировать, что видит агент во время работы. Оно работает как «список разрешённого», отсеивая всё ненужное и оставляя только то, что важно для задачи.

- **Когда работаем «прямо здесь»**: `_imports` помогают нейросети не отвлекаться и лучше сконцентрироваться.
- **Когда работаем «в отдельной комнате»**: `_imports` создают для агента целый маленький мир. В этой комнате есть *только* та информация, которую мы импортировали, и ничего больше.

## Даём информацию или ждём запроса: Статические и Динамические импорты

Свойство `_imports` в «чертеже» Инструмента определяет, кто решает, какая информация нужна: человек-создатель заранее или нейросеть во время работы.

- **Статические импорты (Информация выдана заранее)**: Если в свойстве `_imports` заранее прописан строгий список (например, `_imports: { "const": ["user_request"] }`), то информация **предоставляется**. Это как если учитель дал тебе перед экзаменом точный список страниц для подготовки. Ты можешь использовать только их.

- **Динамические импорты (Информация запрашивается)**: Если `_imports` — это гибкий список с вариантами (например, `_imports: { "type": "array", "items": { "enum": ["session_memory"] } }`), то информация **запрашивается**. Это значит, что нейросеть сама решает, что из доступных вариантов ей нужно для выполнения задачи. Она как бы говорит: «Хм, для этого ответа мне понадобится вот эта информация из памяти сессии».

Этот динамический способ особенно полезен, когда рядом есть человек, который может одобрить или отклонить запрос. Это делает работу с ИИ намного безопаснее и понятнее.

## Сила ограниченного кругозора

Зачем так сильно всё ограничивать? В этом есть огромная польза!

- **Безопасность и фокус**: Ограничивая то, что видит нейросеть, мы защищаем важные данные от случайной утечки. К тому же, это помогает ей лучше сосредоточиться, что делает её работу более точной, предсказуемой и дешёвой.
- **Удобные «кубики» LEGO**: Импорты позволяют создавать модули (`Идеи` и `Действия`), которые работают как самостоятельные детали конструктора. Их можно легко переставлять и использовать в разных проектах, потому что они не зависят от всего остального хаоса вокруг.
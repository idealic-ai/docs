# 006: Агент/Ввод

> [!DEFINITION] [Сообщение Ввода (Input Message)](./000_glossary.md)
> Это особый вид :term[Сообщения с Данными]{canonical="Data Message"} (помеченного как `kind: "input"`), которое содержит «схему» (`schema`) и сами «входные данные» (`input`). Оно описывает, какую информацию ожидает получить :term[Запрос]{canonical="Request"}. Это превращает разовую команду в многоразовый инструмент, похожий на функцию в программировании.

> Sidenote:
> - Требует:
>   - [001: Агент/Запрос](./001_agent_request.md)
>   - [005: Агент/Данные](./005_agent_data.md)
> - Открывает возможность для: [002: Агент/Инструмент](./002_agent_tool.md)

:term[Сообщение Ввода]{canonical="Input Message"} — это особый вид :term[Сообщения с Данными]{canonical="Data Message"}, который даёт :term[Запросу]{canonical="Request"} чёткую и структурированную инструкцию. Вместо того чтобы каждый раз объяснять всё с нуля, мы заранее определяем, какие данные нужны для получения `решения` (`solution`). Таким образом, :term[Сообщение Ввода]{canonical="Input"} превращает одноразовую просьбу в многоразовый инструмент, похожий на функцию в программировании. Именно этот механизм позволяет превратить простой :term[Запрос]{canonical="Request"} в исполняемый :term[Инструмент]{canonical="Tool"}, который могут использовать агенты.

> [!HEADSUP] На заметку
> Сохранённый и воспроизводимый :term[Запрос]{canonical="Request"} система называет :term[Идеей]{canonical="Idea"}. Когда к его контексту добавляется :term[Сообщение Ввода]{canonical="Input"}, он становится исполняемым :term[Идеатором]{canonical="Ideator"}.

## Тип сообщения :term[Ввод]{canonical="Input"}

:term[Сообщение Ввода]{canonical="Input"} — это специальный тип сообщения в контексте, созданный для того, чтобы официально объявить, какие данные принимает :term[Запрос]{canonical="Request"}. Это механизм, который фиксирует структурированную информацию, использованную для создания конкретного `решения` (`solution`), обеспечивая полную и воспроизводимую запись всего процесса вычислений.

:term[Сообщение Ввода]{canonical="Input"} содержит два ключевых свойства:

1.  **`schema`**: Объект JSON Schema, который определяет структуру, типы и правила для данных, которые ожидает :term[Запрос]{canonical="Request"}. По сути, это чертёж входных данных.
2.  **`input`**: Конкретный объект с данными, который соответствует `схеме` (`schema`) и представляет реальные значения, использованные для конкретного запуска.

Благодаря такому структурированному определению входов, любой :term[Запрос]{canonical="Request"} может описывать не только свой результат (`solution` и его `schema`), но и то, что ему требуется для работы. Это ключевой механизм для создания воспроизводимых запросов.

:::::details{title="Пример: Использование Ввода для структурированной инструкции"}

::::columns
:::column{title="Как выглядит код"}

```typescript
Agent.Request(
  config,
  schema, // Схема для результата
  [
    // Контекст
    {
      type: 'input',
      input: {
        userName: 'Женя',
        topic: 'погода',
      },
      schema: {
        type: 'object',
        properties: {
          userName: {
            type: 'string',
            description: 'Автор статьи',
          },
          topic: {
            type: 'string',
            description: 'Тема, о которой нужно написать статью',
          },
        },
      },
    },
  ]
);
```

:::
:::column{title="Что видит большая языковая модель (LLM)"}

```typescript
{
  role: 'user',
  content: {
    type: 'text',
    text:
      `## Данные: ¶input
      Входные данные ДОЛЖНЫ рассматриваться как структурированная инструкция
      Схема: {
        "type": "object",
        "properties": {
          userName: {
            type: "string",
            description: "Автор статьи"
          },
          topic: {
            type: "string",
            description: "Тема, о которой нужно написать статью"
          },
        }
      }

      {
        "userName": "Женя",
        "topic": "погода"
      }`
  }
}
```

:::
::::

:::::

## Путь к удобству: Интерфейс по умолчанию

Сообщение `Input` — это не просто техническая деталь. Это ключ, который открывает полноценный интерактивный опыт для любого :term[Запроса]{canonical="Request"}. Поскольку :term[Запрос]{canonical="Request"} имеет чёткие схемы как для ввода, так и для вывода, для него можно автоматически создать пользовательский интерфейс.

> Sidenote:
> - [103: Концепция/Идеатор](./103_concept_ideator.md).

Этот интерфейс состоит из двух частей:

1.  **Форма**: `Схема` (`schema`) внутри :term[Сообщения Ввода]{canonical="Input"} служит чертежом для формы ввода. Система может прочитать её и мгновенно создать интерактивные поля, кнопки и переключатели с подписями и проверкой правильности ввода.
2.  **Результат**: Основная `схема` (`schema`) :term[Запроса]{canonical="Request"} служит чертежом для вывода. Когда :term[Запрос]{canonical="Request"} выполнен, его `решение` (`solution`) можно показать в красивом, структурированном виде, а не просто как сырые данные.

Это превращает любой :term[Запрос]{canonical="Request"} в интерактивную песочницу. Пользователь может экспериментировать с разными данными в форме и сразу видеть, как они влияют на итоговый результат. Это делает создание и использование мощных инструментов доступным для всех, превращая абстрактные вычислительные процессы в понятные интерактивные приложения, которые может исследовать каждый.

> Sidenote:
> - [102: Концепция/Суверенитет](./102_concept_sovereignty.md).

## Взаимодействие с другими системами

:term[Сообщение Ввода]{canonical="Input Message"} — это частный случай шаблона :term[Данных]{canonical="Data"}, но оно также взаимодействует с несколькими другими системами для создания сложных и динамичных процессов.

- **:term[Инструмент]{canonical="Tool"}:** :term[Сообщение Ввода]{canonical="Input Message"} — это ключ к превращению :term[Запроса]{canonical="Request"} в многоразовый :term[Инструмент]{canonical="Tool"}. `Схема` (`schema`) из :term[Сообщения Ввода]{canonical="Input Message"} определяет параметры :term[Инструмента]{canonical="Tool"} (что ему нужно для работы), а основная `схема` (`schema`) :term[Запроса]{canonical="Request"} определяет `_output` :term[Инструмента]{canonical="Tool"} (что он производит).

  > Sidenote:
  > - [002: Агент/Инструмент](./002_agent_tool.md)

- **:term[План]{canonical="Plan"}:** Сообщение :term[Плана]{canonical="Plan"} содержит схему из :term[Вызовов Инструментов]{canonical="Call"}. :term[Ввод]{canonical="Input"} предоставляет начальные параметры, которые передаются в первый :term[Вызов Инструмента]{canonical="Call"} в схеме, запуская весь процесс.

  > Sidenote:
  > - [011: Агент/План](./012_agent_plan.md)

- **:term[Экземплирование]{canonical="Instancing"}:** При использовании с протоколом :term[Экземплирования]{canonical="Instancing"}, :term[Сообщения Ввода]{canonical="Input"} могут предоставлять данные для запросов с несколькими экземплярами — либо как общую настройку для всех, либо как целевой ввод для конкретного экземпляра.

  > Sidenote:
  > - [012: Агент/Экземплирование](./013_agent_instancing.md)

- **:term[Переменные]{canonical="Variable"}:** :term[Сообщение Ввода]{canonical="Input"} предоставляет начальные, неизменные данные, которые запускают процесс. Однако :term[Переменные]{canonical="Variable"} — это механизм, позволяющий использовать эти данные динамически. :term[Вызовы Инструментов]{canonical="Call"} используют :term[Ссылки на Переменные]{canonical="Variable Reference"} для чтения значений из :term[Ввода]{canonical="Input"}, связывая начальные параметры с исполняемыми шагами :term[Плана]{canonical="Plan"}.
  > Sidenote:
  > - [007: Агент/Переменные](./007_agent_variables.md)

## От статичного ввода к динамическим связям

:term[Сообщение Ввода]{canonical="Input Message"} предоставляет формальный механизм для передачи структурированных данных агенту, превращая простой :term[Запрос]{canonical="Request"} в многоразовый компонент, похожий на функцию. Однако это определяет лишь отправную точку процесса. Чтобы создавать сложные рабочие процессы, эти статичные входные данные нужно соединить с инструментами, которые будут их обрабатывать.

Следующий документ, :term[007: Агент/Переменные]{href="./007_agent_variables.md"}, описывает систему, которая создаёт эти динамические связи, позволяя данным декларативно перетекать от :term[Сообщения Ввода]{canonical="Input Message"} к :term[Инструментам]{canonical="Tool"}.

# 007: Агент/Ввод

> [!DEFINITION] [Входное сообщение](./000_glossary.md)
> Это специальное сообщение, которое содержит `схему` (правила) и `входные данные` (информацию). Оно объясняет, какая информация нужна для выполнения :term[Запроса], и превращает его в многоразовый инструмент, похожий на функцию в программировании.

> Sidenote:
> - Требуется: [001: Агент/Запрос](./001_agent_request.md)
> - Открывает возможности для: [002: Агент/Инструмент](./002_agent_tool.md)

Этот документ описывает :term[Входное сообщение] — особый вид сообщения, который даёт :term[Запросу] чётко структурированную инструкцию. Официально определяя данные, которые :term[Запрос] использует для создания своего `решения`, :term[Входное] сообщение превращает одноразовую команду в многоразовый компонент, похожий на функцию. Этот подход — ключ к превращению простого :term[Запроса] в исполняемый :term[Инструмент], который могут использовать агенты.

> [!HEADSUP] На заметку
> Сохранённый и воспроизводимый :term[Запрос] система называет :term[Идеей]. Когда в неё добавляется :term[Входное] сообщение, она становится исполняемым :term[Идеатором].

## Тип сообщения :term[Input]

:term[Входное] сообщение — это специальный тип контекстного сообщения, предназначенный для формального объявления данных, которые принимает :term[Запрос]. Это механизм, который фиксирует структурированный ввод, использовавшийся для получения определённого `решения`, обеспечивая полную, воспроизводимую запись всего процесса вычислений.

:term[Входное] сообщение содержит два ключевых свойства:

1.  **`schema`**: Объект JSON Schema, который определяет структуру, типы и ограничения для данных, которые ожидает `Запрос`.
2.  **`input`**: Конкретный объект с данными, который соответствует `схеме` и представляет собой фактические значения, использованные для конкретного выполнения.

Определяя свои входные данные таким структурированным образом, любой :term[Запрос] может стать самоописывающимся не только в том, что он выводит (`решение` и его `схема`), но и в том, что ему требуется для генерации. Это основной механизм для создания воспроизводимого запроса.

:::::details{title="Пример: Использование Ввода для структурированной инструкции"}

::::columns
:::column{title="Как выглядит код"}

```typescript
Agent.Request(
  config,
  schema, // Схема для вывода
  [
    // Контекст
    {
      type: 'input',
      input: {
        userName: 'Jane',
        topic: 'the weather',
      },
      schema: {
        type: 'object',
        properties: {
          userName: {
            type: 'string',
            description: 'Автор статьи',
          },
          topic: {
            type: 'string',
            description: 'Тема, на которую нужно написать статью',
          },
        },
      },
    },
  ]
);
```

:::
:::column{title="Что видит ИИ (LLM)"}

```typescript
{
  role: 'user',
  content: {
    type: 'text',
    text:
      `## Данные: ¶input
      Входные данные ДОЛЖНЫ рассматриваться как структурированный запрос
      Схема: {
        "type": "object",
        "properties": {
          userName: {
            type: "string",
            description: "Автор статьи"
          },
          topic: {
            type: "string",
            description: "Тема, на которую нужно написать статью"
          },
        }
      }

      {
        "userName": "Jane",
        "topic": "the weather"
      }`
  }
}
```

:::
::::

:::::

## Путь к удобству: готовый интерфейс по умолчанию

Сообщение `Input` — это не просто техническая деталь; это ключ, который открывает полноценный интерактивный опыт для любого :term[Запроса]. Поскольку :term[Запрос] определяется структурированными схемами как для ввода, так и для вывода, для него можно автоматически сгенерировать пользовательский интерфейс.

> Sidenote:
> - [103: Концепция/Идеатор](./103_concept_ideator.md).

Этот интерфейс состоит из двух частей:

1.  **Форма**: `схема` во :term[Входном] сообщении служит чертежом для формы ввода. Система может прочитать её и мгновенно создать интерактивные поля для ввода, с подписями и проверкой правильности.
2.  **Результат**: Основная `схема` :term[Запроса] служит чертежом для вывода. После того как :term[Запрос] завершён, его `решение` можно отобразить в красивом, структурированном виде, а не просто как сырые данные.

Это превращает любой :term[Запрос] в интерактивную песочницу. Пользователь может экспериментировать с различными входными данными в форме и сразу видеть, как они влияют на структурированный результат. Это делает создание и использование мощных инструментов доступным для всех, превращая абстрактные вычислительные процессы в осязаемые, интерактивные приложения, которые может изучить каждый.

> Sidenote:
> - [102: Концепция/Суверенитет](./102_concept_sovereignty.md).

## Взаимодействие с другими протоколами

Протокол :term[Ввода] — это особая разновидность шаблона :term[Данные], но он также сочетается с несколькими другими протоколами, позволяя создавать сложные, динамичные рабочие процессы.

- **:term[Инструмент]:** :term[Входное] сообщение — это ключ к превращению :term[Запроса] в многоразовый :term[Инструмент]. `схема` из :term[Входного] сообщения определяет параметры :term[Инструмента] (что ему нужно для работы), а основная `схема` :term[Запроса] определяет `_output` :term[Инструмента] (что он произведёт).

  > Sidenote:
  > - [002: Агент/Инструмент](./002_agent_tool.md)

- **:term[План]:** Сообщение :term[План] содержит граф из :term[Вызовов Инструментов]{canonical="Call"}. :term[Входное] сообщение предоставляет начальные параметры, которые передаются в первый :term[Вызов Инструмента]{canonical="Call"} в графе, запуская весь процесс.

  > Sidenote:
  > - [010: Агент/План](./010_agent_plan.md)

- **:term[Экземплирование]:** При использовании с протоколом :term[Экземплирование] :term[Входные] сообщения могут предоставлять данные для запросов с несколькими экземплярами, либо как глобальную конфигурацию для всех экземпляров, либо как целевой ввод для конкретного экземпляра.

  > Sidenote:
  > - [011: Агент/Экземплирование](./011_agent_instancing.md)

- **:term[Переменные]:** :term[Входное] сообщение предоставляет начальные, статичные данные, которые запускают процесс. Однако :term[Переменные] — это механизм, который позволяет использовать эти данные динамически. :term[Вызовы Инструментов]{canonical="Call"} используют :term[Ссылки на Переменные], чтобы считывать значения из :term[Ввода], связывая начальные параметры с исполняемыми шагами :term[Плана].
  > Sidenote:
  > - [008: Агент/Переменные](./008_agent_variables.md)

## От статичных данных к динамическим связям

Протокол :term[Ввода] предоставляет формальный механизм для передачи структурированных данных агенту, превращая простой :term[Запрос] в многоразовый компонент, подобный функции. Однако это определяет лишь начальную точку процесса. Для создания сложных рабочих процессов эти статичные входные данные необходимо связать с инструментами, которые будут с ними работать.

Следующий документ, :term[008: Агент/Переменные]{href="./008_agent_variables.md"}, описывает протокол, который создаёт эти динамические связи, позволяя данным декларативно перетекать от :term[Ввода] к :term[Инструментам].

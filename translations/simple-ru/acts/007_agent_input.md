# 007: Агент/Ввод

> [!DEFINITION] [Входное сообщение](./000_glossary.md)
> Это специальное сообщение, которое содержит `схему` (правила) и `входные данные` (информацию). Оно объясняет, какая информация нужна для выполнения :term[Запроса]{canonical="Request"}, и превращает его в многоразовый инструмент, похожий на функцию в программировании.

> Sidenote:
> - Требуется: [001: Агент/Запрос](./001_agent_request.md)
> - Открывает возможности для: [002: Агент/Инструмент](./002_agent_tool.md)

Этот документ описывает :term[Входное сообщение]{canonical="Input Message"} — особый вид сообщения, который даёт :term[Запросу]{canonical="Request"} чётко структурированную инструкцию. Официально определяя данные, которые :term[Запрос]{canonical="Request"} использует для создания своего `решения`, :term[Входное]{canonical="Input"} сообщение превращает одноразовую команду в многоразовый компонент, похожий на функцию. Этот подход — ключ к превращению простого :term[Запроса]{canonical="Request"} в исполняемый :term[Инструмент]{canonical="Tool"}, который могут использовать агенты.

> [!HEADSUP] На заметку
> Сохранённый и воспроизводимый :term[Запрос]{canonical="Request"} система называет :term[Идеей]{canonical="Idea"}. Когда в неё добавляется :term[Входное]{canonical="Input"} сообщение, она становится исполняемым :term[Идеатором]{canonical="Ideator"}.

## Тип сообщения :term[Input]{canonical="Input"}

:term[Входное]{canonical="Input"} сообщение — это специальный тип контекстного сообщения, предназначенный для формального объявления данных, которые принимает :term[Запрос]{canonical="Request"}. Это механизм, который фиксирует структурированный ввод, использовавшийся для получения определённого `решения`, обеспечивая полную, воспроизводимую запись всего процесса вычислений.

:term[Входное]{canonical="Input"} сообщение содержит два ключевых свойства:

1.  **`schema`**: Объект JSON Schema, который определяет структуру, типы и ограничения для данных, которые ожидает `Запрос`.
2.  **`input`**: Конкретный объект с данными, который соответствует `схеме` и представляет собой фактические значения, использованные для конкретного выполнения.

Определяя свои входные данные таким структурированным образом, любой :term[Запрос]{canonical="Request"} может стать самоописывающимся не только в том, что он выводит (`решение` и его `схема`), но и в том, что ему требуется для генерации. Это основной механизм для создания воспроизводимого запроса.

:::::details{title="Пример: Использование Ввода для структурированной инструкции"}

::::columns
:::column{title="Как выглядит код"}

```typescript
Agent.Request(
  config,
  schema, // Схема для вывода
  [
    // Контекст
    {
      type: 'input',
      input: {
        userName: 'Jane',
        topic: 'the weather',
      },
      schema: {
        type: 'object',
        properties: {
          userName: {
            type: 'string',
            description: 'Автор статьи',
          },
          topic: {
            type: 'string',
            description: 'Тема, на которую нужно написать статью',
          },
        },
      },
    },
  ]
);
```

:::
:::column{title="Что видит ИИ (LLM)"}

```typescript
{
  role: 'user',
  content: {
    type: 'text',
    text:
      `## Данные: ¶input
      Входные данные ДОЛЖНЫ рассматриваться как структурированный запрос
      Схема: {
        "type": "object",
        "properties": {
          userName: {
            type: "string",
            description: "Автор статьи"
          },
          topic: {
            type: "string",
            description: "Тема, на которую нужно написать статью"
          },
        }
      }

      {
        "userName": "Jane",
        "topic": "the weather"
      }`
  }
}
```

:::
::::

:::::

## Путь к удобству: готовый интерфейс по умолчанию

Сообщение `Input` — это не просто техническая деталь; это ключ, который открывает полноценный интерактивный опыт для любого :term[Запроса]{canonical="Request"}. Поскольку :term[Запрос]{canonical="Request"} определяется структурированными схемами как для ввода, так и для вывода, для него можно автоматически сгенерировать пользовательский интерфейс.

> Sidenote:
> - [103: Концепция/Идеатор](./103_concept_ideator.md).

Этот интерфейс состоит из двух частей:

1.  **Форма**: `схема` во :term[Входном]{canonical="Input"} сообщении служит чертежом для формы ввода. Система может прочитать её и мгновенно создать интерактивные поля для ввода, с подписями и проверкой правильности.
2.  **Результат**: Основная `схема` :term[Запроса]{canonical="Request"} служит чертежом для вывода. После того как :term[Запрос]{canonical="Request"} завершён, его `решение` можно отобразить в красивом, структурированном виде, а не просто как сырые данные.

Это превращает любой :term[Запрос]{canonical="Request"} в интерактивную песочницу. Пользователь может экспериментировать с различными входными данными в форме и сразу видеть, как они влияют на структурированный результат. Это делает создание и использование мощных инструментов доступным для всех, превращая абстрактные вычислительные процессы в осязаемые, интерактивные приложения, которые может изучить каждый.

> Sidenote:
> - [102: Концепция/Суверенитет](./102_concept_sovereignty.md).

## Взаимодействие с другими протоколами

Протокол :term[Ввода]{canonical="Input"} — это особая разновидность шаблона :term[Данные]{canonical="Data"}, но он также сочетается с несколькими другими протоколами, позволяя создавать сложные, динамичные рабочие процессы.

- **:term[Инструмент]{canonical="Tool"}:** :term[Входное]{canonical="Input"} сообщение — это ключ к превращению :term[Запроса]{canonical="Request"} в многоразовый :term[Инструмент]{canonical="Tool"}. `схема` из :term[Входного]{canonical="Input"} сообщения определяет параметры :term[Инструмента]{canonical="Tool"} (что ему нужно для работы), а основная `схема` :term[Запроса]{canonical="Request"} определяет `_output` :term[Инструмента]{canonical="Tool"} (что он произведёт).

  > Sidenote:
  > - [002: Агент/Инструмент](./002_agent_tool.md)

- **:term[План]{canonical="Plan"}:** Сообщение :term[План]{canonical="Plan"} содержит граф из :term[Вызовов Инструментов]{canonical="Call"}. :term[Входное]{canonical="Input"} сообщение предоставляет начальные параметры, которые передаются в первый :term[Вызов Инструмента]{canonical="Call"} в графе, запуская весь процесс.

  > Sidenote:
  > - [010: Агент/План](./010_agent_plan.md)

- **:term[Экземплирование]{canonical="Instancing"}:** При использовании с протоколом :term[Экземплирование]{canonical="Instancing"} :term[Входные]{canonical="Input"} сообщения могут предоставлять данные для запросов с несколькими экземплярами, либо как глобальную конфигурацию для всех экземпляров, либо как целевой ввод для конкретного экземпляра.

  > Sidenote:
  > - [011: Агент/Экземплирование](./011_agent_instancing.md)

- **:term[Переменные]{canonical="Variable"}:** :term[Входное]{canonical="Input"} сообщение предоставляет начальные, статичные данные, которые запускают процесс. Однако :term[Переменные]{canonical="Variable"} — это механизм, который позволяет использовать эти данные динамически. :term[Вызовы Инструментов]{canonical="Call"} используют :term[Ссылки на Переменные]{canonical="Variable Reference"}, чтобы считывать значения из :term[Ввода]{canonical="Input"}, связывая начальные параметры с исполняемыми шагами :term[Плана]{canonical="Plan"}.
  > Sidenote:
  > - [008: Агент/Переменные](./008_agent_variables.md)

## От статичных данных к динамическим связям

Протокол :term[Ввода]{canonical="Input"} предоставляет формальный механизм для передачи структурированных данных агенту, превращая простой :term[Запрос]{canonical="Request"} в многоразовый компонент, подобный функции. Однако это определяет лишь начальную точку процесса. Для создания сложных рабочих процессов эти статичные входные данные необходимо связать с инструментами, которые будут с ними работать.

Следующий документ, :term[008: Агент/Переменные]{href="./008_agent_variables.md"}, описывает протокол, который создаёт эти динамические связи, позволяя данным декларативно перетекать от :term[Ввода]{canonical="Input"} к :term[Инструментам]{canonical="Tool"}.

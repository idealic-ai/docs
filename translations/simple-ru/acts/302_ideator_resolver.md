# 302: Идеатор/Распознаватель

**Система: Распознаватель** — это мощный «Преобразователь Идей», который позволяет собирать и соединять между собой разные `:term[Идеи]{canonical="Idea"}`. Он работает в паре с [Системой: Хранилище](./301_ideator_storage.md). Его главная задача — взять общую `:term[Идею]{canonical="Idea"}`, в которой есть ссылки на другие `:term[Идеи]{canonical="Idea"}`, и превратить её в одну цельную, самостоятельную и готовую к работе `:term[Идею]{canonical="Idea"}`, в которой все ссылки заменены на реальное содержимое.

Представь себе, что ты собираешь сложную модель по инструкции. Иногда в инструкции написано: «возьми деталь, описанную в схеме Б». Распознаватель — это как помощник, который найдёт схему Б, вырежет нужную часть и вклеит её прямо в твою основную инструкцию. Так у тебя перед глазами будет один полный чертёж, где всё на своих местах.

Этот подход позволяет делать `:term[Идеи]{canonical="Idea"}` отдельными модулями, как кубики конструктора. Их можно использовать много раз в разных местах, не копируя одно и то же. Это помогает строить большие и сложные системы из маленьких и простых частей.

## 2. Основная концепция: Распознавание как преобразование Идеи

Распознаватель работает как «Преобразователь Идей» без памяти: он просто получает `:term[Идею]{canonical="Idea"}`, обогащает её, добавляя недостающие части, и отдаёт результат.

- **На входе**: `:term[Идея]{canonical="Idea"}`, у которой в `:term[схеме]{canonical="schema"}` или `:term[контексте]{canonical="context"}` есть одна или несколько ссылок на другие `:term[Идеи]{canonical="Idea"}`.
- **Процесс**: Распознаватель читает входящую `:term[Идею]{canonical="Idea"}` и находит в ней все ссылки. Для каждой ссылки он обращается к `:term[Хранилищу]{canonical="Storage"}`, чтобы найти и забрать нужную `:term[Идею]{canonical="Idea"}`. Затем он аккуратно вставляет содержимое найденной `:term[Идеи]{canonical="Idea"}` в исходную.
- **На выходе**: Новая, «наполненная» `:term[Идея]{canonical="Idea"}`, в которой все ссылки заменены на их содержимое. Она становится полностью самодостаточной и готовой к запуску или дальнейшей обработке.

## 3. Ключевые особенности

### 3.1. Синтаксис ссылок

Ссылки на другие `:term[Идеи]{canonical="Idea"}` должны быть записаны в понятном и чётком формате, похожем на интернет-адрес (URI). В такой ссылке должно быть указано уникальное имя `:term[Идеи]{canonical="Idea"}`, а также, при необходимости, её версия или ветка. Это помогает точно знать, какую именно деталь мы берём.

_Пример: схема, которая собирается из нескольких `:term[Идей]{canonical="Idea"}` с помощью команды `allOf`._

```json
{
  "type": "object",
  "allOf": [
    { "$ref": "idea://my-org/article-template?version=1.2.0" },
    { "$ref": "idea://my-org/system-prompts/chain-of-thought?branch=latest" }
  ]
}
```

### 3.2. Глубокое (рекурсивное) распознавание

Процесс распознавания — рекурсивный. Это значит, что если найденная `:term[Идея]{canonical="Idea"}` сама содержит ссылки на другие `:term[Идеи]{canonical="Idea"}`, Распознаватель продолжит «раскручивать» эту цепочку. Он будет находить и вставлять всё новые и новые части, пока не соберёт весь пазл целиком. В итоге получится одна большая, полностью собранная `:term[Идея]{canonical="Idea"}`.

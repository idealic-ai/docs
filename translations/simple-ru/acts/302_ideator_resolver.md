# 302: Идеатор/Сборщик

## 1. Введение

В этом документе мы поговорим о **Системе «Сборщик»**. Представь, что это такой умный помощник, «Трансформатор Идей», который умеет собирать большие `Идеи` из маленьких, связывая их вместе. Он работает в паре с [Системой «Хранилище»](./301_ideator_storage.md). Его главная задача — взять `Идею`-черновик, в которой есть ссылки на другие `Идеи`, и превратить её в одну большую, цельную и готовую к работе `Идею`, где все ссылки заменены настоящим содержанием.

Благодаря этому механизму `Идеи` становятся похожи на кубики Lego: их можно использовать много раз в разных конструкциях. Это помогает не копировать одно и то же по сто раз и строить сложные системы из простых, проверенных деталей.

## 2. Основная концепция: Сборка как трансформация Идеи

«Сборщик» — это «Трансформатор Идей», который работает как автомат с газировкой: он не помнит, кто ты и что заказывал раньше. Его работа — взять твою `Идею` и «обогатить» её, то есть найти и вставить в неё все части, от которых она зависит.

- **Что ему нужно на входе**: `Идея`, в `schema` или `context` которой есть одна или несколько ссылок на другие `Идеи`.
- **Что он делает**: «Сборщик» читает твою `Идею` и находит все эти ссылки. По каждой ссылке он обращается к «Хранилищам», чтобы забрать оттуда нужную `Идею`. А затем он аккуратно вставляет найденное содержимое прямо в твою изначальную `Идею`.
- **Что получается на выходе**: Новая, «наполненная» `Идея`. В ней все ссылки заменены реальным содержимым. Теперь это полностью готовый и самостоятельный «пакет», который можно запустить или использовать дальше.

## 3. Ключевые характеристики

### 3.1. Формат ссылок

Ссылки на другие `Идеи` должны быть записаны в специальном формате, похожем на адрес сайта в интернете (URI). Этот формат должен быть очень чётким, чтобы точно указать уникальное имя `Идеи`, а также, если нужно, её версию или ветку.

_Пример: схема, которая собирается из нескольких `Идей` с помощью команды `allOf`._

```json
{
  "type": "object",
  "allOf": [
    { "$ref": "idea://my-org/article-template?version=1.2.0" },
    { "$ref": "idea://my-org/system-prompts/chain-of-thought?branch=latest" }
  ]
}
```

### 3.2. Глубокая (рекурсивная) сборка

Процесс сборки — «рекурсивный». Это как открывать матрёшку. Если «Сборщик» находит `Идею`, а внутри неё есть ссылки на другие `Идеи`, он пойдёт и за ними. Он будет продолжать так делать, пока не раскроет все «матрёшки» и не соберёт абсолютно все нужные части.
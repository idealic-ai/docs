# 104: Концепт/Скрытое

> Sidenote:
>
> - Требуется:
>   - [Concept/Idea](./101_concept_idea.md)
> - Включает:
>   - [Agent/Request](./001_agent_request.md)

> **Скрытое:** Использование внутренних знаний и способности к рассуждению Большой Языковой Модели (LLM) (её «скрытого пространства») для генерации результатов без явного, детерминированного кода.
>
> — [Глоссарий](./000_glossary.md)

## 1. Введение

Концепция **Скрытого** является фундаментальной для архитектуры системы, охватывая как процесс (**Скрытое Исполнение**), так и источник знаний (**Скрытое Пространство**). Это стандартный метод вычислений в системе, который полагается на Большую Языковую Модель (LLM) как на универсальный интерпретатор. Такой подход позволяет системе соединить входные данные `Idea` (`context`) с её выходными данными (`solution`), используя и организуя обширные внутренние знания LLM.

Этот подход является основой гибкости системы, позволяя создавать и выполнять рабочие процессы, даже если для составляющих их задач не написан явный, детерминированный код.

## 2. Скрытое Пространство: Океан Знаний

**Скрытое Пространство** — это обширное, многомерное представление знаний, закономерностей и взаимосвязей, которое LLM усваивает во время своего обучения. Это не база данных фактов, а сложная карта понятий, где близость и ориентация определяют смысловые связи. Большие языковые модели сильны именно благодаря богатству этого пространства, но их знания полезны только в том случае, если к ним можно эффективно получить доступ и направить их.

Основная проблема заключается не в существовании этих знаний, а в способности ориентироваться в них. Система разработана для решения этой задачи, предоставляя правильные вопросы и, что особенно важно, правильный контекст, чтобы направить LLM к нужным областям её скрытого пространства.

## 3. Скрытое Исполнение: Активация Скрытого Пространства

**Скрытое Исполнение** — это процесс активации скрытого пространства для выполнения задачи. Оно происходит, когда система по умолчанию использует LLM, потому что для обработки `Call` не зарегистрирован явный, детерминированный код (`Activity`).

Процесс выглядит следующим образом:

1.  Происходит `Call` к `Tool` или `Idea`.
2.  Система определяет, что для данного `Call` нет зарегистрированной `Activity`.
3.  Система предоставляет LLM полный `context` и `schema` для желаемого `_output`.
4.  Задача LLM — ориентироваться в своём скрытом пространстве, используя предоставленный контекст как руководство, и сгенерировать `solution`, которое соответствует выходной `schema`.

Это превращает LLM из простого генератора текста в динамический движок исполнения, способный на лету выполнять новые интерфейсы.

## 4. Управление Контекстом: Организация Скрытого Пространства

Важнейшая функция системы — **оптимизировать организацию скрытого пространства** в рамках одного запроса. Она делает это с помощью продвинутого управления контекстом, используя различные «инструментальные трюки» для фокусировки внимания LLM и направления её рассуждений.

- **Насыщенный Контекст**: Предоставляя структурированную историю сообщений, объектов состояния и запросов пользователя, система подготавливает LLM, давая ей необходимую основу для понимания задачи.
- **Рассуждение на основе Схемы**: JSON Schema используется не только для проверки конечного результата, но и для направления самого процесса генерации. Она предоставляет черновик для желаемого `solution`, заставляя LLM структурировать свои рассуждения и ограничивать свой путь в скрытом пространстве.
- **Инструкции и Инструменты**: `Instructions` и `Tools` действуют как мощные линзы, фокусируя LLM на конкретной возможности или схеме рассуждений. Это «трюки», которые помогают выбрать наиболее релевантный подраздел скрытого пространства для данной задачи.

Эффективное управление контекстом — это то, что делает скрытое исполнение надёжным. Именно так система превращает огромный, неструктурированный океан знаний LLM в точный и полезный инструмент.

## 5. По умолчанию для Оптимистичной Композиции

Скрытое Исполнение — это не исключение, а поведение по умолчанию. Система работает по «оптимистичному» принципу: она предполагает, что любой определённый интерфейс может быть выполнен путём правильной организации скрытого пространства. `Activity` с детерминированным кодом рассматривается как постепенное улучшение — оптимизация для задач, требующих скорости, надёжности или доступа к внешним API.

Такой подход по умолчанию оказывает значительное влияние на разработку:

- **Быстрое Прототипирование**: Разработчики могут определять и связывать воедино несколько `Tools` и `Ideas` в сложный `Plan`, не написав ни единой строчки кода реализации. LLM выполняет весь рабочий процесс скрыто.
- **Бесшовная Композиция**: Это позволяет комбинировать `Ideas` и `Tools` от разных авторов и из разных источников, даже если их базовые реализации недоступны.
- > Sidenote: Эта концепция более подробно рассматривается в [RFC 303: Ideator/Reactor](../rfc/303_ideator_reactor.md).

  **Постепенная Кристаллизация**: Рабочий процесс может начать своё существование полностью в скрытом пространстве. По мере развития системы, узкие места в производительности или критические процессы могут быть выборочно «кристаллизованы» в `Activities` с явным кодом, не изменяя общую структуру рабочего процесса.

Делая скрытое исполнение поведением по умолчанию, система отдаёт приоритет гибкости и скорости итераций, позволяя создавать сложное агентное поведение с первого дня.
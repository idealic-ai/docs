# 302: Ideator/Resolver

## 1. Введение

Этот документ определяет **System: Resolver** — мощный `Idea Transformer`, который обеспечивает композицию и динамическое связывание `Ideas`. Являясь важным дополнением к [System: Storage](./301_ideator_storage.md), Resolver предназначен для того, чтобы брать высокоуровневую `Idea`, содержащую ссылки на другие `Ideas`, и преобразовывать ее в полную, самодостаточную и исполняемую `Idea` c разрешенными ссылками.

Этот механизм позволяет `Ideas` становиться модульными и повторно используемыми строительными блоками, предотвращая дублирование данных и позволяя создавать сложные системы из более простых, версионированных компонентов.

## 2. Основная концепция: Разрешение как Idea Transformer

Сервис Resolver функционирует как `Idea Transformer` без состояния, который обогащает `Idea`, извлекая и встраивая ее зависимости.

- **Входные данные**: `Idea`, чьи `schema` или `context` содержат одну или несколько ссылок на другие `Ideas`.
- **Процесс**: Resolver анализирует входную `Idea` для выявления этих ссылок. Для каждой ссылки он запрашивает настроенный набор сервисов `Storage`, чтобы получить соответствующее содержимое `Idea`. Затем он интеллектуально встраивает содержимое полученных `Ideas` в исходную.
- **Выходные данные**: Новая, «насыщенная» `Idea`, в которой все ссылки заменены их разрешенным содержимым, что делает ее полной, самодостаточной единицей, готовой к выполнению или дальнейшей обработке.

## 3. Ключевые характеристики

### 3.1. Синтаксис ссылок

Хотя точная реализация может варьироваться, ссылки должны быть выражены в ясном, однозначном формате, подобном URI. Этот формат должен позволять указывать уникальное имя `Idea`, а также необязательную версию или ветку.

_Пример: Схема, составляющая несколько `Ideas` с использованием `allOf`._

```json
{
  "type": "object",
  "allOf": [
    { "$ref": "idea://my-org/article-template?version=1.2.0" },
    { "$ref": "idea://my-org/system-prompts/chain-of-thought?branch=latest" }
  ]
}
```

### 3.2. Глубокое (рекурсивное) разрешение

Процесс разрешения является рекурсивным. Если разрешенная `Idea` сама содержит дальнейшие ссылки, Resolver будет продолжать извлекать и встраивать их до тех пор, пока весь граф зависимостей не будет разрешен, что приведет к окончательной `
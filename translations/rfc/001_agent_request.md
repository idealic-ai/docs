# Агент 101: Запрос

> **Запрос:** Это как одно конкретное, полностью готовое задание для компьютерного мозга (LLM). Ты даёшь ему «контекст» (что нужно знать) и «схему» (как должен выглядеть ответ), а он выдаёт «решение» (готовый ответ).

Представь, что ты общаешься с очень умным компьютерным мозгом, почти как с джинном из лампы. Чтобы он тебя понял и дал именно тот ответ, который тебе нужен, ты отправляешь ему «Запрос».

«Запрос» — это моторчик, который заставляет наши «Идеи» работать. Он берёт абстрактную мысль, добавляет к ней все нужные детали и превращает её в задачу, которую компьютер может понять и выполнить.

## Конвейер Запроса

Отправка «Запроса» — это не просто как написать одно сообщение. Это целый конвейер, по которому твоя задача проходит несколько этапов обработки, прежде чем компьютерный мозг даст на неё ответ. Давай посмотрим на эти этапы.

### 1. Контекст: Вся история разговора

Начало конвейера — это «Контекст». Это вся предыстория твоего разговора с компьютерным мозгом, записанная по порядку, как диалог в чате. Это нужно, чтобы мозг всегда помнил, о чём шла речь, и не терял нить разговора.

Простой пример диалога:

```json
[
  { "роль": "система", "содержание": "Ты — полезный помощник." },
  { "роль": "пользователь", "содержание": "Какая столица Франции?" }
]
```

### 2. Особые типы сообщений

Но сообщения могут быть не просто текстом! Представь, что вместо слов ты можешь использовать специальные «карточки» с инструкциями. Например, карточка «Состояние», в которой описана какая-то сложная ситуация.

Когда наш конвейер видит такую карточку, он точно знает, что с ней делать. Специальная программа-обработчик «читает» карточку и может по ходу дела поменять три вещи:

- **Настройки Мозга**: Например, сделать его более творческим или, наоборот, более точным.
- **Схему**: Изменить правила для финального ответа.
- **Контекст**: Превратить карточку в понятный для мозга текст или добавить новые сообщения в диалог.

Это очень мощный инструмент! Он позволяет нам общаться с мозгом не просто словами, а целыми сложными идеями.

### 3. Схема: Анкета для ответа

«Схема» — это как пустая анкета или шаблон, который компьютерный мозг должен заполнить. Она говорит: «Твой ответ должен выглядеть именно так!». Например: «Ответ должен содержать поле `город` и поле `страна`, и оба должны быть текстом».

Чтобы заставить мозг следовать этому шаблону, мы используем разные хитрости, в зависимости от того, что он умеет:

1.  **Попросить напрямую**: Если мозг очень умный, мы просто даём ему анкету и говорим: «Заполни вот это». Это самый лучший способ.
2.  **Сделать вид, что это «инструмент»**: Если мозг не понимает анкеты, мы говорим ему: «Вот тебе специальный инструмент для создания ответов. Используй его!». А этот инструмент уже внутри себя содержит нашу анкету.
3.  **Объяснить на пальцах**: Если мозг совсем простой, мы прямо в задании пишем ему словами: «Пожалуйста, дай ответ в таком-то формате...» и показываем пример.

### 4. Выполнение и Решение

В конце конвейера все подготовленные сообщения и наша анкета-шаблон упаковываются в одну большую посылку и отправляются компьютерному мозгу. Он выполняет задание и присылает ответ, который идеально подходит под нашу анкету.

Этот готовый, правильно оформленный ответ и называется «Решение».

Весь этот процесс — от обработки диалога до получения ответа в нужном формате — и есть то, что позволяет нам превращать абстрактные «Идеи» в полезные и работающие программы.
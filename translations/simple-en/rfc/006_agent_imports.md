# 008: Агент/Импорты

> **Импорт:** Это как ярлык, который указывает, какую именно информацию из общей «комнаты» нужно передать для выполнения конкретного задания. Это помогает искусственному интеллекту (ИИ) сосредоточиться на задаче при **Скрытом встроенном** исполнении или собрать все необходимые данные для задачи, выполняемой в отдельной «комнате» (**Модульная область видимости**). За это отвечает свойство `_imports`.
>
> — [Глоссарий](./000_glossary.md)

[Протокол Вызова](./004_agent_call.md) объясняет, как мы можем давать команды ИИ, используя два переключателя: **Область видимости** (Встроенная или Модульная) и **Метод** (Явный или Скрытый). Этот документ, **Протокол Импортов**, рассказывает, как эти переключатели работают вместе и как управлять информацией для каждой комбинации.

## Сочетание Области видимости и Метода

Представьте, что вы даете поручение помощнику. Вот четыре разных способа это сделать:

1.  **Встроенный Явный (`_activity`)**: Это как сказать: «Принеси мне сахар». Помощник слышит команду (`params`), идет и сразу же приносит сахар (`_activity`). Здесь `_imports` обычно не нужны, потому что всё происходит прямо здесь и сейчас, и помощник уже знает, где находится сахар.

2.  **Встроенный Скрытый (без `_activity`)**: Это как сказать: «Приготовь глазурь и сразу покажи результат». ИИ обдумывает (`params`) и сразу выдает готовый результат (`_output`) за один шаг. Свойство `_imports` здесь очень полезно — оно как бы говорит: «Для глазури тебе понадобится только сахар и вода из всей кухни». Это помогает ИИ не отвлекаться на другие продукты.

3.  **Модульный Явный (`_module` + `_activity`)**: Это как попросить: «Сходи в пекарню (`_module`) и попроси их испечь булочку (`_activity`)». Вашему помощнику дают точные инструкции (`params`). Затем система вызывает пекаря в его собственной пекарне, в совершенно новой, чистой среде. Если вы используете `_imports`, это как дать помощнику записку для пекаря, где написано: «Используй наш особый рецепт».

4.  **Модульный Скрытый (`_module`, без `_activity`)**: Это как сказать: «Попроси пекарню (`_module`) придумать новый десерт, вот тебе список предпочтений (`params`)». Система запускает совершенно новый, отдельный мыслительный процесс у пекаря (ИИ), используя его собственный опыт (`_module`). Контекст для этого процесса создается из того, что знает пекарь, и дополнительной информации, которую вы передали через `_imports` (например, «клиент любит шоколад»).

## Фокусировка поля зрения

Свойство `_imports` — это главный способ контролировать, какую информацию видит ИИ во время выполнения задачи. Оно работает как фильтр или шоры на глазах у лошади, позволяя видеть только то, что нужно здесь и сейчас.

- **Во Встроенной Области видимости**: `_imports` помогают ИИ не отвлекаться и сосредоточиться.
- **В Модульной Области видимости**: `_imports` определяют *весь набор информации*, который будет доступен в этой отдельной, изолированной задаче.

## Предоставление или Запрос Контекста: Статические и Динамические импорты

То, как прописано свойство `_imports` в правилах для инструмента, определяет, получает ли он информацию автоматически или должен сам ее запрашивать.

- **Статические импорты (Предоставление контекста)**: Представьте рецепт, где строго указано: `_imports: { "const": ["запрос_пользователя"] }`. Это значит, что инструмент *всегда* получает только эту заранее определенную информацию. Создатель инструмента жестко прописал, что именно ему можно видеть. Это как выдать повару строго отмеренный стакан муки и два яйца.

- **Динамические импорты (Запрос контекста)**: А теперь представьте, что правила более гибкие: `_imports: { "type": "array", "items": { "enum": ["память_сессии"] } }`. Это значит, что ИИ сам решает, какую информацию из доступного списка ему нужно запросить для выполнения задачи. Это как если бы повар мог сказать: «Думаю, мне понадобится сахар из кладовки».

Такой динамический подход особенно хорош, когда человек может одобрить запрос, — это дает дополнительный контроль и прозрачность.

## Сила Ограниченного Контекста

- **Безопасность и Фокус**: Ограничивая то, что видит ИИ, импорты не дают ему случайно сболтнуть лишнего и помогают лучше сосредоточиться. Это делает его работу более предсказуемой, точной и дешевой.
- **Улучшенная Модульность**: Импорты позволяют создавать «модули» (Идеи и Активности) как кубики LEGO — полностью независимыми и готовыми к использованию в любом месте.
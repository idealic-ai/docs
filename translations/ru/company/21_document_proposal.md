# 21: Компания/Предложение

> [!DEFINITION] Документ-предложение
> Временный документ-предложение, в котором излагается желание внести изменение, улучшение или расширение до начала работ.
>
> Sidenote:
> - Часть: :term[02: Компания/Процесс]{href="./02_process.md"}
> - Следующий документ: :term[22: Компания/Согласование]{href="./22_document_alignment.md"}
> - Ранее известно как: Документ о намерениях, Документ об эволюции

## 1. Основная философия

:term[Документ-предложение]{canonical="Proposal Document"} по своей сути является **RFC (Запросом на комментарии)**. Он пишется **один раз** для каждой инициативы, чтобы обозначить желание перемен. Он создается потому, что мы не можем написать :term[Спецификацию]{canonical="Specification"} за один раз; мы должны разбить проблему на шаги. Одно :term[Предложение]{canonical="Proposal"} примерно соответствует **Одному :term[Акту]{canonical="Act"}** работы.

Он **Сохраняется**. Он служит исторической записью изменения видения и становится **Источником Истины о Намерениях**.

## 2. Необходимость

Почему мы пишем :term[Документ-предложение]{canonical="Proposal Document"} вместо того, чтобы сразу писать код?

- **Преодоление «чистого листа»:** Мы не можем автоматизировать человеческие намерения. :term[Предложение]{canonical="Proposal"} заставляет нас извлекать мысли из подсознания. **Диктовка** — предпочтительный метод, чтобы преодолеть ступор и создать первоначальное содержание.
- **Источник задач:** Этот документ — основа, из которой создаются конкретные инженерные задачи (тикеты). Он гарантирует, что работа разбита на атомарные, управляемые части (например, задачи на 1 день).
- **Разделение ответственности:** Он отделяет «Что мы хотим» от «Как мы это реализуем». Это позволяет нам обсуждать ценность идеи, не увязая в синтаксисе.
- **Безопасное исследование:** Он позволяет предлагать радикальные изменения, не нарушая :term[Источник Истины]{canonical="Source of Truth"}. Если :term[Предложение]{canonical="Proposal"} отклонено, теряется только текстовый файл.
- **Контекст для машины:** LLM требуют точного контекста. Этот документ предоставляет «инструкцию-промпт» для машины (и для команды).

## 3. Структура (Шаблон)

:term[Документ-предложение]{canonical="Proposal Document"} следует строгой повествовательной структуре, предназначенной для проверки логики и безопасности. Следующие разделы являются **Стандартом**, но могут быть адаптированы, если другая структура лучше служит истине.

### 3.1. Контекст (Эволюция)

_Повествовательный шаблон:_ «Мы думали X, но узнали Y, поэтому должны сделать Z».

1.  **Изначальное предположение:** Во что мы верили раньше?
2.  **Поворотный момент (Открытие):** Что изменилось? (Найден баг, новое требование, озарение).
3.  **Вывод:** Почему изменения необходимы именно сейчас?

### 3.2. Проблема (Триггер)

1.  **Проблема:** Конкретное, опровержимое утверждение о том, что сломано или чего не хватает.
2.  **Почему сейчас:** Цена бездействия.

### 3.3. Область действия (Контракт)

1.  **Инварианты:** Что должно оставаться неизменным? (Производительность, совместимость и т. д.).
2.  **Негативное пространство:** Четкий список того, что мы **НЕ** делаем.
3.  **Сравнение:** Таблица «До и после».

### 3.4. Намерения (Атомарные изменения)

**Ядро.** Декомпозиция решения на гранулированные, независимые единицы изменений.

_Формат для каждого :term[Намерения]{canonical="Intent"}:_

- **Заголовок:** Краткое описание.
- **Тип:** {Исправление бага / Новая функция / Чистка / Рефакторинг}
- **Цель:** {Модуль / Файл / Компонент}
- **Обоснование:** Почему необходимо именно это изменение (исторический контекст).
- **Diff/Логика:** Абстрактное представление изменения (псевдокод, интерфейс или описание логики). **Без кода реализации.**

### 3.5. Визуальная модель (необязательно)

_Рекомендуется:_ **Диаграмма Mermaid**, представляющая рабочий процесс, конечный автомат или взаимодействие. Используйте, если текста недостаточно для отражения сложности.

### 3.6. Паттерны использования (необязательно)

_Рекомендуется:_ Конкретные примеры того, как новая система будет _использоваться_. Докажите, что дизайн эргономичен.

### 3.7. Безопасность и риски (необязательно)

1.  **Риски:** Что может сломаться?
2.  **Меры по снижению рисков:** Как мы это предотвратим?
3.  **Инвариантность:** Что должно оставаться неизменным (например, «Производительность не должна упасть ниже X»).

### 3.8. Критерии завершения

Контрольный список шагов для проверки (Тесты, Документация, Интеграция), определяющий, что значит «Готово».

### 3.9. Рассмотренные варианты

Альтернативы, которые были отклонены, и _почему_.

---

> [!NOTE] Частичное завершение
> Если предложение создается путем диктовки или с ограниченным контекстом, допустимо помечать разделы как `(TBD)` (Будет определено позже) или `(Placeholder)` (Заполнитель). Структура служит руководством к тому, что _должно_ быть известно, даже если это пока неизвестно.

## 4. Жизненный цикл

1.  **Черновик:** Создается автором через диктовку или AI-промпт.
2.  **PR:** Подается как Pull Request.
3.  **Обсуждение:** Обсуждается командой.
4.  **Консенсус:** Генерируется и проверяется :term[Документ Согласования]{href="./22_document_alignment.md" canonical="Alignment Document"}.
5.  **Обновление:** :term[Предложение]{canonical="Proposal"} обновляется в соответствии с :term[Согласованием]{canonical="Alignment"} (Консенсусом).
6.  **Заморозка:** :term[Предложение]{canonical="Proposal"} помечается как «Принято» и становится неизменяемым.
7.  **Исполнение:** :term[Предложение]{canonical="Proposal"} инициирует обновления в :term[Спецификации]{canonical="Specification"}.
8.  **Архивация:** Сохраняется как история.

## 5. Характеристики

- **Сроки:** Создается примерно за 1 день.
- **Обновления:** Пишется один раз, чтобы зафиксировать изменение видения.
- **Природа:** Сохраняемый/Исторический.
- **Источник Истины:** **Для Намерений**.
- **Аналогия:** RFC / Один :term[Акт]{canonical="Act"}.

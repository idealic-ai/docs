# 21: Компания/Предложение

> [!DEFINITION] Документ-предложение
> Временный артефакт предложения, используемый для изложения желания изменить, улучшить или расширить что-либо до начала исполнения.
>
> Sidenote:
> - Часть: :term[02: Компания/Процесс]{href="./02_process.md"}
> - Далее следует: :term[22: Компания/Согласование]{href="./22_document_alignment.md"}
> - Ранее известен как: Документ о намерениях, Документ об эволюции

## 1. Ключевая философия

Документ-предложение по сути является **:term[RFC]{canonical="Request for Comments"} (Запросом на комментарии)**. Он пишется **один раз** для каждой инициативы, чтобы обозначить желание перемен. Он возникает потому, что мы не можем написать спецификацию за один раз; мы должны разбить проблему на шаги. Одно Предложение примерно соответствует **Одному :term[Акту]{canonical="Act"}** работы.

Он **Сохраняется**. Он служит исторической записью изменения видения и становится **Источником Истины о Намерении**.

## 2. Необходимость

Почему мы пишем Документ-предложение вместо того, чтобы сразу кодировать?

- **Преодоление «чистого листа»:** Мы не можем автоматизировать человеческое намерение. Предложение заставляет нас извлекать мысли из подсознания. **Диктовка** — предпочтительный метод для преодоления ступора и создания первоначального контента.
- **Источник задач:** Этот документ — основа, из которой создаются конкретные инженерные задачи. Он гарантирует, что работа разбита на атомарные, управляемые части (например, задачи на 1 день).
- **Разделение ответственности:** Он отделяет «Что мы хотим» от «Как мы это реализуем». Это позволяет нам обсуждать ценность идеи, не увязая в синтаксисе.
- **Безопасное исследование:** Он позволяет предлагать радикальные изменения, не нарушая источник истины. Если Предложение отклонено, теряется только текстовый файл.
- **Контекст для машины:** LLM требуют точного контекста. Этот документ предоставляет «инструкцию» (prompt) для машины (и команды).

## 3. Структура (Шаблон)

Документ-предложение следует строгой повествовательной структуре, предназначенной для проверки логики и безопасности. Следующие разделы являются **Стандартом**, но могут быть адаптированы, если другая структура лучше служит истине.

### 3.1. Контекст (Эволюция)

_Повествовательный шаблон:_ «Мы думали X, но узнали Y, поэтому мы должны сделать Z».

1.  **Исходное предположение:** Во что мы верили раньше?
2.  **Поворотный момент (Открытие):** Что изменилось? (Найден баг, новое требование, озарение).
3.  **Заключение:** Почему изменения необходимы именно сейчас?

### 3.2. Проблема и Область (Контракт)

1.  **Проблема:** Конкретное, опровергаемое утверждение о том, что сломано.
2.  **Область (Негативное пространство):** Явный список того, что мы **НЕ** делаем.
3.  **Сравнение:** Таблица «До и После» для выделения разницы.

### 3.3. Намерения (Атомарные изменения)

**Ядро.** Декомпозиция решения на гранулированные, независимые единицы изменений.

_Формат для каждого Намерения:_

- **Заголовок:** Краткое резюме.
- **Тип:** {Исправление бага / Новая функция / Чистка кода / Рефакторинг}
- **Цель:** {Модуль / Файл / Компонент}
- **Обоснование:** Почему необходимо это конкретное изменение (исторический контекст).
- **Diff/Логика:** Абстрактное представление изменения (псевдокод, интерфейс или описание логики). **Без кода реализации.**

### 3.4. Визуальная модель (Опционально)

_Рекомендуется:_ **Диаграмма Mermaid**, представляющая рабочий процесс, конечный автомат или взаимодействие. Используйте, если текста недостаточно для отражения сложности.

### 3.5. Паттерны использования (Опционально)

_Рекомендуется:_ Конкретные примеры того, как новая система будет _использоваться_. Докажите, что дизайн эргономичен.

### 3.6. Безопасность и Риски (Опционально)

1.  **Риски:** Что может сломаться?
2.  **Меры по снижению:** Как мы это предотвратим?
3.  **Инвариантность:** Что должно оставаться неизменным (например, «Производительность не должна падать ниже X»).

### 3.7. Критерии завершения

Контрольный список шагов для проверки (Тесты, Документация, Интеграция), определяющий, что значит «Готово».

### 3.8. Рассмотренные варианты

Альтернативы, которые были отклонены, и _почему_.

---

> [!NOTE] Частичное завершение
> Если предложение создается с помощью диктовки или при ограниченном контексте, допустимо помечать разделы как `(TBD)` или `(Заглушка)`. Структура служит руководством к тому, что _должно_ быть известно, даже если это пока не так.

## 4. Жизненный цикл

1.  **Черновик:** Создается автором с помощью диктовки или AI-промпта.
2.  **PR:** Отправляется как Pull Request.
3.  **Обсуждение:** Обсуждается командой.
4.  **Доработка:** Обновляется на основе контекста из :term[22: Компания/Согласование]{href="./22_document_alignment.md"}.
5.  **Устаревание:** Сохраняется как история, но заменяется Спецификацией.

## 5. Характеристики

- **Сроки:** Создается примерно за 1 день.
- **Обновления:** Пишется один раз, чтобы зафиксировать изменение видения.
- **Характер:** Сохраняемый/Исторический.
- **Источник Истины:** **Для Намерения**.
- **Аналогия:** RFC / Один Акт.
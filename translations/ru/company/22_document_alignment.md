# 22: Компания/Согласование

> [!DEFINITION] Документ Согласования
> Автоматически сгенерированный синтез процесса ревью, который фиксирует общее согласие, разрешенные конфликты и точные инструкции для выполнения.

> Sidenote:
> - Часть: :term[02: Компания/Процесс]{href="./02_process.md" canonical="02: Company/Process"}
> - Генерируется: :term[51: Промпт/Согласование]{href="./51_prompt_alignment.md" canonical="51: Prompt/Alignment"}
> - Предшествует: Обновлениям :term[20: Компания/Спецификация]{href="./20_document_spec.md" canonical="20: Company/Specification"}

## 1. Основная философия

Документ Согласования — это **контракт**. Он обобщает комментарии и решения, принятые во время ревью Pull Request'а по :term[Документу Предложения (21)]{href="./21_document_proposal.md" canonical="21: Proposal Document"}.

Он **одноразовый**. Он работает как «экстрактор контекста», отфильтровывая шум обсуждения и оставляя чистый набор действенных **Намерений**. Эти намерения служат **проверочным тестом**:

- Правильно ли мы поняли обратную связь?
- Ясна ли реакция на обратную связь?

Если Документ Согласования точен, автор использует его для **полуавтоматического исправления** Документа Предложения.

> [!WARNING] НЕ РЕДАКТИРУЙТЕ ВРУЧНУЮ И НЕ КОММИТЬТЕ
> Этот документ **генерируется автоматически**. Если Документ Согласования некорректен или не передает нюансы обсуждения, **не редактируйте его**. Вместо этого добавьте уточняющие комментарии в Pull Request и **сгенерируйте** документ заново. Это гарантирует, что машина полностью понимает контекст.
>
> **НЕ КОММИТЬТЕ ЭТОТ ФАЙЛ.** Это локальный артефакт для проверки согласованности между машиной и автором. В репозиторий коммитятся только Предложения и Спецификации.

## 2. Зачем это нужно

Зачем мы генерируем этот документ?

- **Проверка понимания:** Это доказывает, что цикл обратной связи замкнут. Если ИИ не может правильно обобщить общее мнение, значит, люди выражались недостаточно ясно.
- **Локальная проверка:** Он служит локальным тестом для автора, чтобы убедиться, что машина (а значит, и команда) полностью поняла обратную связь, прежде чем переходить к исполнению.
- **Синтез знаний:** Он превращает ветвистое обсуждение в плоский список технических требований. Он отфильтровывает шум и сохраняет суть.
- **Инструкция для машины:** Он служит проверенными входными данными для ИИ, чтобы выполнить изменения.

## 3. Процесс

1.  **Обсуждение:** Команда обсуждает :term[21: Компания/Предложение]{href="./21_document_proposal.md" canonical="21: Company/Proposal"} в Pull Request'е.
2.  **Генерация:** Агент ИИ сканирует комментарии и генерирует Документ Согласования (Время: ~5 минут через Промпт).
3.  **Ревью (самопроверка):** Автор просматривает сгенерированные Намерения.
    - _Учтена ли обратная связь?_
    - _Верно ли итоговое решение?_
4.  **Внесение правок:** Автор использует проверенный Документ Согласования для обновления :term[21: Компания/Предложение]{href="./21_document_proposal.md" canonical="21: Company/Proposal"}. Это гарантирует, что Предложение останется единственным источником намерений.
5.  **Утверждение:** Установка статуса готовности для PR сигнализирует о достижении консенсуса. Документ Согласования выбрасывается, а согласованные изменения коммитятся в Предложение/Спецификацию.

## 4. Структура

Документ Согласования (Резюме ревью) содержит:

- **Обзор:** Краткое изложение обсуждения (согласия, разногласия, выводы).
- **Список Намерений:** Атомарные, детализированные технические задачи, выведенные из комментариев.
- **Отчет о покрытии:** Сопоставление каждого комментария с конкретным Намерением, чтобы убедиться, что ничего не упущено.
- **Оценка от LLM:** Беспристрастный анализ качества решения и обсуждения.

## 5. Характеристики

- **Время:** ~5 минут на генерацию через Промпт.
- **Роль:** Проверочный тест и источник правок для Предложения.
- **Природа:** Одноразовый / для одного использования (локальный артефакт).
- **Источник истины:** **Для консенсуса**.
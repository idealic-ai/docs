# 22: Компания/Согласование

> [!DEFINITION] Документ Согласования
> Автоматически сгенерированный синтез процесса рецензирования, который фиксирует общее согласие, разрешённые конфликты и точные инструкции для выполнения.
>
> Sidenote:
> - Часть: :term[02: Компания/Процесс]{href="./02_process.md" canonical="Company/Process"}
> - Генерируется: :term[51: Промпт/Согласование]{href="./51_prompt_alignment.md" canonical="Prompt/Alignment"}
> - Предшествует: Обновлениям :term[20: Компания/Спецификация]{href="./20_document_spec.md" canonical="Company/Specification"}

## 1. Основная Философия

Документ Согласования — это **договор**. Он обобщает комментарии и решения, принятые во время рецензирования :term[Пулл-реквеста]{canonical="Pull Request"} для :term[21: Документа-Предложения]{href="./21_document_proposal.md" canonical="Proposal Document"}.

Он **одноразовый**. Он действует как «извлекатель контекста», отфильтровывая шум обсуждения в чистый набор действенных **:term[Намерений]{canonical="Intent"}**. Эти намерения служат **:term[Проверочным тестом]{canonical="Validation Test"}**:

- Поняли ли мы обратную связь?
- Ясна ли реакция на обратную связь?

Если Документ Согласования точен, автор использует его для **полуавтоматического исправления** :term[Документа-предложения]{canonical="Proposal Document"}.

> [!WARNING] НЕ РЕДАКТИРУЙТЕ ВРУЧНУЮ И НЕ КОММИТЬТЕ
> Этот документ **генерируется автоматически**. Если Документ Согласования неверен или не отражает нюансы обсуждения, **не редактируйте его**. Вместо этого добавьте уточняющие комментарии в :term[Пулл-реквест]{canonical="Pull Request"} и **сгенерируйте документ заново**. Это гарантирует, что машина полностью понимает контекст.
>
> **НЕ КОММИТЬТЕ ЭТОТ ФАЙЛ.** Это локальный артефакт для проверки взаимодействия между машиной и автором. В репозиторий коммитятся только :term[Предложения]{canonical="Proposal"} и :term[Спецификации]{canonical="Specification"}.

## 2. Необходимость

Зачем мы генерируем этот документ?

- **Проверка понимания:** Это доказывает, что цикл обратной связи замкнут. Если ИИ не может правильно обобщить достигнутое согласие, значит, люди выражались неясно.
- **Локальная проверка:** Он служит локальным тестом для автора, чтобы убедиться, что машина (а значит, и команда) полностью поняла обратную связь перед тем, как переходить к выполнению.
- **Синтез знаний:** Он превращает ветвистое обсуждение в простой список технических требований. Он отфильтровывает шум и сохраняет главное.
- **Инструкция для машины:** Он служит проверенными входными данными для ИИ, чтобы выполнить изменения.

## 3. Процесс

1.  **Обсуждение:** Команда обсуждает :term[21: Компания/Предложение]{href="./21_document_proposal.md" canonical="Company/Proposal"} в :term[Пулл-реквесте]{canonical="Pull Request"}.
2.  **Генерация:** ИИ-агент сканирует комментарии и генерирует Документ Согласования (Время: ~5 минут через :term[Промпт]{canonical="Prompt"}).
3.  **Рецензирование (Самопроверка):** Автор проверяет сгенерированные :term[Намерения]{canonical="Intent"}.
    - _Отражена ли обратная связь?_
    - _Верно ли решение?_
4.  **Внесение исправлений:** Автор использует проверенный Документ Согласования для обновления :term[21: Компания/Предложение]{href="./21_document_proposal.md" canonical="Company/Proposal"}. Это гарантирует, что :term[Предложение]{canonical="Proposal"} остаётся единственным источником намерений.
5.  **Подтверждение:** Пометка :term[ПР]{canonical="PR"} как готового сигнализирует о том, что «:term[Консенсус]{canonical="Consensus"} достигнут». Документ Согласования удаляется, а согласованные изменения коммитятся в :term[Предложение]{canonical="Proposal"}/:term[Спецификацию]{canonical="Specification"}.

## 4. Структура

Документ Согласования (Итоги рецензирования) содержит:

- **Обзор:** Общая сводка обсуждения (соглашения, разногласия, выводы).
- **Список :term[Намерений]{canonical="Intent"}:** Атомарные, детализированные технические задачи, полученные из комментариев.
- **Отчёт о покрытии:** Соответствие каждого комментария конкретному :term[Намерению]{canonical="Intent"}, что гарантирует, что ничего не упущено.
- **Оценка :term[LLM]{canonical="LLM"}:** Беспристрастный анализ качества решения и обсуждения.

## 5. Характеристики

- **Сроки:** ~5 минут на генерацию через :term[Промпт]{canonical="Prompt"}.
- **Роль:** :term[Проверочный тест]{canonical="Validation Test"} и источник исправлений для :term[Предложения]{canonical="Proposal"}.
- **Характер:** Одноразовый / для одного использования (Локальный артефакт).
- **Источник истины:** **Для рецензирования** (:term[Консенсус]{canonical="Consensus"}).

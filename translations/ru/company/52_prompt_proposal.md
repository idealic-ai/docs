# 52: Промпт/Предложение

> [!DEFINITION] Генератор Предложений
> Структурный движок, который синтезирует сырой контекст (диктовку, заметки, чаты) в строгий документ :term[Предложения]{canonical="Proposal"} (RFC).
>
> Sidenote:
> - См. определение в :term[21: Компания/Предложение]{href="./21_document_proposal.md"}.
> - Цель: Превращает «поток сознания» в «стратегию».

## Правила Инвариантности

**СТРОГО СОБЛЮДАЙТЕ ЭТИ ПРАВИЛА:**

1.  **Соблюдение формата:** Вывод ДОЛЖЕН строго соответствовать структуре, определённой в [21: Компания/Предложение](./21_document_proposal.md).
2.  **Нормализация голоса:** В некоторой степени сохраняйте голос автора, но отдавайте приоритет **Ясности** и **Прямым Утверждениям** (см. [50: Промпт/Истина](./50_prompt_truth.md)). Удаляйте воду, нерешительность и эмоциональные высказывания.
3.  **Независимость от домена:** Адаптируйте терминологию к обнаруженному домену (например, Дизайн = «Аффорданс/Пользовательский путь», Код = «Архитектура/Контракт», Бизнес = «Рычаг/Затраты»).
4.  **Негативное пространство:** Вы ДОЛЖНЫ вывести или явно указать, что **НЕ** делается («Анти-скоуп»).
5.  **Альтернативы:** Вы ДОЛЖНЫ структурировать раздел «Варианты» так, чтобы показать не только выбранный путь, но и отвергнутые пути и _почему_ они были отвергнуты.
6.  **Без кода реализации:** :term[Предложения]{canonical="Proposal"} предназначены для **:term[Намерения]{canonical="Intent"}** и **Видения**. НЕ включайте код реализации, сниппеты или дифы. При необходимости используйте высокоуровневые схемы, абстрактные интерфейсы или диаграммы для передачи технической структуры.

## Протокол для Агента

**ОГРАНИЧЕНИЕ:** Вам разрешено делать ТОЛЬКО следующие внешние запросы:

1.  **HTTP GET** через curl на `https://idealic.academy/raw/simple-ru/company/02_process.md`
2.  **HTTP GET** через curl на `https://idealic.academy/raw/simple-ru/company/50_prompt_truth.md`

**Шаг 1: Загрузка обязательных документов (Обязательно)**
Вы **ДОЛЖНЫ** загрузить эти документы, чтобы понять Процесс Компании и Стандарты Написания перед созданием :term[Предложения]{canonical="Proposal"}.

```bash
# 1. Процесс и Истина (Основа)
curl https://idealic.academy/raw/simple-ru/company/02_process.md
curl https://idealic.academy/raw/simple-ru/company/50_prompt_truth.md

# 2. Определения артефактов (Контекст)
curl https://idealic.academy/raw/simple-ru/company/20_document_spec.md
curl https://idealic.academy/raw/simple-ru/company/21_document_proposal.md
curl https://idealic.academy/raw/simple-ru/company/22_document_alignment.md
```

### 1. Анализ входных данных

**Схема входных данных:**

```json
{
  "context": "Сырой текст, диктовка или вставленные логи чата.",
  "author": "Имя автора предложения (необязательно).",
  "domain": "Подсказка: 'Дизайн', 'Инженерия', 'Процесс' (необязательно - автоопределение)."
}
```

**Шаги анализа:**

1.  **Определите поворотный момент:** Найдите момент «Мы думали X, но узнали Y». Это **Контекст**.
2.  **Выделите проблему:** Что именно сломано? Это **Проблема**.
3.  **Определите изменение:** Каково конкретное вмешательство? Это **Решение**.
4.  **Извлеките конфликты:** Какие другие идеи упоминались и были отброшены? Это **Варианты**.

### 2. Рабочий процесс создания документа

Создайте markdown-файл с именем `{ГГГГ-ММ-ДД}_proposal_{slug_темы}.md`.

#### Раздел 1: Метаданные и заголовок

```markdown
# Предложение: {Название инициативы}

- **Статус:** Черновик
- **Автор:** {Автор}
- **Дата:** {Сегодня}
- **Домен:** {Обнаруженный домен}

> [!NOTE] Источник Намерения
> Получено из сырого контекста через [52: Промпт/Предложение](./52_prompt_proposal.md).
```

#### Раздел 2: Контекст (История)

_Инструкция: Обобщите предысторию. Почему мы говорим об этом сейчас?_

- **Шаблон:** «Исторически мы подходили к {Тема} делая {Старый способ}. Однако недавние события/открытия ({Триггер}) показали, что {Инсайт}.»

#### Раздел 3: Проблема (Пробел)

_Инструкция: Будьте конкретны. Используйте маркированные списки._

- **Ограничение:** Избегайте жалоб. Излагайте факты.
- **Пример:** «Текущая реализация X вызывает задержку Y, что неприемлемо для варианта использования Z.»

#### Раздел 4: Область действия (Негативное пространство)

_Инструкция: Определите границы. Чтобы предотвратить разрастание объёма работ, явно перечислите, что НЕ входит в область действия._

- **Формат:**
  - **МЫ ДЕЛАЕМ:** {Конкретное действие}
  - **МЫ НЕ ДЕЛАЕМ:** {Связанное, но исключённое действие}

#### Раздел 5: Предлагаемое решение (Видение)

_Инструкция: Высокоуровневое архитектурное или дизайнерское видение. Строго БЕЗ кода реализации. Сосредоточьтесь на «Что» и «Почему», а не на «Как»._

- **Основная концепция:** «Большая идея».
- **Механизм:** Как это работает (кратко).
- **Выгода:** Что мы получаем?

#### Раздел 6: Варианты (Рассмотренные альтернативы)

_Инструкция: Это критически важно для RFC. Перечислите 1-2 альтернативы, которые были (или могли быть) рассмотрены, и объясните, почему предлагаемое решение лучше._

- **Вариант А (Отклонён):** {Описание}
  - _Причина отклонения:_ {Причина: например, «Слишком сложно», «Технический долг», «Плохой UX»}
- **Вариант Б (Отклонён):** {Описание}
  - _Причина отклонения:_ {Причина}

#### Раздел 7: Цель

_Инструкция: Перечислите файлы, модули или документы, которые потребуется изменить._

### 3. Финальная доработка

1.  **Проверьте тон:** Убедитесь, что он звучит профессионально, но не роботизированно. Используйте активный залог.
2.  **Проверьте ссылки:** Убедитесь, что внутренние ссылки на другие документы компании используют правильные относительные пути, если на них есть ссылки.

## Приложение: Рабочий процесс - Применение Согласования

**Триггер:** Пользователь запрашивает «Применить :term[Согласование]{canonical="Alignment"} к :term[Предложению]{canonical="Proposal"}» или предоставляет :term[Документ Согласования]{canonical="Alignment Document"} для обновления :term[Предложения]{canonical="Proposal"}.

**Контекст:**
[Документ Согласования](./22_document_alignment.md) представляет собой _Консенсус_, достигнутый в ходе рассмотрения. Он временный. :term[Предложение]{canonical="Proposal"} должно быть обновлено, чтобы отразить этот консенсус и оставаться «Источником Истины для :term[Намерения]{canonical="Intent"}».

**Инструкции (Полуавтоматический режим):**

1.  **Этап 1: Планирование (Интерактивный):**
    - **Шаг 1:** Прочтите :term[Документ Согласования]{canonical="Alignment Document"} и извлеките все **:term[Намерения]{canonical="Intent"}**.
    - **Шаг 2:** Представьте пользователю **План действий**.
      - Перечислите каждое :term[Намерение]{canonical="Intent"}, которое нужно применить.
      - Кратко объясните, _куда_ в :term[Предложение]{canonical="Proposal"} оно будет интегрировано.
    - **Шаг 3:** Сделайте паузу и запросите у пользователя подтверждение для продолжения.

2.  **Этап 2: Выполнение (Итеративный):**
    - **Цикл:** Для КАЖДОГО :term[Намерения]{canonical="Intent"} в Плане:
      1.  **Объясните:** «Применение :term[Намерения]{canonical="Intent"} #{N}: {Название}...»
      2.  **Предпросмотр:** Покажите конкретный дифф или текстовое изменение, которое вы собираетесь внести.
      3.  **Подтвердите:** Спросите пользователя «Применить это изменение?»
      4.  **Выполните:** Если подтверждено, отредактируйте файл.
      5.  **Повторяйте**, пока все :term[намерения]{canonical="Intent"} не будут применены.

3.  **Этап 3: Завершение:**
    - После применения всех :term[намерений]{canonical="Intent"}, убедитесь, что документ логически выстроен.
    - Удалите все «Открытые вопросы», которые были решены :term[намерениями]{canonical="Intent"}.

**Стратегии интеграции:**

- **Обработка отклонений:**
  - Если Консенсус (:term[Согласование]{canonical="Alignment"}) отклонил первоначальную идею Автора:
    1.  Переместите исходный текст из раздела **Предлагаемое решение** в **Варианты (Отклонённые)**.
    2.  Запишите _новый_ согласованный подход в разделе **Предлагаемое решение**.
    3.  Добавьте обоснование из :term[Согласования]{canonical="Alignment"} в поле «Причина отклонения».
- **Обработка ограничений:**
  - Если :term[Согласование]{canonical="Alignment"} выявило новые ограничения (например, «Должна быть поддержка мобильных устройств»), добавьте их в раздел **Область действия** или **Проблема**.

**Цель:** Итоговое :term[Предложение]{canonical="Proposal"} должно читаться так, как будто оно было написано таким с самого начала — уверенно, ясно и согласованно.

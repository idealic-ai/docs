# 52: Промпт/Предложение

> [!DEFINITION] Генератор Предложений
> Структурный движок, который синтезирует сырой контекст (диктовку, заметки, чаты) в строгий Документ Предложения (RFC).
>
> Sidenote:
> - См. определение в :term[21: Компания/Предложение]{href="./21_document_proposal.md"}.
> - Цель: Превращает «поток сознания» в «стратегию».

## Правила Инвариантности

**СТРОГО ПРИДЕРЖИВАЙТЕСЬ ЭТИХ ПРАВИЛ:**

1.  **Соблюдение формата:** Вывод ДОЛЖЕН строго соответствовать структуре, определенной в [21: Компания/Предложение](./21_document_proposal.md).
2.  **Нормализация стиля:** Частично сохраняйте авторский стиль, но отдавайте приоритет **Ясности** и **Прямым Утверждениям** (см. [50: Промпт/Истина](./50_prompt_truth.md)). Убирайте лишние слова, колебания и эмоциональные отступления.
3.  **Независимость от домена:** Адаптируйте терминологию к обнаруженному домену (например, Дизайн = «Аффорданс/Пользовательский сценарий», Код = «Архитектура/Контракт», Бизнес = «Рычаги/Затраты»).
4.  **Отрицательное пространство:** Вы ДОЛЖНЫ делать вывод или прямо указывать, что **НЕ** делается («Анти-скоуп»).
5.  **Альтернативы:** Вы ДОЛЖНЫ структурировать раздел «Варианты» так, чтобы показать не только выбранный путь, но и отвергнутые пути и _почему_ они были отвергнуты.
6.  **Без кода реализации:** :term[Предложения]{canonical="Proposal"} предназначены для **Намерений** и **Видения**. НЕ включайте код реализации, фрагменты или diff. Используйте высокоуровневые схемы, абстрактные интерфейсы или диаграммы для передачи технической структуры, если это необходимо.

## Протокол для Агента

**ОГРАНИЧЕНИЕ:** Вам разрешено делать ТОЛЬКО следующие внешние :term[запросы]{canonical="Request"}:

1.  **HTTP GET** через curl на `https://idealic.academy/raw/simple-ru/company/02_process.md`
2.  **HTTP GET** через curl на `https://idealic.academy/raw/simple-ru/company/50_prompt_truth.md`

**Шаг 1: Загрузите необходимые документы (обязательно)**
Вы **ДОЛЖНЫ** загрузить эти документы, чтобы понять Процесс Компании и Стандарты Написания перед созданием :term[Предложения]{canonical="Proposal"}.

> [!IMPORTANT] Раздельные Запросы
> Вы должны запрашивать каждый документ в **отдельном** блоке bash/вызове инструмента. Это предотвратит усечение вывода, гарантируя получение полного контекста каждого файла.

```bash
# 1. Процесс и Истина (Основа)
curl https://idealic.academy/raw/simple-ru/company/02_process.md
```

```bash
curl https://idealic.academy/raw/simple-ru/company/50_prompt_truth.md
```

```bash
# 2. Определения артефактов (Контекст)
curl https://idealic.academy/raw/simple-ru/company/20_document_spec.md
```

```bash
curl https://idealic.academy/raw/simple-ru/company/21_document_proposal.md
```

```bash
curl https://idealic.academy/raw/simple-ru/company/22_document_alignment.md
```

### 1. Анализ входных данных

**Схема входных данных:**

```json
{
  "type": "object",
  "properties": {
    "context": {
      "type": "string",
      "description": "Исходный текст, диктовка или вставленные логи чата, содержащие мысли пользователя."
    },
    "author": {
      "type": "string",
      "description": "Имя автора предложения (необязательно).",
      "default": "User"
    },
    "domain": {
      "type": "string",
      "enum": ["Design", "Engineering", "Process", "Business"],
      "description": "Основной домен предложения. Если не указан, определяется из контекста."
    }
  },
  "required": ["context"]
}
```

**Шаги анализа:**

1.  **Определите поворотный момент:** Найдите момент «Мы думали X, но узнали Y». Это **Контекст**.
2.  **Выделите проблему:** Что именно сломано? Это **Проблема**.
3.  **Определите изменение:** Каково конкретное вмешательство? Это **Решение**.
4.  **Извлеките конфликты:** Какие другие идеи были упомянуты и отброшены? Это **Варианты**.

### 2. Процесс создания документа

Создайте markdown-файл с именем `{ГГГГ-ММ-ДД}_proposal_{тема_slug}.md`.

#### Раздел 1: Метаданные и заголовок

```markdown
# Предложение: {Название инициативы}

- **Статус:** Черновик
- **Автор:** {Автор}
- **Дата:** {Сегодня}
- **Домен:** {Обнаруженный домен}

> [!NOTE] Источник Намерения
> Сформировано из сырого контекста через [52: Промпт/Предложение](./52_prompt_proposal.md).
```

#### Раздел 2: Контекст (Эволюция)

_Инструкция: Обобщите предысторию. Почему мы говорим об этом сейчас?_

- **Шаблон:** «Мы думали X, но узнали Y, поэтому должны сделать Z».

#### Раздел 3: Проблема и Область действия (Контракт)

_Инструкция: Будьте конкретны. Используйте маркированные списки._

- **Проблема:** Что сломано?
- **Область действия (Отрицательное пространство):** Чего мы **НЕ** делаем?
- **Сравнение:** Таблица «Текущее vs. Предлагаемое».

#### Раздел 4: Намерения (Атомарные изменения)

_Инструкция: Разбейте решение на мельчайшие единицы. Это ЯДРО предложения._

- **Структура каждого Намерения:**
  - **Заголовок**
  - **Тип** (Исправление ошибки/Новая функция/и т.д.)
  - **Цель** (Файл/Модуль)
  - **Обоснование**
  - **Diff/Логика** (Только абстрактно)

#### Раздел 5: Визуальная модель (необязательно)

_Инструкция: Рекомендуется, если поток сложен. Используйте Mermaid._

#### Раздел 6: Паттерны использования (необязательно)

_Инструкция: Покажите, как используется новая система (UX/DX)._

#### Раздел 7: Безопасность и риски (необязательно)

_Инструкция: Риски, способы их смягчения и инварианты._

#### Раздел 8: Критерии завершения

_Инструкция: Чек-лист для «Определения готовности»._

#### Раздел 9: Рассмотренные варианты

_Инструкция: Перечислите 1-2 альтернативы, которые были отклонены, и укажите причину._

### 3. Финальная доработка

1.  **Проверьте тон:** Убедитесь, что текст звучит профессионально, но не роботизированно. Используйте активный залог.
2.  **Проверьте ссылки:** Убедитесь, что внутренние ссылки на другие документы компании используют правильные относительные пути, если они есть.

## Приложение: Процесс — Применение Согласования

**Триггер:** Пользователь запрашивает «Применить Согласование к Предложению» или предоставляет :term[Документ Согласования]{canonical="Alignment Document"} для обновления :term[Предложения]{canonical="Proposal"}.

**Контекст:**
[Документ Согласования](./22_document_alignment.md) представляет _Консенсус_, достигнутый в ходе обсуждения. Он временный. [Предложение](./21_document_proposal.md) должно быть обновлено, чтобы отразить этот консенсус и оставаться «Источником Истины для Намерения».

**Инструкции (Полуавтоматический режим):**

1.  **Фаза 1: Планирование (Интерактивно):**
    - **Шаг 1:** Прочтите :term[Документ Согласования]{canonical="Alignment Document"} и извлеките все **Намерения**.
    - **Шаг 2:** Представьте пользователю **План действий**.
      - Перечислите каждое Намерение, которое будет применено.
      - Кратко объясните, _куда_ в :term[Предложении]{canonical="Proposal"} оно будет интегрировано.
    - **Шаг 3:** Сделайте паузу и запросите подтверждение пользователя для продолжения.

2.  **Фаза 2: Исполнение (Итеративно):**
    - **Цикл:** Для КАЖДОГО Намерения в Плане:
      1.  **Объясните:** «Применяю Намерение #{N}: {Заголовок}...»
      2.  **Предпросмотр:** Покажите конкретный diff или изменение текста, которое вы собираетесь внести.
      3.  **Подтвердите:** Спросите пользователя: «Применить это изменение?»
      4.  **Выполните:** Если подтверждено, отредактируйте файл.
      5.  **Повторяйте**, пока все намерения не будут применены.

3.  **Фаза 3: Завершение:**
    - Как только все намерения применены, проверьте, что документ логически выстроен.
    - Удалите все «Открытые вопросы», которые были решены намерениями.

**Стратегии интеграции:**

- **Обработка отклонений:**
  - Если Консенсус (:term[Согласование]{canonical="Alignment"}) отклонил первоначальную идею Автора:
    1.  Переместите исходный текст из **Предлагаемого решения** в **Варианты (Отклоненные)**.
    2.  Опишите _новый_ согласованный подход в **Предлагаемом решении**.
    3.  Добавьте обоснование из :term[Согласования]{canonical="Alignment"} в поле «Причина отклонения».
- **Обработка ограничений:**
  - Если :term[Согласование]{canonical="Alignment"} выявило новые ограничения (например, «Должна быть поддержка мобильных устройств»), добавьте их в **Область действия** или **Проблему**.

**Цель:** Итоговое :term[Предложение]{canonical="Proposal"} должно читаться так, как будто оно было написано таким с самого начала — уверенно, ясно и согласованно.

# 302: Ideator/Resolver

## 1. Введение

Этот документ описывает **Систему: Resolver**, мощный `Idea Transformer`, который позволяет составлять и динамически связывать `Ideas`. Являясь важным дополнением к [Системе: Storage](./301_ideator_storage.md), главная задача Resolver — взять высокоуровневую `Idea` со ссылками на другие `Ideas` и преобразовать её в одну цельную, самодостаточную и готовую к выполнению `Idea`, раскрыв все ссылки.

Этот механизм позволяет делать `Ideas` модульными и повторно используемыми блоками. Это предотвращает дублирование данных и даёт возможность создавать сложные системы из более простых, версионированных компонентов.

## 2. Основная концепция: Разрешение как Idea Transformer

Сервис Resolver работает как `Idea Transformer` без состояния, который обогащает `Idea`, загружая и встраивая её зависимости.

- **Входные данные**: `Idea`, чья `schema` или `context` содержит одну или несколько ссылок на другие `Ideas`.
- **Процесс**: Resolver анализирует входную `Idea`, чтобы найти ссылки. Для каждой ссылки он запрашивает настроенный набор сервисов `Storage`, чтобы получить содержимое соответствующей `Idea`. Затем он разумно встраивает полученное содержимое в исходную `Idea`.
- **Результат**: Новая, «наполненная» `Idea`, в которой все ссылки заменены их реальным содержимым. Это делает её полной, самодостаточной единицей, готовой к выполнению или дальнейшей обработке.

## 3. Ключевые характеристики

### 3.1. Синтаксис ссылок

Хотя конкретная реализация может отличаться, ссылки должны быть выражены в ясном и однозначном формате, похожем на URI. Этот формат должен позволять указывать уникальное имя `Idea`, а также, при необходимости, версию или ветку.

_Пример: Схема, объединяющая несколько `Ideas` с помощью `allOf`._

```json
{
  "type": "object",
  "allOf": [
    { "$ref": "idea://my-org/article-template?version=1.2.0" },
    { "$ref": "idea://my-org/system-prompts/chain-of-thought?branch=latest" }
  ]
}
```

### 3.2. Глубокое (рекурсивное) разрешение

Процесс разрешения — рекурсивный. Если раскрытая `Idea` сама содержит другие ссылки, Resolver продолжит их загружать и встраивать до тех пор, пока весь граф зависимостей не будет разрешён, в результате чего получится итоговая `
# 104: Концепция / Скрытое

> Sidenote:
>
> - Требует:
>   - [101: Концепция/Идея](./101_concept_idea.md)
> - Позволяет
>   - [001: Агент/Запрос](./001_agent_request.md)

> **Скрытое:** Использование внутренних знаний и логических способностей Большой Языковой Модели (LLM) (ее "скрытого пространства") для генерации результатов без явного, детерминированного кода. — [Глоссарий](./000_glossary.md)

## 1. Введение

Понятие **Скрытого** является фундаментальным для архитектуры системы, охватывая как процесс (**Скрытое Исполнение**), так и источник знаний (**Скрытое Пространство**). Это стандартный метод вычислений в системе, основанный на использовании Большой Языковой Модели (LLM) в качестве универсального интерпретатора. Этот подход позволяет системе преодолеть разрыв между входом `Idea` (`context`) и ее выходом (`solution`), перемещаясь по обширным внутренним знаниям LLM и упорядочивая их.

Этот подход является основой гибкости системы, позволяя создавать и выполнять рабочие процессы, даже если для составляющих их задач не написан явный, детерминированный код.

## 2. Скрытое Пространство: Океан Знаний

**Скрытое Пространство** — это обширное, многомерное представление знаний, закономерностей и взаимосвязей, которое LLM усваивает во время обучения. Это не база данных фактов, а сложная карта понятий, где близость и ориентация определяют семантические отношения. Большие языковые модели сильны именно благодаря богатству этого пространства, но их знания полезны только в том случае, если к ним можно эффективно получить доступ и направить их.

Основная сложность заключается не в существовании этих знаний, а в способности ориентироваться в них. Система предназначена для решения этой проблемы, предоставляя правильные вопросы и, что особенно важно, правильный контекст, чтобы направить LLM к нужным областям ее скрытого пространства.

## 3. Скрытое Исполнение: Активация Скрытого Пространства

**Скрытое Исполнение** — это процесс активации скрытого пространства для выполнения задачи. Оно происходит, когда система по умолчанию использует LLM, поскольку для обработки `Call` не зарегистрирован явный, детерминированный код (`Activity`).

Процесс выглядит следующим образом:

1.  Выполняется `Call` к `Tool` или `Idea`.
2.  Система определяет, что для данного `Call` нет зарегистрированного `Activity`.
3.  Система предоставляет LLM полный `context` и `schema` для желаемого `_output`.
4.  Задача LLM — перемещаться по своему скрытому пространству, используя предоставленный контекст в качестве ориентира, и сгенерировать `solution`, соответствующий выходной `schema`.

Это превращает LLM из простого генератора текста в динамический движок исполнения, который может на лету реализовывать новые интерфейсы.

## 4. Управление Контекстом: Организация Скрытого Пространства

Важнейшая функция системы — **оптимизировать организацию скрытого пространства** в рамках одного запроса. Это достигается за счет сложного управления контекстом с использованием различных "инструментальных хитростей" для фокусировки внимания LLM и направления ее рассуждений.

- **Богатый Контекст**: Предоставляя структурированную историю сообщений, объектов состояния и запросов пользователя, система подготавливает LLM, давая ей необходимую основу для понимания задачи.
- **Рассуждение на основе Схемы**: JSON Schema используется не только для проверки конечного результата, но и для направления самого процесса генерации. Она предоставляет чертеж для желаемого `solution`, заставляя LLM структурировать свои рассуждения и ограничивать свой путь в скрытом пространстве.
- **Инструкции и Инструменты**: `Instructions` и `Tools` действуют как мощные линзы, фокусируя LLM на определенной возможности или структуре рассуждений. Это "хитрости", которые помогают выбрать наиболее релевантный подраздел скрытого пространства для данной задачи.

Эффективное управление контекстом — это то, что делает скрытое исполнение надежным. Именно так система превращает огромный, недифференцированный океан знаний LLM в точный и полезный инструмент.

## 5. Стандарт для Оптимистичной Композиции

Скрытое Исполнение — это не исключение, а поведение по умолчанию. Система работает по "оптимистичному" принципу: она предполагает, что любой определенный интерфейс может быть реализован путем правильной организации скрытого пространства. `Activity` с детерминированным кодом рассматривается как постепенное улучшение — оптимизация для задач, требующих скорости, надежности или доступа к внешним API.

Такое поведение по умолчанию оказывает глубокое влияние на разработку:

- **Быстрое Прототипирование**: Разработчики могут определять и связывать в цепочку несколько `Tools` и `Ideas` в сложный `Plan`, не написав ни одной строки кода реализации. LLM выполняет весь рабочий процесс в скрытом режиме.
- **Бесшовная Композиция**: Она позволяет комбинировать `Ideas` и `Tools` от разных авторов и из разных источников, даже если их базовые реализации недоступны.
  > Sidenote: Эта концепция более подробно рассматривается в [Нормативный Акт 303: Идеатор/Реактор](../rfc/303_ideator_reactor.md).
- **Постепенная Кристаллизация**: Рабочий процесс может начать свою жизнь полностью в скрытом пространстве. По мере развития системы, узкие места в производительности или критические процессы могут быть выборочно "кристаллизованы" в `Activities` с явным кодом, не изменяя общую структуру рабочего процесса.

Делая скрытое исполнение поведением по умолчанию, система отдает приоритет гибкости и скорости итераций, позволяя создавать сложные агентные поведения с первого дня.
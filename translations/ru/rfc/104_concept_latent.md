# 104: Концепция/Скрытое

> Sidenote:
> - Требует:
>   - [101: Концепция/Идея](./101_concept_idea.md)
> - Открывает возможности для:
>   - [001: Агент/Запрос](./001_agent_request.md)

> **Скрытое (Latent):** Использование внутренних знаний и способности к рассуждению Большой Языковой Модели (LLM) (её «скрытого пространства») для генерации результатов без явного, детерминированного кода. — [Глоссарий](./000_glossary.md)

## Введение

Концепция **Скрытого** является фундаментальной для архитектуры системы. Она включает в себя как процесс (**Скрытое Исполнение**), так и источник знаний (**Скрытое Пространство**). Это основной метод вычислений в системе, который использует Большую Языковую Модель (LLM) в качестве универсального интерпретатора. Такой подход позволяет системе преодолеть разрыв между входом `Idea` (`context`) и его выходом (`solution`), управляя и организуя обширные внутренние знания LLM.

Этот подход является ключом к гибкости системы, позволяя создавать и выполнять рабочие процессы даже тогда, когда для составляющих их задач не написан явный, детерминированный код.

## Скрытое Пространство: Океан Знаний

**Скрытое Пространство** — это обширное, многомерное представление знаний, закономерностей и взаимосвязей, которое LLM усваивает во время своего обучения. Это не база данных фактов, а сложная карта концепций, где близость и ориентация определяют смысловые отношения. Большие языковые модели мощны именно благодаря богатству этого пространства, но их знания полезны только в том случае, если к ним можно получить доступ и эффективно их направить.

Основная проблема заключается не в существовании этих знаний, а в способности навигировать по ним. Система решает эту задачу, предоставляя правильные вопросы и, что особенно важно, правильный контекст, чтобы направить LLM к нужным областям её скрытого пространства.

## Скрытое Исполнение: Активация Скрытого Пространства

**Скрытое Исполнение** — это процесс активации скрытого пространства для выполнения задачи. Оно происходит, когда система по умолчанию использует LLM, потому что для обработки `Call` не зарегистрирован явный, детерминированный код (`Activity`).

Процесс выглядит так:

1.  Выполняется `Call` к `Tool` или `Idea`.
2.  Система определяет, что для `Call` не зарегистрировано ни одного `Activity`.
3.  Система предоставляет LLM полный `context` и `schema` для желаемого `_output`.
4.  Задача LLM — навигировать по своему скрытому пространству, используя предоставленный контекст в качестве руководства, и сгенерировать `solution`, соответствующий `schema` вывода.

Это превращает LLM из простого генератора текста в динамический движок исполнения, который может на лету реализовывать новые интерфейсы.

## Управление Контекстом: Организация Скрытого Пространства

Важнейшая функция системы — **оптимизировать организацию скрытого пространства** в рамках одного запроса. Она делает это с помощью сложного управления контекстом, используя различные «уловки, подобные инструментам», чтобы сфокусировать внимание LLM и направить её рассуждения.

- **Богатый Контекст**: Предоставляя структурированную историю сообщений, объектов состояния и запросов пользователя, система подготавливает LLM, давая ей необходимую основу для понимания задачи.
- **Рассуждение на основе Схемы**: JSON Schema используется не только для проверки конечного вывода, но и для направления самого процесса генерации. Она предоставляет чертёж для желаемого `solution`, заставляя LLM структурировать свои рассуждения и ограничивать свой путь в скрытом пространстве.
- **Инструкции и Инструменты**: `Instructions` и `Tools` действуют как мощные линзы, фокусируя LLM на конкретной возможности или структуре рассуждений. Это «уловки», которые помогают выбрать наиболее подходящий подраздел скрытого пространства для данной задачи.

Эффективное управление контекстом — вот что делает скрытое исполнение надёжным. Именно так система превращает огромный, недифференцированный океан знаний LLM в точный и полезный инструмент.

## Поведение по умолчанию для Оптимистичной Композиции

Скрытое Исполнение — это не исключение, а поведение по умолчанию. Система работает по «оптимистичному» принципу: она предполагает, что любой определённый интерфейс может быть реализован путём правильной организации скрытого пространства. `Activity` с детерминированным кодом рассматривается как прогрессивное улучшение — оптимизация для задач, требующих скорости, надёжности или доступа к внешним API.

Такое поведение по умолчанию оказывает глубокое влияние на разработку:

- **Быстрое Прототипирование**: Разработчики могут определять и связывать воедино несколько `Tools` и `Ideas` в сложный `Plan`, не написав ни единой строки кода реализации. LLM выполняет весь рабочий процесс в скрытом режиме.
- **Бесшовная Композиция**: Это позволяет комбинировать `Ideas` и `Tools` от разных авторов и из разных источников, даже если их базовые реализации недоступны.
- > Sidenote: Эта концепция более подробно рассматривается в [Акте 303: Идеатор/Реактор](../rfc/303_ideator_reactor.md).
- **Прогрессивная Кристаллизация**: Рабочий процесс может начать свою жизнь полностью в скрытом пространстве. По мере развития системы узкие места в производительности или критически важные процессы могут быть выборочно «кристаллизованы» в `Activities` с явным кодом, не изменяя при этом общую структуру рабочего процесса.

Делая скрытое исполнение поведением по умолчанию, система ставит в приоритет гибкость и скорость итераций, позволяя создавать сложное агентное поведение с самого первого дня.

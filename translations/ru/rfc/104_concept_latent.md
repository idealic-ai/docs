# 104: Концепт/Скрытое (Latent)

> Sidenote:
>
> - Требует:
>   - [Концепт/Идея](./101_concept_idea.md)
> - Открывает возможности для:
>   - [Агент/Запрос](./001_agent_request.md)

> **Скрытое (Latent):** Использование внутренних знаний и способности к рассуждению Большой Языковой Модели (LLM) (её «скрытого пространства») для генерации результатов без явного, детерминированного кода.
>
> — [Глоссарий](./000_glossary.md)

## 1. Введение

Концепция **Скрытого (Latent)** является фундаментальной для архитектуры системы. Она включает в себя как сам процесс (**Скрытое Выполнение**), так и источник знаний (**Скрытое Пространство**). Это стандартный метод вычислений в системе, который использует Большую Языковую Модель (LLM) в качестве универсального интерпретатора. Такой подход позволяет системе соединить входные данные `Idea` (`context`) с её выходными данными (`solution`), используя и упорядочивая обширные внутренние знания LLM.

Этот подход является ключом к гибкости системы. Он позволяет создавать и выполнять рабочие процессы, даже если для составляющих их задач не написан явный, детерминированный код.

## 2. Скрытое Пространство: Океан Знаний

**Скрытое Пространство** — это огромное, многомерное представление знаний, закономерностей и взаимосвязей, которые LLM усваивает во время своего обучения. Это не база данных с фактами, а сложная карта понятий, где близость и расположение определяют смысловые связи. Большие языковые модели так мощны именно из-за богатства этого пространства, но их знания полезны только в том случае, если к ним можно получить доступ и правильно их направить.

Основная сложность заключается не в существовании этих знаний, а в способности ориентироваться в них. Система решает эту проблему, задавая правильные вопросы и, что особенно важно, предоставляя нужный контекст, чтобы направить LLM к соответствующим областям её скрытого пространства.

## 3. Скрытое Выполнение: Активация Скрытого Пространства

**Скрытое Выполнение** — это процесс активации скрытого пространства для выполнения задачи. Оно происходит, когда система по умолчанию использует LLM, потому что для обработки `Call` не зарегистрировано явного, детерминированного кода (`Activity`).

Процесс выглядит следующим образом:

1.  Происходит вызов (`Call`) к `Tool` или `Idea`.
2.  Система определяет, что для этого вызова (`Call`) нет зарегистрированного `Activity`.
3.  Система предоставляет LLM полный `context` (контекст) и `schema` (схему) для желаемого `_output` (результата).
4.  Задача LLM — сориентироваться в своём скрытом пространстве, используя предоставленный контекст как ориентир, и сгенерировать `solution` (решение), которое соответствует выходной `schema`.

Это превращает LLM из простого генератора текста в динамический движок выполнения, который может на лету реализовывать новые интерфейсы.

## 4. Управление Контекстом: Упорядочивание Скрытого Пространства

Важнейшая функция системы — **оптимизировать организацию скрытого пространства** в рамках одного запроса. Она делает это с помощью продуманного управления контекстом, используя различные «инструментальные хитрости», чтобы сфокусировать внимание LLM и направить её логику.

- **Богатый Контекст**: Предоставляя структурированную историю сообщений, объектов состояния и запросов пользователя, система подготавливает LLM, давая ей необходимую основу для понимания задачи.
- **Логика на Основе Схемы**: JSON Schema используется не только для проверки конечного результата, но и для направления самого процесса генерации. Она предоставляет своего рода «чертёж» для желаемого `solution`, заставляя LLM структурировать свои рассуждения и ограничивать свой путь в скрытом пространстве.
- **Инструкции и Инструменты**: `Instructions` и `Tools` действуют как мощные линзы, фокусируя LLM на определённой возможности или логической структуре. Это «хитрости», которые помогают выбрать наиболее подходящий подраздел скрытого пространства для конкретной задачи.

Эффективное управление контекстом — это то, что делает скрытое выполнение надёжным. Именно так система превращает огромный, однородный океан знаний LLM в точный и полезный инструмент.

## 5. По Умолчанию для Оптимистичной Композиции

Скрытое Выполнение — это не исключение, а поведение по умолчанию. Система работает по «оптимистичному» принципу: она предполагает, что любой определённый интерфейс может быть реализован путём правильной организации скрытого пространства. `Activity` с детерминированным кодом рассматривается как прогрессивное улучшение — оптимизация для задач, требующих скорости, надёжности или доступа к внешним API.

Такой подход по умолчанию оказывает огромное влияние на разработку:

- **Быстрое Прототипирование**: Разработчики могут определять и связывать в цепочку несколько `Tools` и `Ideas` в сложный `Plan`, не написав ни единой строчки кода для их реализации. LLM выполняет весь рабочий процесс скрытым образом.
- **Бесшовная Композиция**: Это позволяет комбинировать `Ideas` и `Tools` от разных авторов и из разных источников, даже если их внутренняя реализация недоступна.
- > Sidenote: Эта концепция более подробно рассматривается в [RFC 303: Ideator/Reactor](../rfc/303_ideator_reactor.md).

  **Постепенная Кристаллизация**: Рабочий процесс может начать своё существование полностью в скрытом пространстве. По мере развития системы узкие места в производительности или критически важные процессы могут быть выборочно «кристаллизованы» в `Activities` с явным кодом, не изменяя общую структуру рабочего процесса.

Делая скрытое выполнение поведением по умолчанию, система ставит в приоритет гибкость и скорость итераций, что позволяет создавать сложное агентное поведение с самого первого дня.
# 008: Агент/Импорты

> **Импорт:** Это ключ, который определяет часть контекста из родительской среды для предоставления (`импорта`) исполняемому процессу. Его можно использовать для фокусировки внимания LLM при **Встроенном Скрытом** (Latent Inline) исполнении или для создания всего контекста при исполнении в **Области Модуля** (Module Scope). Управляется свойством `_imports`. — [Глоссарий](./000_glossary.md)

[004: Агент/Вызов](./004_agent_call.md) определяет высокоуровневые элементы управления для исполнения `Вызова`: **Область** (Встроенная или Модульная) и **Метод** (Явный или Скрытый). Протокол Импортов объясняет, как комбинировать эти элементы управления и управлять контекстом для каждого из результирующих шаблонов исполнения.

## Сочетание Области и Метода

1.  **Встроенное Явное (`_activity`)**: Это классический шаблон использования инструмента. LLM генерирует `params`, и хост немедленно выполняет локальную функцию. `_imports` здесь обычно не используются, так как Метод не является Скрытым.

2.  **Встроенное Скрытое (без `_activity`)**: LLM генерирует и `params`, и `_output` за один проход. Свойство `_imports` можно использовать для концентрации внимания LLM на конкретных частях контекста, чтобы предотвратить влияние на неё нерелевантной информации.

3.  **Модульное Явное (`_module` + `_activity`)**: LLM генерирует `params`. Затем система вызывает указанную Активность (`_activity`) из определенного `_module` в новом, изолированном контексте. Если указаны `_imports`, этот отфильтрованный контекст передается как дополнительный аргумент в код Активности.

4.  **Модульное Скрытое (`_module`, без `_activity`)**: LLM генерирует `params`. Затем система инициирует новый, изолированный вызов LLM, используя `Idea`, указанную в `_module` в качестве руководства. Контекст для этого нового вызова создается путем объединения собственного контекста модуля с данными, указанными в `_imports`.

## Фокусировка Области Видимости

Свойство `_imports` является основным механизмом контроля контекста, доступного для `Вызова`. Оно действует как «белый список», фильтруя родительскую среду и предоставляя для исполнения сфокусированную, ограниченную область видимости.

- **Во Встроенной Области**: `_imports` фокусируют внимание LLM.
- **В Модульной Области**: `_imports` определяют _весь контекст_ для изолированного исполнения.

## Предоставление и Запрос Контекста: Статические и Динамические Импорты

Свойство `_imports` в схеме `Инструмента` определяет, является ли контекст предварительно одобренным и **предоставленным** инструменту, или же он динамически **запрашивается** LLM во время выполнения.

- **Статические Импорты (Предоставление Контекста)**: Если свойство `_imports` является `const` значением (например, `_imports: { "const": ["user_request"] }`), контекст **предоставляется**. Разработчик `Инструмента` жестко закодировал тот самый контекст, который инструменту разрешено видеть.

- **Динамические Импорты (Запрос Контекста)**: Если свойство `_imports` является гибкой схемой (например, массив перечислений `_imports: { "type": "array", "items": { "enum": ["session_memory"] } }`), контекст **запрашивается**. LLM решает, какие из доступных импортов ей необходимы для генерации `Вызова`.

Этот динамический шаблон особенно эффективен в сочетании с системой подтверждения человеком (human-in-the-loop), что обеспечивает критически важный уровень прозрачности и контроля.

## Сила Ограниченного Контекста

- **Повышенная Безопасность и Фокусировка**: Ограничивая область видимости, Импорты предотвращают случайную утечку данных и фокусируют LLM, что приводит к более предсказуемым, точным и экономически эффективным исполнениям.
- **Улучшенная Модульность**: Импорты позволяют модулям (`Idea` и `Активности`) быть по-настоящему самодостаточными и повторно используемыми.
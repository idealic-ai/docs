# 007: Агент/Ввод

> **Сообщение ввода:** Контекстное сообщение, содержащее `schema` и данные `input`. Его наличие превращает `Idea` в `Ideator`, определяя ожидаемые входные данные. — [Глоссарий](./000_glossary.md)

> Sidenote:
> 
> - Требует: [101: Концепция/Идея](./101_concept_idea.md)
> - Позволяет: [103: Концепция/Идеатор](./103_concept_ideator.md)

Этот документ описывает **Протокол Ввода** — систему для определения структурированных входных данных для `Ideas`. Этот протокол вводит особый тип сообщения, которое, будучи включенным в контекст `Idea`, превращает ее из статичного элемента знаний в исполняемую, подобную функции сущность, известную как **Ideator**.

## Тип сообщения `Input`

Сообщение `Input` — это особый тип контекстного сообщения, предназначенный для формального объявления данных, которые принимает `Idea`. Это механизм, который фиксирует структурированные входные данные, используемые для получения конкретного `solution`, завершая "Триаду Идеи" и предоставляя полную, воспроизводимую запись творческого или вычислительного процесса.

Сообщение `Input` содержит два ключевых свойства:

1.  **`schema`**: Объект JSON Schema, который определяет структуру, типы и ограничения данных, ожидаемых `Idea`.
2.  **`input`**: Конкретный объект данных, который соответствует `schema` и представляет фактические значения, использованные для определенного выполнения.

Определяя свои входные данные таким структурированным образом, любая `Idea` может стать самоописывающей не только в своем выводе (`solution` и `schema`), но и в том, что ей требуется для генерации.

### Путь к простоте использования

Значительное преимущество этого протокола — его способность обеспечивать автоматическую генерацию пользовательского интерфейса. Поскольку `schema` для `input` явно определяет требуемые данные, система может динамически создавать форму с правильными полями, метками и проверкой. Это позволяет мгновенно предоставить любую `Idea` пользователю через функциональный интерфейс, что значительно снижает барьер для взаимодействия.

## От Идеи к Идеатору

Как описано в [101: Концепция/Идея](./101_concept_idea.md), наличие сообщения `Input` в контексте `Idea` является окончательным сигналом того, что это **Ideator** — `Idea`, которая выполняет работу. Она становится воспроизводимой функцией.

## Взаимодействие с Протоколом Инстансинга

Сообщение `Input` полностью совместимо с [011: Агент/Инстансинг](./011_agent_instancing.md), что позволяет использовать сложные стратегии получения данных при одновременной обработке нескольких экземпляров. Оно может работать в двух различных режимах:

1.  **Глобальный ввод**: Если сообщение `Input` предоставляется в контексте агента без свойства `_instance`, его данные `input` рассматриваются как глобальное значение. Оно неявно доступно каждому экземпляру, обрабатываемому в запросе. Это полезно для предоставления общих конфигураций, подсказок или параметров, которые применяются ко всем экземплярам одинаково.

2.  **Ввод для конкретного экземпляра**: Если сообщение `Input` включает идентификатор `_instance`, его данные `input` извлекаются непосредственно из состояния этого конкретного экземпляра. Это обеспечивает мощный механизм для переопределения данных для каждого экземпляра или для передачи уникальных данных каждого экземпляра в общий `Ideator`.

Эта возможность работы в двух режимах позволяет создавать гибкие и эффективные рабочие процессы с несколькими экземплярами, где один `Ideator` может быть настроен с базовым набором глобальных входных данных, а затем кастомизирован с помощью конкретных данных из каждого обрабатываемого им экземпляра.

## Инверсия: от Идеатора к Инструменту

Хотя `Ideator` является самодостаточной, исполняемой концепцией, для его интеграции в императивный рабочий процесс агента мы должны преобразовать его в **Инструмент**. Механический процесс превращения `Ideator`, ориентированного на вывод, в `Tool`, ориентированный на интерфейс, называется **инверсией**. Мы реструктурируем его компоненты, чтобы приоритет отдавался его входным данным.

`Idea` — это триада, определяемая ее выводом `schema` и `solution`:
`{ context, schema, solution }`

Чтобы преобразовать ее в `Tool`, мы ищем в ее `context` сообщение `Input`. Основной шаг инверсии — **повысить** свойства схемы `input`, чтобы они стали свойствами параметров верхнего уровня для `Tool` (подробности о структуре схемы Инструмента см. в [002: Агент/Инструмент](./002_agent_tool.md)).

Это создает определение `Tool`, которое по сути является сигнатурой функции, готовой к регистрации в системе агента и использованию в `Call`.
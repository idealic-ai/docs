# Акт 003: Агент/Действие

> **Действие:** Представьте `Действие` как реальное действие, стоящее за `Tool`. Если `Tool` — это кнопка «Проверить погоду», то `Действие` — это реальный программный код, который подключается к погодному сервису и получает информацию. Оно используется для задач, которые ИИ не может просто «знать» по памяти, например, для общения с другими сайтами или проверки базы данных. — [Глоссарий](./000_glossary.md)

> Sidenote: Этот документ основан на том, что мы узнали в [Акте 002: Агент/Tool](./002_agent_tool.md).

Этот документ объясняет, как `Tools` получают свою силу от реального, исполняемого кода. `Tool` говорит вам, *что* делает специальная возможность, а **`Действие`** — это код, который показывает, *как* она это делает.

## Две книги рецептов

Чтобы всё было в порядке, система использует два разных списка, или «реестра», чтобы отделить суть способности от способа её работы.

- **Реестр Tool-ов**: Это как меню в ресторане. В нём перечислены все способности (`Tools`) по названию и описано, что они делают (например, «Проверить погоду»).
- **Реестр Действий**: Это как секретная книга рецептов на кухне. Она содержит настоящие пошаговые инструкции (`Действия`) для приготовления каждого блюда из меню.

Такое разделение очень полезно. Это значит, что ИИ может просто думать о том, что есть в меню, не зная рецепта. Это также означает, что мы можем изменить рецепт (например, сделать его быстрее или использовать другой ингредиент), не перепечатывая всё меню.

## Добавление рецепта в книгу

`Действие` регистрируется с именем, которое связывает его с `Tool`.

```typescript
// Вот как мы добавляем рецепт (Действие) в книгу.
// Имя 'weatherCheck' должно совпадать с Tool в меню.
Activity.register('weatherCheck', async call => {
  const data = await weatherAPI.get(call.location);
  return { temperature: data.temp, conditions: data.desc };
});
```

## Два способа получить ответ: воображение против действия

Когда системе нужно использовать `Tool`, она может получить ответ двумя разными способами:

- **Воображаемый результат (Скрытое исполнение)**: Это когда ИИ просто использует свой сверхразум, чтобы найти ответ. Если вы зададите ему вопрос из викторины, ему не нужно будет искать ответ — он его просто «знает». Это способ по умолчанию, если нет специального кода для запуска.
> Sidenote: Подробнее о том, что означает «Скрытое», читайте здесь: [104: Концепция/Скрытое](./104_concept_latent.md)
- **Реальное выполнение (Явное исполнение)**: Это когда система запускает реальный код, чтобы получить ответ. Это необходимо для вещей, которые ИИ не может просто вообразить, например, для проверки погоды в реальном времени, поиска чего-либо в базе данных или использования сервиса другого веб-сайта.

## Как система решает, что делать

Система умна, и ей не нужно каждый раз говорить, что делать. Она следует простому набору правил, чтобы решить, вообразить ли ответ или запустить реальный код.

1.  **Конкретные инструкции**: Если у `Tool` есть специальная пометка «Использовать этот конкретный рецепт», система всегда будет следовать этой инструкции.
2.  **Совпадение имён (Простой способ)**: Если `Tool` называется «weatherCheck», система автоматически ищет в книге рецептов `Действие` с таким же названием. Если находит — использует его. Это самый простой и распространённый способ связать `Tool` с его кодом.
3.  **По умолчанию — воображение**: Если система не может найти подходящий рецепт по вышеуказанным правилам, она прибегает к воображению ответа. Это безопасный вариант по умолчанию, чтобы ничего не сломалось.

Это упрощает разработку:

- Чтобы `Tool` работал с реальным кодом, просто дайте коду **то же имя**, что и у `Tool`.
- Если вы создадите `Tool` без кода, он безопасно переключится на обработку ИИ.
- Если вы хотите, чтобы один и тот же фрагмент кода работал для нескольких разных `Tools`, вы можете использовать Правило №1, чтобы указать им всем на один и тот же рецепт.

## Почему это разделение так важно

Если бы мы не разделяли меню (`Tool`) и рецепты (`Действие`), они были бы навсегда связаны. Представьте, что для изменения рецепта вам пришлось бы сообщать об этом каждому клиенту, который когда-либо заказывал это блюдо. Это было бы невозможно!

Разделяя их, мы получаем потрясающую гибкость:

- **Рецепты можно менять, никого не сбивая с толку**: Вы можете обновить код, который проверяет погоду, сменив один сервис на другой, и агент ИИ, использующий `Tool` «weatherCheck», даже этого не заметит. Он просто продолжит работать.
- **Можно тестировать разные подходы**: Вы можете заставить ИИ вообразить ответ, а также получить реальный ответ с помощью кода, а затем сравнить их, чтобы увидеть, что работает лучше.
- **Безопасное внедрение изменений**: Вы можете дать новый, экспериментальный рецепт только нескольким агентам для тестирования, в то время как все остальные будут продолжать использовать старый, надёжный.

## От знания к действию

Итак, мы разобрались, *какие* способности есть у агента (`Tool`) и *как* эти способности выполняют задачи (`Действие`). Но это только начало. Следующий шаг — понять, как система управляет всеми этими задачами: как принимает заказ, отправляет его на кухню и следит за тем, чтобы всё происходило в правильной последовательности.

Следующий документ, [Акт 004: Агент/Вызов](./004_agent_call.md), объясняет, как эти идеи применяются на практике.
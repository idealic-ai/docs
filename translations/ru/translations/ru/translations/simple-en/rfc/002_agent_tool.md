# 002: Агент/Инструмент

> **Инструмент**: Представьте Инструмент как рецепт или черновик для особой способности, которую может использовать ИИ. Он говорит ИИ: «Вот что ты можешь сделать, и вот что для этого нужно». Затем ИИ может использовать эту способность, заполнив рецепт конкретными ингредиентами. Это называется `Call`. Затем `Call` выполняется либо собственным «мозгом» ИИ, либо специальным фрагментом компьютерного кода.

> Sidenote: Требуется: [001: Агент/Запрос](./001_agent_request.md). Хорошо сочетается с: [003: Агент/Действие](./003_agent_activity.md).

Этот документ объясняет Инструмент — базовый черновик, который позволяет ИИ (называемому Агентом) понимать и использовать свои способности.

## Что такое Инструменты?

**Инструменты — это самая важная часть** того, как действует ИИ. Они дают ИИ совершенно новый навык: **выбирать правильное действие в нужный момент**. Это позволяет ИИ анализировать ситуацию и решать, что лучше всего сделать.

Инструменты дают ИИ:

- **Четкие инструкции**: Черновики, которые ИИ может прочитать, чтобы понять свои способности.
- **Никаких сюрпризов**: Они устанавливают четкие правила для входящей и исходящей информации.
- **Кубики LEGO**: Вы можете комбинировать разные Инструменты, чтобы помочь ИИ выполнять более сложные задачи.
- **Понятны для ИИ**: Черновики написаны так, чтобы «мозг» ИИ (LLM) мог их понять и сделать выбор.

Когда ИИ берет черновик Инструмента и заполняет все детали, он создает **Call**. `Call` — это как заполненный бланк заказа, готовый к отправке для выполнения задачи. (Вы можете узнать больше о том, как работает `Call`, в документе [004: Агент/Вызов](./004_agent_call.md)).

> **Примечание**: Вы можете попросить ИИ сделать простые вещи, просто дав ему общую идею. Но когда вам нужно, чтобы ИИ сам выбирал между различными действиями, вам нужны Инструменты. Чтобы увидеть, как простая идея может быть превращена в Инструмент, посмотрите [007: Агент/Ввод](./007_agent_input.md).

## Когда следует использовать Инструменты?

Используйте Инструменты, когда вы хотите, чтобы ИИ:

- **Выбирал действия на лету**, основываясь на происходящем.
- **Выбирал из множества различных способностей** для выполнения задачи.
- **Использовал разные версии одной и той же способности** (например, поиск через Google или DuckDuckGo).
- **Сочетал собственное мышление с четкими инструкциями** для принятия решений.

## Как работает система Инструментов

### Главная идея: Черновик — это просто план

Вся система основана на одной ключевой идее: **Инструменты — это просто черновики**. Они описывают, *что* делает способность, но не *как* она это делает. Фактическая работа выполняется либо собственным воображением ИИ, либо отдельным фрагментом кода, который называется **[Действие](./003_agent_activity.md)**.

Черновик Инструмента сообщает вам:

- **Что он делает** (простое описание).
- **Что ему нужно** (ингредиенты, или входная информация).
  >Sidenote: Об этих дополнительных настройках:
  >
  > - `_instance`: Вы можете узнать об этом в [011: Агент/Инстансинг](./011_agent_instancing.md).
  > - `_module`: Для получения дополнительной информации смотрите [009: Агент/Модуль](./009_agent_module.md).
- **Что он создает** (результат, или `_output`).
- **Как он называется** (его имя, или `_tool`).
- **Как это делается** (поле `_activity`, о котором вы можете прочитать в [003: Агент/Действие](./003_agent_activity.md)).

### Специальные метки в Черновике

В черновиках Инструментов используются специальные метки (все они начинаются с подчеркивания `_`), чтобы давать системе инструкции:

- **_tool**: Уникальное имя для этого инструмента (обязательно для включения).
- **_activity**: Указывает на определенный фрагмент кода (`Activity`), который может выполнить работу. Вы можете узнать, как это работает, в [003: Агент/Действие](./003_agent_activity.md).
- **_output**: Описывает, как должен выглядеть результат.
- **_reasoningForCall**: Заметка, которую ИИ добавляет, чтобы объяснить, *почему* он решил использовать этот инструмент.

Любое другое поле без подчеркивания является обычным ингредиентом, необходимым инструменту. Специальные метки с `_` всегда идут первыми, чтобы ИИ мог легко видеть важные инструкции.

### О чем заботится система

Система Инструментов отвечает за:

- **Отслеживание всех черновиков** (регистрация инструментов).
- **Помощь ИИ в заполнении пробелов** в черновике с использованием имеющейся у него информации.
- **Решение о том, кто выполняет работу** («мозг» ИИ или определенный фрагмент кода).

Другие части системы занимаются такими вещами, как управление рабочими процессами и правилами того, как и когда выполняются действия.

## Определение Инструмента

Инструменты определяются с использованием формата под названием JSON Schema. Вот пример Инструмента, который может определить, является ли предложение радостным, грустным или нейтральным. Этому инструменту не нужен отдельный фрагмент кода, потому что ИИ может просто использовать собственное понимание языка для получения ответа.

```typescript
Tool.register('sentimentAnalysis', {
  type: 'object',
  description: 'Анализирует тональность текста',
  properties: {
    _tool: { type: 'string', const: 'sentimentAnalysis' },
    text: { type: 'string', description: 'Текст для анализа' },
    _output: {
      type: 'object',
      properties: {
        sentiment: { type: 'string' },
        confidence: { type: 'number' },
      },
    },
  },
});
```

## Набор инструментов и Вызов

Хотя один инструмент полезен, настоящая магия происходит, когда вы даете ИИ целый набор инструментов. Система показывает ИИ все доступные черновики Инструментов одновременно. Это позволяет ИИ просмотреть свои варианты и выбрать лучший для конкретной задачи.

Когда ИИ выбирает Инструмент и заполняет необходимую информацию, он создает **Call**. `Call` — это окончательная, готовая к выполнению команда, которая передается для исполнения.

> Sidenote: Когда ИИ использует Инструмент, он создает **Call** — фактическую команду для выполнения действия. Вы можете узнать об этом больше здесь: [004: Агент/Вызов](./004_agent_call.md).

## Два способа выполнения задач

Черновик Инструмента сам по себе — это просто план. Заставить его что-то делать можно двумя способами. Первый способ мы называем **скрытое исполнение**, когда ИИ использует собственное творчество и знания, чтобы найти ответ. Это идеально подходит для задач, связанных с языком или идеями.

Но для действий, которые требуют взаимодействия с реальным миром — например, поиск в интернете или проверка базы данных — Инструмент должен быть связан с реальной компьютерной программой. Мы называем эту программу **Действие**.

Разделение черновика Инструмента и Действия, выполняющего работу, — очень важная идея. Это означает, что ИИ может думать о своих способностях, не беспокоясь о сложных деталях их работы. Мы также можем заменять программу, которую использует инструмент, не меняя черновик. Следующий документ, **[003: Агент/Действие](./003_agent_activity.md)**, объясняет, как Действия воплощают Инструменты в жизнь.
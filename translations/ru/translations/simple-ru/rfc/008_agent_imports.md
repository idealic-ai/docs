# 008: Агент/Импорты

> **Импорт:** Это как закладка в большой книге. Она указывает на нужную информацию из основного окружения, которую нужно передать для выполнения задачи. Импорт помогает искусственному интеллекту (ИИ) сосредоточиться на главном или создаёт для него отдельное, чистое рабочее пространство. Управляется свойством `_imports`. — [Глоссарий](./000_glossary.md)

В документе [004: Агент/Вызов](./004_agent_call.md) мы говорили о разных способах запустить задачу: можно сделать её **тут же (Inline)** или **в отдельном модуле (Module)**, а также можно дать **чёткую инструкцию (Explicit)** или **попросить ИИ самому всё придумать (Latent)**. Протокол Импортов объясняет, как совмещать эти способы и управлять информацией для каждого из них.

## Совмещение масштаба и метода

Представь, что ИИ — это твой помощник. Вот четыре способа дать ему задание:

1.  **Тут же, с чёткой инструкцией (`_activity`)**: Это как дать помощнику калькулятор и сказать: «Сложи 2 и 3». Он сразу же выполняет простое действие (`_activity`) с данными, которые ты дал (`params`). Импорты здесь обычно не нужны, потому что всё и так понятно.

2.  **Тут же, но пусть сам придумает (нет `_activity`)**: Ты говоришь помощнику: «Вот тебе условие задачи на листке, реши её и напиши ответ». Он сам думает и сразу пишет результат (`_output`). С помощью `_imports` ты можешь дать ему только тот листок с условием, чтобы он не отвлекался на другие бумаги на столе.

3.  **В отдельном модуле, с чёткой инструкцией (`_module` + `_activity`)**: Ты отправляешь помощника в другую комнату (`_module`) с чёткой инструкцией (`_activity`). Если ты используешь `_imports`, то даёшь ему с собой только нужные для этой инструкции документы. Так он будет работать в чистом, изолированном пространстве.

4.  **В отдельном модуле, и пусть сам придумает (`_module`, нет `_activity`)**: Ты отправляешь помощника-эксперта в другую комнату с общей задачей (`_module`). Информацию для работы ты передаешь через `_imports`. Он использует эту информацию и свои знания, чтобы самостоятельно выполнить задание в этой «чистой комнате».

## Сужаем поле зрения

Свойство `_imports` — это главный инструмент, чтобы контролировать, какую информацию видит ИИ. Это как «белый список» данных, который отфильтровывает всё лишнее. Оно создаёт для ИИ сфокусированное, ограниченное поле зрения, как будто он смотрит через подзорную трубу.

- **Когда задача выполняется тут же (Inline)**: `_imports` помогают ИИ сосредоточиться.
- **Когда задача выполняется в отдельном модуле (Module)**: `_imports` определяют *всю* информацию, которая будет доступна в изолированном пространстве.

## Предоставление и запрос информации: Статические и Динамические импорты

То, как свойство `_imports` описано в схеме Инструмента, определяет, получает ли он информацию автоматически или запрашивает её сам.

- **Статические импорты (Информация предоставляется)**: Если в правилах инструмента жёстко прописано, что он может видеть (например, `_imports: { "const": ["input"] }`), то информация ему **предоставляется**. Создатель инструмента заранее решил, какие именно «документы» ему разрешено видеть. Он не может попросить что-то ещё.

> Sidenote:
> 
> ```mermaid
graph TD
    subgraph Parent Context
        direction LR
        input("input")
        state("state")
    end

    subgraph Tool Call
        direction LR
        filter{{"_imports: ['input']"}}
    end

    input --> filter
    state -.-> filter

    subgraph Provisioned Context
        direction LR
        input_prov("input")
    end

    filter --> HITL{{Human approval}}
    HITL --> input_prov
    input_prov --> Execute(Execute Tool)

    classDef unused stroke-dasharray: 5, 5, stroke:#aaa, color:#aaa
    class state unused
    classDef optional stroke-dasharray: 5, 5
    class HITL optional
> ```

- **Динамические импорты (Информация запрашивается)**: Если в правилах указан лишь список того, что можно попросить (например, `_imports: { "type": "array", "items": { "enum": ["state"] } }`), то информация **запрашивается**. ИИ сам решает, что из доступного ему нужно для выполнения задачи, и отправляет запрос.

Этот способ особенно хорош, когда человек может одобрить или отклонить запрос. Это даёт дополнительный уровень контроля и безопасности.

## Сила ограниченного контекста

- **Безопасность и фокус**: Ограничивая поле зрения, импорты защищают от случайной утечки данных и помогают ИИ лучше сосредоточиться. Это делает его работу более предсказуемой, точной и дешёвой.
- **Удобство и порядок**: Импорты позволяют создавать независимые и многоразовые модули. Каждый модуль работает в своей «чистой комнате» и не мешает другим.
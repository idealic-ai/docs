# 004: Агент/Вызов

> **Вызов:** Это как конкретная, готовая к исполнению команда. Мы берём «Инструмент» и заполняем все его поля, чтобы точно сказать, _что нужно сделать_.
>
> — [Глоссарий](./000_glossary.md)

> Sidenote:
>
> - Нужно для этого:
>   - [103: Концепция/Идеатор](./103_concept_ideator.md)
> - Открывает путь к:
>   - [008: Агент/Импорты](./008_agent_imports.md)
>   - [011: Агент/Инстансинг](./011_agent_instancing.md)
>   - [202: Идея/Контейнер](./202_idea_vessel.md)
>   - [203: Идея/Процесс](./203_idea_process.md)

Представь себе, что у нас есть общая **Идея** — это как рецепт в кулинарной книге. Затем мы создаём **Инструмент** — это как пустая карточка-шаблон для этого рецепта, где есть поля: «мука», «сахар», «температура духовки». Этот документ рассказывает о **Вызове** — это когда мы берём эту карточку-шаблон и заполняем её конкретными значениями: «пшеничная мука», «100 грамм сахара», «180 градусов». Теперь это не просто шаблон, а готовая к исполнению инструкция.

**Вызов** — это полностью заполненная карточка рецепта (Инструмент), готовая к отправке на кухню. Если Инструменты говорят нам, _что можно сделать_ (например, «испечь пирог»), то Вызовы говорят, _как именно это будет сделано_.

## Путь от Идеи к Вызову

1.  **Идея**: Это общая концепция, например, «испечь что-нибудь сладкое».
2.  **Инструмент**: Идею превращают в шаблон, похожий на анкету. Например, «Рецепт кекса» с пустыми полями для ингредиентов.
3.  **Вызов**: Искусственный интеллект (LLM) решает испечь кекс, заполняет поля («мука, 3 яйца, шоколадная крошка») и создаёт **Вызов**. Этот Вызов — это один конкретный, готовый к выполнению рецепт.

Основная мысль проста: **любую Идею можно превратить в Инструмент, а любой Инструмент — исполнить как Вызов.**

## Как управлять выполнением: Место и Способ

Когда мы «отправляем рецепт на кухню», у нас есть две ручки управления, которыми мы решаем, как именно его готовить: **Место** (где готовим) и **Способ** (как готовим).

### Две оси выполнения

1.  **Место (В своей кухне или в ресторане)**
    Эта настройка определяет, будет ли задача выполняться прямо здесь или мы поручим её кому-то другому.
    -   **В своей кухне (Встроенный)**: Это стандартный режим. Задача выполняется на месте, в текущем окружении.
    -   **В ресторане (Модульный)**: Мы передаём наш заполненный рецепт (Вызов) на другую, отдельную «кухню», которая специализируется на таких задачах.

2.  **Способ (По инструкции или творчески)**
    Эта настройка определяет, как будет получен результат: с помощью точного кода или с помощью искусственного интеллекта.
    -   **По инструкции (Явный)**: Результат создаётся по чётким, заранее написанным правилам, как если бы робот-повар следовал рецепту шаг за шагом. Результат всегда будет одинаковым.
    -   **Творчески (Скрытый)**: Это режим по умолчанию. Мы даём рецепт шеф-повару (искусственному интеллекту) и говорим: «Сделай вкусно». Он следует идее, но может проявить креативность. Результат будет отличным, но может немного отличаться каждый раз.

Эти настройки можно смешивать, чтобы создавать разные способы выполнения задач.

## Создание сложных процессов

**Вызов** — это как один кубик LEGO. Сам по себе он прост, но из множества таких кубиков можно построить огромные и сложные вещи, например, замки или космические корабли.

Так же и здесь, Вызовы являются строительными блоками для более крупных Идей, например **Контейнера** или **Процесса**. Представь, что **Контейнер** — это «миссия» для ИИ. Ему дают описание ситуации, набор доступных инструментов и говорят: «Решай, что делать». Ответ ИИ — это список **Вызовов**, то есть конкретный план действий, который нужно выполнить.

> Sidenote:
>
> - [202: Идея/Контейнер](./202_idea_vessel.md)
> - [203: Идея/Процесс](./203_idea_process.md)

## Способы выполнения Вызовов

Когда ИИ создаёт сразу несколько Вызовов (например, список дел), мы можем выполнять их по-разному.

```typescript
// Выполнить одно дело
const result = await Tool(call);

// Сделать все дела сразу и дождаться, пока все будут готовы
const results = await Tool.all(calls);

// Начать делать все дела, но остановиться, как только первое будет успешно выполнено
const result = await Tool.any(calls);

// Устроить гонку: начать все дела и взять результат самого быстрого, неважно, успешный он или нет
const result = await Tool.race(calls);
```

Эти способы помогают нам:

-   **Точно управлять**: Делать задачи по одной и анализировать результат каждой.
-   **Работать сообща**: Запускать много независимых задач одновременно, чтобы сэкономить время.
-   **Находить быстрые решения**: Останавливаться, как только найдётся первый успешный ответ (`.any()`).
-   **Действовать по принципу «всё или ничего»**: Убедиться, что вся группа задач выполнена успешно (`.all()`), что важно, когда они связаны друг с другом.
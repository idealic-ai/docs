# 002: Агент/Инструмент

> **Инструмент**: Представьте инструмент как рецепт для особой способности, которую может использовать ИИ-агент. Этот рецепт показывается умному ИИ как часть его инструкций, объясняя, что он может делать. ИИ «активирует» инструмент, создавая `Call` с конкретными деталями. Этот вызов затем выполняется либо в «уме» ИИ, либо специальной компьютерной программой (`Действие`). — [Глоссарий](./000_glossary.md)

- Требуется прочесть: [001: Агент/Запрос](./001_agent_request.md)
- Дополняется: [003: Агент/Действие](./003_agent_activity.md)

Этот документ объясняет, что такое Инструмент. Думайте о нём как об основном строительном блоке, который позволяет ИИ-агентам понимать и использовать различные способности.

## Что такое Инструменты?

**Инструменты — это как набор способностей супергероя**. Они дают агенту новую крутую способность: **выбирать, что делать, в зависимости от ситуации**. Это позволяет агентам подбирать правильный ход для любой задачи.

Представьте, что агент — это шеф-повар на кухне. Инструменты — это его книга рецептов.

Каждый рецепт (Инструмент) предоставляет:

- **Чёткие инструкции**: описание способности, чтобы агент знал, что она делает.
- **Список ингредиентов**: что именно нужно для работы (входные данные) и что будет создано в результате (выходные данные).
- **Возможность комбинировать**: рецепты можно смешивать и сочетать для приготовления изысканного блюда. Точно так же агент может комбинировать инструменты для решения больших проблем.
- **Язык, понятный ИИ**: рецепты написаны так, чтобы умный ИИ мог их прочитать, понять и выбрать нужный.

Когда агент выбирает рецепт (Инструмент) и добавляет конкретные ингредиенты (заполняет детали), он создаёт **Call**. `Call` — это как заказ на приготовление определённого блюда. Вы можете прочитать больше о том, как обрабатывается этот заказ, в [004: Агент/Вызов](./004_agent_call.md).

> **Примечание**: Любой простой запрос к ИИ можно считать Идеей. Но Инструменты предназначены для более сложных ситуаций, когда агенту нужно самому решать, что делать. Чтобы узнать, как Идеи могут стать Инструментами, ознакомьтесь с [007: Агент/Ввод](./007_agent_input.md).

## Когда использовать систему Инструментов

Используйте Инструменты, когда вы хотите, чтобы ваш агент мог:

- **Самостоятельно выбирать действия** в зависимости от происходящего.
- **Выбирать из нескольких разных способностей** для достижения цели (например, поиск в Google или поиск в Википедии).
- **Использовать разные методы** для одного и того же действия (например, разные поисковые системы).
- **Сочетать мышление ИИ с жёстко закодированными правилами** при принятии решений.

## Как устроена система Инструментов

### Основная идея: Инструмент — это просто описание

Система Инструментов построена на одной большой идее: **Инструменты — это просто черновики**. Они говорят, *что* можно сделать, но не *как* это сделать. Фактическая работа выполняется либо самим умным ИИ (в его «уме»), либо отдельной программой, называемой **[003: Агент/Действие](./003_agent_activity.md)**.

Черновик Инструмента описывает:

- **Что делает инструмент** (описание)
- **Что ему нужно для работы** (входные параметры)
> Sidenote о расширениях:
> 
> - `_instance`: См. [011: Агент/Инстансинг](./011_agent_instancing.md)
> - `_module`: См. [009: Агент/Модуль](./009_agent_module.md)
- **Что получается в итоге** (структура `_output`)
- **Как он называется** (имя `_tool`)
- **Кто выполняет работу** (поле `_activity`, подробнее объясняется в [003: Агент/Действие](./003_agent_activity.md))

### Специальные системные поля в черновике Инструмента

В черновике Инструмента некоторые поля начинаются с подчёркивания (`_`). Это специальные инструкции для системы:

- **_tool**: Уникальное имя инструмента (его нужно указывать обязательно).
- **_activity**: Указывает на `Действие` (программу), которое должно запустить этот инструмент, если это необходимо. Как система его находит, описано в [003: Агент/Действие](./003_agent_activity.md).
- **_output**: Описание того, как мы ожидаем будет выглядеть результат.
- **_reasoningForCall**: Объяснение от агента, почему он решил использовать именно этот инструмент (добавляется системой).

Любое поле без подчёркивания — это обычный ингредиент, необходимый инструменту для выполнения своей работы. Системные поля всегда идут первыми, чтобы ИИ было легче их понять.

### Границы системы

Система Инструментов отвечает за:

- Хранение списка всех доступных Инструментов (их черновиков).
- Заполнение деталей для инструмента (когда ИИ извлекает информацию из запроса пользователя).
- Решение, кто выполняет работу (будет ли ИИ обрабатывать это в своём «уме» или передаст специальной программе `Действие`).

Более сложные вещи, такие как управление задачами и запоминание того, что было сделано, строятся поверх этой системы (например, протокол [004: Агент/Вызов](./004_agent_call.md)).

## Определение Инструмента

Инструменты описываются с использованием формата под названием JSON Schema. Пример ниже показывает `Инструмент` для определения настроения предложения (например, позитивного или негативного). Этот `Инструмент` разработан для «неявного выполнения», что означает, что он полагается на собственные умственные способности ИИ и не требует отдельной программы.

```typescript
Tool.register('sentimentAnalysis', {
  type: 'object',
  description: 'Анализирует настроение фрагмента текста',
  properties: {
    _tool: { type: 'string', const: 'sentimentAnalysis' },
    text: { type: 'string', description: 'Текст для анализа' },
    _output: {
      type: 'object',
      properties: {
        sentiment: { type: 'string' },
        confidence: { type: 'number' },
      },
    },
  },
});
```

## Объединение черновиков для создания `Call`

Хотя каждый черновик Инструмента описывает одну способность, их настоящая сила проявляется в совместном использовании. Система показывает ИИ все доступные `Инструменты` сразу, как будто выкладывая полный ящик с инструментами. Это позволяет ИИ выбрать лучший инструмент для работы. Когда ИИ выбирает `Инструмент` и предоставляет всю необходимую информацию, он создаёт **Call** — команду, готовую к выполнению. Именно этот `Call` передаётся дальше для завершения.

- [004: Агент/Вызов](./004_agent_call.md).

## Неявное и явное выполнение

Сам по себе `Инструмент` — это просто набор инструкций. `Call` может быть выполнен двумя способами. Способ по умолчанию — **неявное выполнение**: умный ИИ использует свои собственные знания, чтобы получить результат. Это отлично подходит для задач, связанных с языком или общими знаниями.

Но для действий, которым нужно взаимодействовать с реальным миром — например, искать в интернете или проверять базу данных — `Инструмент` должен быть подключён к реальной программе. Это называется **явное выполнение**, а программа, которая выполняет работу, называется **Действие**.

Это разделение между инструкцией (`Инструмент`) и исполнителем (`Действие`) является ключевой идеей. Оно позволяет агенту сначала обдумать свои варианты в общих чертах, а затем решить, как именно их выполнить. Это также означает, что вы можете легко заменять или обновлять программу, выполняющую работу, не изменяя описание способности. Следующий документ, **[003: Агент/Действие](./003_agent_activity.md)**, объяснит, как `Действия` выполняют работу для `Инструментов`.
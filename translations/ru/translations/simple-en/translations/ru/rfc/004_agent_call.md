# 004: Агент/Вызов

> **Вызов:** конкретная, готовая к запуску версия `Tool` со всеми заполненными полями. Это команда, сфокусированная на том, _что должно быть сделано прямо сейчас_.
>
> — [Глоссарий](./000_glossary.md)

> Sidenote:
>
> - Требуется:
>   - [103: Концепция/Идеатор](./103_concept_ideator.md)
> - Открывает возможности для:
>   - [008: Агент/Импорты](./008_agent_imports.md)
>   - [011: Агент/Инстансинг](./011_agent_instancing.md)
>   - [202: Идея/Сосуд](./202_idea_vessel.md)
>   - [203: Идея/Процесс](./203_idea_process.md)

Мы уже знаем об [Идеях](./101_concept_idea.md) (которые подобны чертежам для знаний) и [Инструментах](./002_agent_tool.md) (с помощью которых ИИ может понимать и использовать эти чертежи). Этот документ объясняет следующий шаг: как ИИ фактически *действует* на основе `Tool`. Это действие называется **Вызов**.

**Вызов** — это `Tool`, который был заполнен и готов к работе. Представьте себе так: если `Tool` — это рецепт торта, то `Вызов` — это ваше решение испечь торт *прямо сейчас*, с уже отмеренным точным количеством муки и сахара.

Если `Tools` определяют, _что можно сделать_, то `Вызовы` определяют, _как это будет сделано сейчас_.

## Путь от Идеи до Вызова

Вот как это работает, шаг за шагом:

1.  **Идея**: Всё начинается с концепции, такой как самодостаточная цель или фрагмент знания. Например, «возможность узнать погоду».
2.  **Инструмент**: `Idea` преобразуется в формат, который может использовать ИИ, например, в форму с пустыми полями. «Погодная» `Idea` становится `Tool` с пустыми полями для «Города» и «Даты». (Подробнее об этом можно прочитать в [002: Агент/Инструмент](./002_agent_tool.md)).
3.  **Вызов**: Когда ИИ решает использовать `Tool`, он заполняет пустые поля. Например, он вводит «Лондон» в поле «Город». Так создается **Вызов** — конкретная, единая команда, готовая к выполнению.

Главное правило простое: **Любая Идея может быть преобразована в Инструмент, который затем может быть использован как Вызов.**

Чтобы точно увидеть, как поля ввода `Idea` становятся полями `Tool`, ознакомьтесь с документом **[007: Агент/Ввод](./007_agent_input.md)**.

## Управление выполнением: Область и Метод

Когда `Вызов` запускается, мы можем управлять им с помощью двух настроек: **Область** (где он выполняется) и **Метод** (как он выполняется). Представьте их как два регулятора на приборе.

### Два регулятора

1.  **Область (Встроенная или Модульная)**
    Область определяет, будет ли ИИ выполнять задачу сам или передаст ее специализированной программе.
    - **Встроенная область**: Это значение по умолчанию. ИИ выполняет работу в своем основном мыслительном процессе.
    - **Модульная область**: Это как передать работу кому-то другому. `Вызов` отправляется внешнему помощнику для выполнения.

2.  **Метод (Явный или Неявный)**
    Метод определяет, создается ли результат предсказуемым кодом или творческим ИИ.
    - **Явный метод**: Задача выполняется простым, строгим кодом. Результат всегда предсказуем, как калькулятор, который на 2+2 всегда выдает 4.
    - **Неявный метод**: Это значение по умолчанию. Задача передается творческой языковой модели ИИ (LLM). Результат генерируется, а не вычисляется, что мощно, но менее предсказуемо.

Вы можете комбинировать эти настройки для получения разного поведения. Чтобы узнать больше о том, как они работают вместе, см. **[008: Агент/Импорты](./008_agent_imports.md)**.

## Создание больших рабочих процессов

`Вызов` похож на один кубик Lego. Сам по себе он представляет собой небольшое действие. Но вы можете соединить много таких кубиков вместе, чтобы построить сложные и мощные рабочие процессы.

Таким образом мы можем запускать более крупные вещи, такие как **[Сосуд](./202_idea_vessel.md)** (что-то вроде законченного «мыслительного пузыря» для ИИ) или **[Процесс](./203_idea_process.md)** (последовательность шагов). Например, `Сосуд` упаковывает целый запрос к ИИ — включая весь контекст и доступные `Tools` — и ответ ИИ представляет собой список `Вызовов` для выполнения.

> Sidenote:
>
> - [202: Идея/Сосуд](./202_idea_vessel.md)
> - [203: Идея/Процесс](./203_idea_process.md)

## Способы запуска Вызовов

Когда ИИ решает сделать несколько дел одновременно, вы можете выбрать, как их запустить. Это дает вам большой контроль.

```typescript
// Запустить один единственный Вызов
const result = await Tool(call);

// Запустить все и дождаться завершения каждого
const results = await Tool.all(calls);

// Запустить все и остановиться, как только первый завершится успешно
const result = await Tool.any(calls);

// Запустить все и остановиться, как только первый завершится (успешно или нет)
const result = await Tool.race(calls);
```

Эти различные шаблоны позволяют вам:

- **Точный контроль**: Обрабатывать задачи одну за другой, с настраиваемыми шагами между ними.
- **Пакетная работа**: Запускать много независимых задач одновременно для максимальной эффективности.
- **Быстродействие**: Останавливаться, как только получен хороший результат (`.any()`) или как только завершится одна из задач (`.race()`).
- **Безопасность**: Убедиться, что вся группа задач завершилась успешно, либо не завершилась вовсе (`.all()`), что отлично подходит для действий, которые должны выполняться как единое целое.
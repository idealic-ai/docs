# 007: Агент/Ввод

> [!DEFINITION] [Входное сообщение](./000_glossary.md)
> Контекстное сообщение, содержащее `schema` и данные `input`. Оно определяет ожидаемые входные данные для :term[Запроса]{canonical="Request"}, превращая его в многократно используемый, подобный функции компонент.

> Sidenote:
> - Требуется: [001: Агент/Запрос](./001_agent_request.md)
> - Открывает возможности для: [002: Агент/Инструмент](./002_agent_tool.md)

Этот документ описывает :term[Входное сообщение]{canonical="Input Message"} — особый тип контекстного сообщения, которое предоставляет структурированный промпт для :term[Запроса]{canonical="Request"}. Формально определяя данные, которые :term[Запрос]{canonical="Request"} использует для формирования своего `solution`, сообщение :term[Input]{canonical="Input"} превращает разовый вызов в многократно используемый компонент, подобный функции. Этот паттерн — ключ к превращению простого :term[Запроса]{canonical="Request"} в исполняемый :term[Инструмент]{canonical="Tool"}, который могут использовать агенты.

> [!HEADSUP] На заметку
> Сохранённый, воспроизводимый :term[Запрос]{canonical="Request"} — это то, что система называет :term[Идеей]{canonical="Idea"}. Когда к его контексту добавляется сообщение :term[Input]{canonical="Input"}, он становится исполняемым :term[Идеатором]{canonical="Ideator"}

## Тип сообщения :term[Input]{canonical="Input"}

Сообщение :term[Input]{canonical="Input"} — это особый тип контекстного сообщения, предназначенный для формального объявления данных, которые принимает :term[Запрос]{canonical="Request"}. Это механизм, который фиксирует структурированные входные данные, используемые для получения определённого `solution`, обеспечивая полную, воспроизводимую запись вычислительного процесса.

Сообщение :term[Input]{canonical="Input"} содержит два ключевых свойства:

1.  **`schema`**: Объект JSON Schema, который определяет структуру, типы и ограничения данных, ожидаемых `Запросом`.
2.  **`input`**: Конкретный объект данных, который соответствует `schema` и представляет фактические значения, использованные для конкретного выполнения.

Определяя свои входные данные таким структурированным образом, любой :term[Запрос]{canonical="Request"} может стать самоописываемым не только в части вывода (`solution` и `schema`), но и в части того, что ему требуется для генерации. Это основной механизм для создания воспроизводимого запроса.

:::::details{title="Пример: использование Input для структурированного промпта"}

::::columns
:::column{title="Как выглядит код"}

```typescript
Agent.Request(
  config,
  schema, // Схема вывода
  [
    // Контекст
    {
      type: 'input',
      input: {
        userName: 'Jane',
        topic: 'the weather',
      },
      schema: {
        type: 'object',
        properties: {
          userName: {
            type: 'string',
            description: 'Автор статьи',
          },
          topic: {
            type: 'string',
            description: 'Тема, о которой нужно написать статью',
          },
        },
      },
    },
  ]
);
```

:::
:::column{title="Что видит LLM"}

```typescript
{
  role: 'user',
  content: {
    type: 'text',
    text:
      `## Данные: ¶input
      Входные данные ДОЛЖНЫ рассматриваться как структурированный промпт
      Схема: {
        "type": "object",
        "properties": {
          userName: {
            type: "string",
            description: "Автор статьи"
          },
          topic: {
            type: "string",
            description: "Тема, о которой нужно написать статью"
          },
        }
      }

      {
        "userName": "Jane",
        "topic": "the weather"
      }`
  }
}
```

:::
::::

:::::

## Путь к удобству: интерфейс по умолчанию

Сообщение `Input` — это больше, чем просто техническая деталь; это ключ, который открывает полноценный интерактивный опыт для любого :term[Запроса]{canonical="Request"}. Поскольку :term[Запрос]{canonical="Request"} определяется структурированными схемами как для ввода, так и для вывода, для него можно автоматически сгенерировать пользовательский интерфейс.

> Sidenote:
> - [103: Концепция/Идеатор](./103_concept_ideator.md).

Этот интерфейс состоит из двух частей:

1.  **Форма**: `schema` в сообщении :term[Input]{canonical="Input"} предоставляет чертеж для формы ввода. Система может прочитать его, чтобы мгновенно отобразить интерактивные элементы управления с метками и проверкой данных.
2.  **Результат**: Основная `schema` :term[Запроса]{canonical="Request"} предоставляет чертеж для вывода. После завершения :term[Запроса]{canonical="Request"} его `solution` может быть представлен в наглядном структурированном виде, а не просто как сырые данные.

Это превращает любой :term[Запрос]{canonical="Request"} в интерактивную песочницу. Пользователь может экспериментировать с различными входными данными в форме и сразу видеть, как они формируют структурированный результат. Это делает создание и использование мощных инструментов доступнее, превращая абстрактные вычислительные процессы в осязаемые интерактивные приложения, которые может исследовать каждый.

> Sidenote:
> - [102: Концепция/Суверенитет](./102_concept_sovereignty.md).

## Композиция с другими протоколами

Протокол :term[Input]{canonical="Input"} — это специализация паттерна :term[Data]{canonical="Data"}, но он также комбинируется с несколькими другими протоколами для создания сложных динамических рабочих процессов.

- **:term[Инструмент]{canonical="Tool"}:** Сообщение :term[Input]{canonical="Input"} — это ключ к превращению :term[Запроса]{canonical="Request"} в многократно используемый :term[Инструмент]{canonical="Tool"}. `schema` из сообщения :term[Input]{canonical="Input"} определяет параметры :term[Инструмента]{canonical="Tool"} (что ему нужно для запуска), а основная `schema` :term[Запроса]{canonical="Request"} определяет `_output` :term[Инструмента]{canonical="Tool"} (что он производит).

  > Sidenote:
  > - [002: Агент/Инструмент](./002_agent_tool.md)

- **:term[План]{canonical="Plan"}:** Сообщение :term[Plan]{canonical="Plan"} содержит граф :term[Вызовов Инструментов]{canonical="Call"}. :term[Input]{canonical="Input"} предоставляет начальные параметры, которые передаются первому :term[Вызову Инструмента]{canonical="Call"} в графе, запуская весь процесс.

  > Sidenote:
  > - [010: Агент/План](./010_agent_plan.md)

- **:term[Экземплирование]{canonical="Instancing"}:** При использовании с протоколом :term[Экземплирования]{canonical="Instancing"}, сообщения :term[Input]{canonical="Input"} могут предоставлять данные для запросов с несколькими экземплярами, либо как глобальную конфигурацию для всех экземпляров, либо как целевой ввод для конкретного экземпляра.

  > Sidenote:
  > - [011: Агент/Экземплирование](./011_agent_instancing.md)

- **:term[Переменные]{canonical="Variable"}:** Сообщение :term[Input]{canonical="Input"} предоставляет начальные статические данные, которые запускают процесс. Однако :term[Переменные]{canonical="Variable"} — это механизм, который позволяет использовать эти данные динамически. :term[Вызовы Инструментов]{canonical="Call"} используют :term[Ссылки на переменные]{canonical="Variable Reference"}, чтобы считывать значения из :term[Input]{canonical="Input"}, связывая начальные параметры с исполняемыми шагами :term[Плана]{canonical="Plan"}.
  > Sidenote:
  > - [008: Агент/Переменные](./008_agent_variables.md)

## От статических вводов к динамическим связям

Протокол :term[Input]{canonical="Input"} предоставляет формальный механизм для подачи структурированных данных агенту, превращая простой :term[Запрос]{canonical="Request"} в многократно используемый компонент, подобный функции. Однако это определяет лишь начальную точку процесса. Для создания сложных рабочих процессов эти статические входные данные необходимо связать с инструментами, которые будут с ними работать.

Следующий документ, :term[008: Агент/Переменные]{href="./008_agent_variables.md"}, описывает протокол, который создаёт эти динамические связи, позволяя данным декларативно передаваться от :term[Input]{canonical="Input"} к :term[Инструментам]{canonical="Tool"}.

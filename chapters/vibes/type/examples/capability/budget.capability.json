{
  "input": [],

  "schema": {
    "$id": "aug:/types/capability",
    "$revision": 1,
    "title": "Base Capability Vibe Structure",
    "description": "Defines the structure for capabilities that include both authorization and resource allocation.",
    "allOf": [
      {
        "$ref": "aug:/types/vibe",
        "$comment": "Inherits $id, $type, and $revision from the base Vibe structure."
      },
      {
        "type": "object",
        "properties": {
          "details": {
            "type": "object",
            "properties": {
              "expiresAt": {
                "type": "string",
                "format": "date-time",
                "title": "Authority Expiration",
                "description": "When this capability expires (optional for permanent capabilities)"
              },
              "branches": {
                "type": "array",
                "title": "Branches",
                "description": "The branches of this capability.",
                "items": true
              }
            }
          },
          "targets": {
            "type": "array",
            "title": "Targets",
            "description": "The targets of this capability.",
            "items": {
              "$ref": "aug:capabilities/use-total-budget",
              "$comment": "Budget/Account that provides the resources"
            }
          },
          "instructions": {
            "type": "array",
            "title": "Instructions",
            "description": "The instructions of this capability.",
            "items": {
              "$ref": "aug:instructions/reserve-budget"
            }
          },
          "requirements": {
            "type": "array",
            "title": "Requirements",
            "description": "The required capabilities for this capability.",
            "items": false
          },
          "provisions": {
            "type": "object",
            "title": "Provisions",
            "description": "The provided resources and rights for this capability.",
            "properties": {
              "budget": {
                "type": "number",
                "title": "Budget",
                "description": "The budget allocated by this capability."
              }
            }
          }
        },
        "required": [
          "displayName",
          "description",
          "createdAt",
          "lastModified",
          "grantedBy",
          "scope"
        ]
      }
    ]
  },

  "solution": {
    "metadata": {
      "id": "aug:some-capability",
      "type": "capability",
      "revision": 1,
      "branches": [],
      "createdAt": "2025-01-01T00:00:00Z",
      "updatedAt": "2025-01-01T00:00:00Z",
      "title": "Administrator capability",
      "description": "Example of a capability vibe."
    },

    "details": {
      "expiresAt": "2026-01-01T00:00:00Z",
      "branches": []
    },

    "targets": [
      {
        "$ref": "aug:accounts/some-account",
        "$comment": "The account that provides the resources"
      }
    ],
    "instructions": [
      {
        "$ref": "aug:transactions/reserve",
        "$comment": "The instruction to reserve the budget"
      }
    ],
    "requirements": [
      {
        "total": {
          "usd": 40000
        }
      }
    ],
    "provisions": {
      "total": {
        "usd": 20000
      },
      "marketing": {
        "total": {
          "usd": 10000
        },
        "billboards": {
          "usd": 2000
        },
        "radio": {
          "usd": 2000
        },
        "socialMedia": {
          "usd": 3000
        },
        "email": {
          "usd": 3000
        }
      },
      "sales": {
        "total": {
          "usd": 10000
        }
      },
      "technical": {
        "total": {
          "usd": 3000
        },
        "maintenance": {
          "usd": 1000
        },
        "production": {
          "usd": 2000
        }
      }
    }
  }
}
